<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>The Body-Synthesizer: /media/paul/LINUX_MEM/Uni/Git Repos/Body-Synthesizer_STM32_F746ZG/body-synthesizer-stm32-f746zg/Sensor_Code/Body-Synthezier_Sensors/Core/Src/MPU6050_GY521.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">The Body-Synthesizer<span id="projectnumber">&#160;1</span>
   </div>
   <div id="projectbrief">portable Sythesizer, whith oppertunity to use guestures and muscle movements as controllers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('MPU6050__GY521_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">MPU6050_GY521.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>software driver for MPU6050 in combination with a STM32  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="MPU6050__GY521_8h_source.html">MPU6050_GY521.h</a>&quot;</code><br />
</div>
<p><a href="MPU6050__GY521_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1a93e7a7a1d489ec9ce063a30d1a5df5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="MPU6050__GY521_8h.html#a93fe4b900e9a53cf29a99adc9e64d7c4">MPU6050_STATUS</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MPU6050__GY521_8c.html#a1a93e7a7a1d489ec9ce063a30d1a5df5">MPU6050_init</a> (I2C_HandleTypeDef *__hi2c, <a class="el" href="structMPU6050__Data.html">MPU6050_Data</a> *Sensor_Data_pointer, <a class="el" href="MPU6050__GY521_8h.html#a18ad019342a4d49779b497db4882529d">MPU6050_ACCL_RES</a> accl_resolution, <a class="el" href="MPU6050__GY521_8h.html#aca49957b1a43f91ee978555e2dfc7ff0">MPU6050_GYRO_RES</a> gyro_resolution, uint8_t samplerate)</td></tr>
<tr class="memdesc:a1a93e7a7a1d489ec9ce063a30d1a5df5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Init for the MPU6050.  <a href="MPU6050__GY521_8c.html#a1a93e7a7a1d489ec9ce063a30d1a5df5">More...</a><br /></td></tr>
<tr class="separator:a1a93e7a7a1d489ec9ce063a30d1a5df5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54ed50404498f4682d81ad8cb74a7150"><td class="memItemLeft" align="right" valign="top"><a class="el" href="MPU6050__GY521_8h.html#a93fe4b900e9a53cf29a99adc9e64d7c4">MPU6050_STATUS</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MPU6050__GY521_8c.html#a54ed50404498f4682d81ad8cb74a7150">MPU6050_Read_Accl</a> ()</td></tr>
<tr class="memdesc:a54ed50404498f4682d81ad8cb74a7150"><td class="mdescLeft">&#160;</td><td class="mdescRight">reeads only accl data  <a href="MPU6050__GY521_8c.html#a54ed50404498f4682d81ad8cb74a7150">More...</a><br /></td></tr>
<tr class="separator:a54ed50404498f4682d81ad8cb74a7150"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac16021f5f2c6dbf509ed77ddfc6d943d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="MPU6050__GY521_8h.html#a93fe4b900e9a53cf29a99adc9e64d7c4">MPU6050_STATUS</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MPU6050__GY521_8c.html#ac16021f5f2c6dbf509ed77ddfc6d943d">MPU6050_Read_Gyro</a> ()</td></tr>
<tr class="memdesc:ac16021f5f2c6dbf509ed77ddfc6d943d"><td class="mdescLeft">&#160;</td><td class="mdescRight">reads only gyro data  <a href="MPU6050__GY521_8c.html#ac16021f5f2c6dbf509ed77ddfc6d943d">More...</a><br /></td></tr>
<tr class="separator:ac16021f5f2c6dbf509ed77ddfc6d943d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a109418b6b13fd4ddff993014f625994f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="MPU6050__GY521_8h.html#a93fe4b900e9a53cf29a99adc9e64d7c4">MPU6050_STATUS</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MPU6050__GY521_8c.html#a109418b6b13fd4ddff993014f625994f">MPU6050_Read_Sensor</a> ()</td></tr>
<tr class="memdesc:a109418b6b13fd4ddff993014f625994f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads raw data from accl and gyro <br  />
  <a href="MPU6050__GY521_8c.html#a109418b6b13fd4ddff993014f625994f">More...</a><br /></td></tr>
<tr class="separator:a109418b6b13fd4ddff993014f625994f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bffe1265ebfe68fd00af734443b6f4f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="MPU6050__GY521_8h.html#a93fe4b900e9a53cf29a99adc9e64d7c4">MPU6050_STATUS</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MPU6050__GY521_8c.html#a9bffe1265ebfe68fd00af734443b6f4f">MPU6050_Calculate_Mean</a> ()</td></tr>
<tr class="memdesc:a9bffe1265ebfe68fd00af734443b6f4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the mean value of the gyro and accl over n_measurements.  <a href="MPU6050__GY521_8c.html#a9bffe1265ebfe68fd00af734443b6f4f">More...</a><br /></td></tr>
<tr class="separator:a9bffe1265ebfe68fd00af734443b6f4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5545cc463f9c6b45b18aab7acc33d83"><td class="memItemLeft" align="right" valign="top"><a class="el" href="MPU6050__GY521_8h.html#a93fe4b900e9a53cf29a99adc9e64d7c4">MPU6050_STATUS</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MPU6050__GY521_8c.html#ac5545cc463f9c6b45b18aab7acc33d83">MPU6050_Calibrate</a> ()</td></tr>
<tr class="memdesc:ac5545cc463f9c6b45b18aab7acc33d83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calibrates the MPU6050 and sets the offsets, which needed to be subtracted from the Rawdata to get valid information.  <a href="MPU6050__GY521_8c.html#ac5545cc463f9c6b45b18aab7acc33d83">More...</a><br /></td></tr>
<tr class="separator:ac5545cc463f9c6b45b18aab7acc33d83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5e70844772059924d57cc53655aa1f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MPU6050__GY521_8c.html#ad5e70844772059924d57cc53655aa1f2">getGyroRoll</a> ()</td></tr>
<tr class="memdesc:ad5e70844772059924d57cc53655aa1f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Roll with gyro-data.  <a href="MPU6050__GY521_8c.html#ad5e70844772059924d57cc53655aa1f2">More...</a><br /></td></tr>
<tr class="separator:ad5e70844772059924d57cc53655aa1f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a923f606dca8c70b4e43e0191f01cd79b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MPU6050__GY521_8c.html#a923f606dca8c70b4e43e0191f01cd79b">getAcclRoll</a> ()</td></tr>
<tr class="memdesc:a923f606dca8c70b4e43e0191f01cd79b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the roll with accl-data <br  />
  <a href="MPU6050__GY521_8c.html#a923f606dca8c70b4e43e0191f01cd79b">More...</a><br /></td></tr>
<tr class="separator:a923f606dca8c70b4e43e0191f01cd79b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e9d05683d6f3a7e9cf6a2a95b4fd054"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MPU6050__GY521_8c.html#a4e9d05683d6f3a7e9cf6a2a95b4fd054">getAngleRoll</a> ()</td></tr>
<tr class="separator:a4e9d05683d6f3a7e9cf6a2a95b4fd054"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5723da18ebbc9a3730c81df47503f5a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MPU6050__GY521_8c.html#ad5723da18ebbc9a3730c81df47503f5a">MPU6050_Display_Data</a> ()</td></tr>
<tr class="memdesc:ad5723da18ebbc9a3730c81df47503f5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays all Gyro and Accl Axis.  <a href="MPU6050__GY521_8c.html#ad5723da18ebbc9a3730c81df47503f5a">More...</a><br /></td></tr>
<tr class="separator:ad5723da18ebbc9a3730c81df47503f5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaee8c045744fa4931cc694f7ef43d034"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MPU6050__GY521_8c.html#aaee8c045744fa4931cc694f7ef43d034">MPU6050_GetIntReg</a> (void)</td></tr>
<tr class="separator:aaee8c045744fa4931cc694f7ef43d034"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02824d958116be29bdab36becfb8c7f6"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MPU6050__GY521_8c.html#a02824d958116be29bdab36becfb8c7f6">MPU6050_GetDMPIntReg</a> (void)</td></tr>
<tr class="separator:a02824d958116be29bdab36becfb8c7f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad201e8f55c11cb39a7077fe1d5b32f70"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MPU6050__GY521_8c.html#ad201e8f55c11cb39a7077fe1d5b32f70">MPU6050_Read_FIFOcount</a> (void)</td></tr>
<tr class="separator:ad201e8f55c11cb39a7077fe1d5b32f70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8885c86e21d11e448d1545147b357a6c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MPU6050__GY521_8c.html#a8885c86e21d11e448d1545147b357a6c">MPU6050_GetFiFoData</a> (uint8_t buffer[1024])</td></tr>
<tr class="separator:a8885c86e21d11e448d1545147b357a6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6298e3fba6912f640f4fdc1fa11fd982"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MPU6050__GY521_8c.html#a6298e3fba6912f640f4fdc1fa11fd982">MPU6050_FIFO_RESET</a> ()</td></tr>
<tr class="separator:a6298e3fba6912f640f4fdc1fa11fd982"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac896cd48fc6b29da35d26c89908f2481"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MPU6050__GY521_8c.html#ac896cd48fc6b29da35d26c89908f2481">MPU6050_Display_Data_DMP</a> ()</td></tr>
<tr class="separator:ac896cd48fc6b29da35d26c89908f2481"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20b3a71ff67ac6e34b54c3959891107b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Gyro.html#ga7021b2a1eb586b74239bbfa19f42724a">tilt_direction_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="MPU6050__GY521_8c.html#a20b3a71ff67ac6e34b54c3959891107b">MPU6050_detectTilt</a> ()</td></tr>
<tr class="memdesc:a20b3a71ff67ac6e34b54c3959891107b"><td class="mdescLeft">&#160;</td><td class="mdescRight">detects the tilt of the Sensor in relation to the calibrated starting stance  <a href="MPU6050__GY521_8c.html#a20b3a71ff67ac6e34b54c3959891107b">More...</a><br /></td></tr>
<tr class="separator:a20b3a71ff67ac6e34b54c3959891107b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >software driver for MPU6050 in combination with a STM32 </p>
<dl class="section author"><dt>Author</dt><dd>Paul Mamatis </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Okt 10, 2020</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2020 </dd></dl>

<p class="definition">Definition in file <a class="el" href="MPU6050__GY521_8c_source.html">MPU6050_GY521.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a923f606dca8c70b4e43e0191f01cd79b" name="a923f606dca8c70b4e43e0191f01cd79b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a923f606dca8c70b4e43e0191f01cd79b">&#9670;&nbsp;</a></span>getAcclRoll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getAcclRoll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the roll with accl-data <br  />
 </p>
<dl class="section note"><dt>Note</dt><dd>MPU6050_Read_Sensor or MPU6050_Read_Accl must be called before </dd></dl>

<p class="definition">Definition at line <a class="el" href="MPU6050__GY521_8c_source.html#l00366">366</a> of file <a class="el" href="MPU6050__GY521_8c_source.html">MPU6050_GY521.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  366</span>                  {</div>
<div class="line"><span class="lineno">  367</span> </div>
<div class="line"><span class="lineno">  368</span>    <span class="comment">//Parameter for stability in Regions where X and Z or Y and Z are near zero</span></div>
<div class="line"><span class="lineno">  369</span>    int16_t mu = 0.01;</div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span> </div>
<div class="line"><span class="lineno">  372</span>    int16_t X = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Accl_X;</div>
<div class="line"><span class="lineno">  373</span>    int16_t Y = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Accl_Y;</div>
<div class="line"><span class="lineno">  374</span>    int16_t Z = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Accl_Z;</div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno">  376</span>    <span class="comment">// parameter for correct orientation</span></div>
<div class="line"><span class="lineno">  377</span>    int16_t     sign;</div>
<div class="line"><span class="lineno">  378</span>    <span class="keywordflow">if</span> (Z&gt;0)    sign = 1;</div>
<div class="line"><span class="lineno">  379</span>    <span class="keywordflow">else</span>        sign = -1;</div>
<div class="line"><span class="lineno">  380</span> </div>
<div class="line"><span class="lineno">  381</span>    <span class="comment">//transform radians to degree</span></div>
<div class="line"><span class="lineno">  382</span>    <span class="keywordtype">float</span> RAD_TO_DEG = 180/M_PI;</div>
<div class="line"><span class="lineno">  383</span> </div>
<div class="line"><span class="lineno">  384</span>    <span class="comment">// Get Roll</span></div>
<div class="line"><span class="lineno">  385</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Ax_deg = atan2( Y ,   sign * sqrt(Z*Z+ mu*X*X)) * RAD_TO_DEG;</div>
<div class="line"><span class="lineno">  386</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Ay_deg = atan2(-X, sqrt(Y*Y + Z*Z)) * RAD_TO_DEG;</div>
<div class="line"><span class="lineno">  387</span> </div>
<div class="line"><span class="lineno">  388</span>}</div>
<div class="ttc" id="aMPU6050__GY521_8h_html_abdc15688e79d6395670b10cf1b2e1235"><div class="ttname"><a href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a></div><div class="ttdeci">MPU6050_Data * Sensor_Data</div><div class="ttdef"><b>Definition:</b> <a href="MPU6050__GY521_8h_source.html#l00340">MPU6050_GY521.h:340</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4e9d05683d6f3a7e9cf6a2a95b4fd054" name="a4e9d05683d6f3a7e9cf6a2a95b4fd054"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e9d05683d6f3a7e9cf6a2a95b4fd054">&#9670;&nbsp;</a></span>getAngleRoll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getAngleRoll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="MPU6050__GY521_8c_source.html#l00394">394</a> of file <a class="el" href="MPU6050__GY521_8c_source.html">MPU6050_GY521.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  394</span>                   {</div>
<div class="line"><span class="lineno">  395</span> </div>
<div class="line"><span class="lineno">  396</span><span class="comment">//  MPU6050_Read_Sensor(Sensor_Data);</span></div>
<div class="line"><span class="lineno">  397</span>    <a class="code hl_function" href="MPU6050__GY521_8c.html#a923f606dca8c70b4e43e0191f01cd79b">getAcclRoll</a>(<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>);</div>
<div class="line"><span class="lineno">  398</span>    <a class="code hl_function" href="MPU6050__GY521_8c.html#ad5e70844772059924d57cc53655aa1f2">getGyroRoll</a>(<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>);</div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span>    <span class="keywordtype">float</span> X = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; X_deg;</div>
<div class="line"><span class="lineno">  401</span>    <span class="keywordtype">float</span> Y = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Y_deg;</div>
<div class="line"><span class="lineno">  402</span>    <span class="comment">//komplement√§r FIlter</span></div>
<div class="line"><span class="lineno">  403</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; X_deg =  0.98 * (X + <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gx_deg) + (0.02 * (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Ax_deg));</div>
<div class="line"><span class="lineno">  404</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Y_deg =  0.98 * (Y + <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gy_deg) + (0.02 * (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Ay_deg)); </div>
<div class="line"><span class="lineno">  405</span>    <span class="keywordtype">float</span> X = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; X_deg;</div>
<div class="line"><span class="lineno">  406</span>    <span class="keywordtype">float</span> Y = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Y_deg;-&gt; Gy_deg) + (0.02 * (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Ay_deg));</div>
<div class="line"><span class="lineno">  407</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Z_deg = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Z_deg + <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gz_deg;</div>
<div class="line"><span class="lineno">  408</span>}</div>
<div class="ttc" id="aMPU6050__GY521_8c_html_a923f606dca8c70b4e43e0191f01cd79b"><div class="ttname"><a href="MPU6050__GY521_8c.html#a923f606dca8c70b4e43e0191f01cd79b">getAcclRoll</a></div><div class="ttdeci">void getAcclRoll()</div><div class="ttdoc">Get the roll with accl-data</div><div class="ttdef"><b>Definition:</b> <a href="MPU6050__GY521_8c_source.html#l00366">MPU6050_GY521.c:366</a></div></div>
<div class="ttc" id="aMPU6050__GY521_8c_html_ad5e70844772059924d57cc53655aa1f2"><div class="ttname"><a href="MPU6050__GY521_8c.html#ad5e70844772059924d57cc53655aa1f2">getGyroRoll</a></div><div class="ttdeci">void getGyroRoll()</div><div class="ttdoc">Get the Roll with gyro-data.</div><div class="ttdef"><b>Definition:</b> <a href="MPU6050__GY521_8c_source.html#l00340">MPU6050_GY521.c:340</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad5e70844772059924d57cc53655aa1f2" name="ad5e70844772059924d57cc53655aa1f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5e70844772059924d57cc53655aa1f2">&#9670;&nbsp;</a></span>getGyroRoll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getGyroRoll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the Roll with gyro-data. </p>
<dl class="section note"><dt>Note</dt><dd>MPU6050_Read_Sensor or MPU6050_Read_Gyro must be called before </dd></dl>

<p class="definition">Definition at line <a class="el" href="MPU6050__GY521_8c_source.html#l00340">340</a> of file <a class="el" href="MPU6050__GY521_8c_source.html">MPU6050_GY521.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  340</span>                  {</div>
<div class="line"><span class="lineno">  341</span> </div>
<div class="line"><span class="lineno">  342</span>    <span class="comment">// time of measurement for integration</span></div>
<div class="line"><span class="lineno">  343</span>    <span class="keywordtype">float</span> cycletime = 80000000;</div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span>    <span class="comment">// Get Roll</span></div>
<div class="line"><span class="lineno">  346</span>    <span class="comment">// RAW Gyrodata: Gyro_X; transformation to Deg/s: Gyro_mult; time since last measurement: Gyro_time; cycletime per second: cycletime</span></div>
<div class="line"><span class="lineno">  347</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gx_deg =  (float)( ((<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gyro_X) * <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gyro_mult ) * (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gyro_time)) / cycletime;</div>
<div class="line"><span class="lineno">  348</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gy_deg =  (float)( ((<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gyro_Y) * <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gyro_mult ) * (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gyro_time)) / cycletime;</div>
<div class="line"><span class="lineno">  349</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gz_deg =  (float)( ((<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gyro_Z) * <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gyro_mult ) * (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gyro_time)) / cycletime;</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>    <span class="comment">// Take into account that +-360 degrees is the same as 0 degrees</span></div>
<div class="line"><span class="lineno">  352</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gx_deg &gt;=180) <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gx_deg = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gx_deg - 360;</div>
<div class="line"><span class="lineno">  353</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gx_deg &lt;=-180) <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gx_deg = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gx_deg + 360;</div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gy_deg &gt;=180) <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gy_deg = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gy_deg - 360;</div>
<div class="line"><span class="lineno">  356</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gy_deg &lt;=-180) <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gy_deg = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gy_deg + 360;</div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gy_deg &gt;=180) <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gz_deg = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gz_deg - 360;</div>
<div class="line"><span class="lineno">  359</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gy_deg &lt;=-180) <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gz_deg = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gz_deg + 360;</div>
<div class="line"><span class="lineno">  360</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9bffe1265ebfe68fd00af734443b6f4f" name="a9bffe1265ebfe68fd00af734443b6f4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bffe1265ebfe68fd00af734443b6f4f">&#9670;&nbsp;</a></span>MPU6050_Calculate_Mean()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="MPU6050__GY521_8h.html#a93fe4b900e9a53cf29a99adc9e64d7c4">MPU6050_STATUS</a> MPU6050_Calculate_Mean </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the mean value of the gyro and accl over n_measurements. </p>
<dl class="section note"><dt>Note</dt><dd>this function is in first order a helper function for the calibration process</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>MPU6050_STATUS </dd></dl>

<p class="definition">Definition at line <a class="el" href="MPU6050__GY521_8c_source.html#l00228">228</a> of file <a class="el" href="MPU6050__GY521_8c_source.html">MPU6050_GY521.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  228</span>                                       {</div>
<div class="line"><span class="lineno">  229</span>    <span class="comment">// Temp memory to sum up values for mean calculation</span></div>
<div class="line"><span class="lineno">  230</span>    <span class="comment">// Gyroscope</span></div>
<div class="line"><span class="lineno">  231</span>    int32_t Gx_mean_tempbuffer  =   0;</div>
<div class="line"><span class="lineno">  232</span>    int32_t Gy_mean_tempbuffer  =   0;</div>
<div class="line"><span class="lineno">  233</span>    int32_t Gz_mean_tempbuffer  =   0;</div>
<div class="line"><span class="lineno">  234</span>    <span class="comment">// Accelerometer</span></div>
<div class="line"><span class="lineno">  235</span>    int32_t Ax_mean_tempbuffer  =   0;</div>
<div class="line"><span class="lineno">  236</span>    int32_t Ay_mean_tempbuffer  =   0;</div>
<div class="line"><span class="lineno">  237</span>    int32_t Az_mean_tempbuffer  =   0;</div>
<div class="line"><span class="lineno">  238</span> </div>
<div class="line"><span class="lineno">  239</span>    <span class="comment">// First measurements have to be skipped</span></div>
<div class="line"><span class="lineno">  240</span>    <span class="keywordtype">int</span> n_skipping      =   100;</div>
<div class="line"><span class="lineno">  241</span>    <span class="keywordtype">int</span> n_measurements  =   500;</div>
<div class="line"><span class="lineno">  242</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=n_skipping; i &lt; n_measurements + n_skipping; i++){</div>
<div class="line"><span class="lineno">  243</span>        </div>
<div class="line"><span class="lineno">  244</span>    <span class="comment">// Read Data</span></div>
<div class="line"><span class="lineno">  245</span>        <span class="comment">// from Gyroscope</span></div>
<div class="line"><span class="lineno">  246</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="MPU6050__GY521_8c.html#a109418b6b13fd4ddff993014f625994f">MPU6050_Read_Sensor</a>(<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>) != MPU6050_Read_OK){</div>
<div class="line"><span class="lineno">  247</span>            <span class="keywordflow">return</span> MPU6050_Status_Error;</div>
<div class="line"><span class="lineno">  248</span>        }</div>
<div class="line"><span class="lineno">  249</span>        int16_t Gx = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>    -&gt;  Gyro_X;</div>
<div class="line"><span class="lineno">  250</span>        int16_t Gy = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>    -&gt;  Gyro_Y;</div>
<div class="line"><span class="lineno">  251</span>        int16_t Gz = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>    -&gt;  Gyro_Z;</div>
<div class="line"><span class="lineno">  252</span>        <span class="comment">// from Accelerometer</span></div>
<div class="line"><span class="lineno">  253</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="MPU6050__GY521_8c.html#a54ed50404498f4682d81ad8cb74a7150">MPU6050_Read_Accl</a>(<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>) != MPU6050_Read_OK){</div>
<div class="line"><span class="lineno">  254</span>            <span class="keywordflow">return</span> MPU6050_Status_Error;</div>
<div class="line"><span class="lineno">  255</span>        }</div>
<div class="line"><span class="lineno">  256</span> </div>
<div class="line"><span class="lineno">  257</span>        int16_t Ax = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>    -&gt;  Accl_X;</div>
<div class="line"><span class="lineno">  258</span>        int16_t Ay = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>    -&gt;  Accl_Y;</div>
<div class="line"><span class="lineno">  259</span>        int16_t Az = <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>    -&gt;  Accl_Z;</div>
<div class="line"><span class="lineno">  260</span>        <span class="comment">// sum it up</span></div>
<div class="line"><span class="lineno">  261</span>        Gx_mean_tempbuffer  +=  Gx;</div>
<div class="line"><span class="lineno">  262</span>        Gy_mean_tempbuffer  +=  Gy;</div>
<div class="line"><span class="lineno">  263</span>        Gz_mean_tempbuffer  +=  Gz;</div>
<div class="line"><span class="lineno">  264</span>        Ax_mean_tempbuffer  +=  Ax;</div>
<div class="line"><span class="lineno">  265</span>        Ay_mean_tempbuffer  +=  Ay;</div>
<div class="line"><span class="lineno">  266</span>        Az_mean_tempbuffer  +=  Az;</div>
<div class="line"><span class="lineno">  267</span>        <span class="comment">// Wait to prevent double measurements</span></div>
<div class="line"><span class="lineno">  268</span>        HAL_Delay(2);</div>
<div class="line"><span class="lineno">  269</span>    }</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>    <span class="comment">//Save offset to Sensor_Data</span></div>
<div class="line"><span class="lineno">  272</span>    <span class="comment">//Gyroscope offset</span></div>
<div class="line"><span class="lineno">  273</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gx_mean=Gx_mean_tempbuffer/n_measurements;</div>
<div class="line"><span class="lineno">  274</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gy_mean=Gy_mean_tempbuffer/n_measurements;</div>
<div class="line"><span class="lineno">  275</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gz_mean=Gz_mean_tempbuffer/n_measurements;</div>
<div class="line"><span class="lineno">  276</span>    <span class="comment">//Accelerometer offset</span></div>
<div class="line"><span class="lineno">  277</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Ax_mean=Ax_mean_tempbuffer/n_measurements;</div>
<div class="line"><span class="lineno">  278</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Ay_mean=Ay_mean_tempbuffer/n_measurements;</div>
<div class="line"><span class="lineno">  279</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Az_mean=Az_mean_tempbuffer/n_measurements;</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>    <span class="keywordflow">return</span> MPU6050_Read_OK;</div>
<div class="line"><span class="lineno">  282</span>}</div>
<div class="ttc" id="aMPU6050__GY521_8c_html_a109418b6b13fd4ddff993014f625994f"><div class="ttname"><a href="MPU6050__GY521_8c.html#a109418b6b13fd4ddff993014f625994f">MPU6050_Read_Sensor</a></div><div class="ttdeci">MPU6050_STATUS MPU6050_Read_Sensor()</div><div class="ttdoc">Reads raw data from accl and gyro</div><div class="ttdef"><b>Definition:</b> <a href="MPU6050__GY521_8c_source.html#l00198">MPU6050_GY521.c:198</a></div></div>
<div class="ttc" id="aMPU6050__GY521_8c_html_a54ed50404498f4682d81ad8cb74a7150"><div class="ttname"><a href="MPU6050__GY521_8c.html#a54ed50404498f4682d81ad8cb74a7150">MPU6050_Read_Accl</a></div><div class="ttdeci">MPU6050_STATUS MPU6050_Read_Accl()</div><div class="ttdoc">reeads only accl data</div><div class="ttdef"><b>Definition:</b> <a href="MPU6050__GY521_8c_source.html#l00149">MPU6050_GY521.c:149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac5545cc463f9c6b45b18aab7acc33d83" name="ac5545cc463f9c6b45b18aab7acc33d83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5545cc463f9c6b45b18aab7acc33d83">&#9670;&nbsp;</a></span>MPU6050_Calibrate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="MPU6050__GY521_8h.html#a93fe4b900e9a53cf29a99adc9e64d7c4">MPU6050_STATUS</a> MPU6050_Calibrate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calibrates the MPU6050 and sets the offsets, which needed to be subtracted from the Rawdata to get valid information. </p>
<dl class="section return"><dt>Returns</dt><dd>MPU6050_STATUS </dd></dl>

<p class="definition">Definition at line <a class="el" href="MPU6050__GY521_8c_source.html#l00288">288</a> of file <a class="el" href="MPU6050__GY521_8c_source.html">MPU6050_GY521.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  288</span>                                  {</div>
<div class="line"><span class="lineno">  289</span> </div>
<div class="line"><span class="lineno">  290</span>    <span class="comment">// gravitational constant depending on accelerometer resolution</span></div>
<div class="line"><span class="lineno">  291</span>    int16_t gravitation = (int16_t)((<span class="keywordtype">float</span>)1 / <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Accl_mult);</div>
<div class="line"><span class="lineno">  292</span>    <span class="comment">// allowed deviation from mean for raw data from sensors</span></div>
<div class="line"><span class="lineno">  293</span>    int8_t  gyro_tolerance  = 1;</div>
<div class="line"><span class="lineno">  294</span>    int8_t  accl_tolerance  = 5;</div>
<div class="line"><span class="lineno">  295</span> </div>
<div class="line"><span class="lineno">  296</span>    <span class="comment">// Set offset Initially (offset is subtracted from future measurements)</span></div>
<div class="line"><span class="lineno">  297</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gx_offset        =   <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gx_mean;</div>
<div class="line"><span class="lineno">  298</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gy_offset        =   <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gy_mean;</div>
<div class="line"><span class="lineno">  299</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gz_offset        =   <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gz_mean;</div>
<div class="line"><span class="lineno">  300</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Ax_offset        =   <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Ax_mean;</div>
<div class="line"><span class="lineno">  301</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Ay_offset        =   <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Ay_mean;</div>
<div class="line"><span class="lineno">  302</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Az_offset        =   (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Az_mean) + gravitation;</div>
<div class="line"><span class="lineno">  303</span> </div>
<div class="line"><span class="lineno">  304</span>    <span class="comment">// Indicator for correct calibration of all axis</span></div>
<div class="line"><span class="lineno">  305</span>    <span class="keywordtype">int</span> calibrated = 0;</div>
<div class="line"><span class="lineno">  306</span>    <span class="keywordflow">while</span>(calibrated &lt;= 6){</div>
<div class="line"><span class="lineno">  307</span>        printf(<span class="stringliteral">&quot;%i\n\r&quot;</span>,calibrated );</div>
<div class="line"><span class="lineno">  308</span>        <span class="comment">// Calculate means of sensors</span></div>
<div class="line"><span class="lineno">  309</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="MPU6050__GY521_8c.html#a9bffe1265ebfe68fd00af734443b6f4f">MPU6050_Calculate_Mean</a>(<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>)!= MPU6050_Read_OK){</div>
<div class="line"><span class="lineno">  310</span>            <span class="keywordflow">return</span> MPU6050_Status_Error;</div>
<div class="line"><span class="lineno">  311</span>        }</div>
<div class="line"><span class="lineno">  312</span>        <span class="comment">// Validate or Update Calibration</span></div>
<div class="line"><span class="lineno">  313</span>        <span class="comment">// Gyroscope X Y Z</span></div>
<div class="line"><span class="lineno">  314</span>        <span class="keywordflow">if</span> (abs(<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gx_mean)&lt;gyro_tolerance) calibrated++;</div>
<div class="line"><span class="lineno">  315</span>        <span class="keywordflow">else</span> <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gx_offset       =   (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gx_offset)  +   (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gx_mean);</div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span>        <span class="keywordflow">if</span> (abs(<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gy_mean)&lt;gyro_tolerance) calibrated++;</div>
<div class="line"><span class="lineno">  318</span>        <span class="keywordflow">else</span> <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gy_offset       =   (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gy_offset)  +   (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gy_mean);</div>
<div class="line"><span class="lineno">  319</span> </div>
<div class="line"><span class="lineno">  320</span>        <span class="keywordflow">if</span> (abs(<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gz_mean)&lt;gyro_tolerance) calibrated++;</div>
<div class="line"><span class="lineno">  321</span>        <span class="keywordflow">else</span> <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gz_offset       =   (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gz_offset)  +   (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Gz_mean);</div>
<div class="line"><span class="lineno">  322</span>        <span class="comment">// Accelerometer X Y Z</span></div>
<div class="line"><span class="lineno">  323</span>        <span class="keywordflow">if</span> (abs(<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Ax_mean)&lt;accl_tolerance) calibrated++;</div>
<div class="line"><span class="lineno">  324</span>        <span class="keywordflow">else</span> <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Ax_offset       =   (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Ax_offset)  +   (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Ax_mean);</div>
<div class="line"><span class="lineno">  325</span> </div>
<div class="line"><span class="lineno">  326</span>        <span class="keywordflow">if</span> (abs(<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Ay_mean)&lt;accl_tolerance) calibrated++;</div>
<div class="line"><span class="lineno">  327</span>        <span class="keywordflow">else</span> <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Ay_offset       =   (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Ay_offset)  +   (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Ay_mean);</div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span>        <span class="keywordflow">if</span> ((abs((<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Az_mean) - gravitation)) &lt;accl_tolerance) calibrated++;</div>
<div class="line"><span class="lineno">  330</span>        <span class="keywordflow">else</span> <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Az_offset       =   (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Az_offset)  +   ((<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> -&gt; Az_mean) - gravitation);</div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>    }</div>
<div class="line"><span class="lineno">  333</span>    <span class="keywordflow">return</span> MPU6050_Read_OK;</div>
<div class="line"><span class="lineno">  334</span>}</div>
<div class="ttc" id="aMPU6050__GY521_8c_html_a9bffe1265ebfe68fd00af734443b6f4f"><div class="ttname"><a href="MPU6050__GY521_8c.html#a9bffe1265ebfe68fd00af734443b6f4f">MPU6050_Calculate_Mean</a></div><div class="ttdeci">MPU6050_STATUS MPU6050_Calculate_Mean()</div><div class="ttdoc">Gets the mean value of the gyro and accl over n_measurements.</div><div class="ttdef"><b>Definition:</b> <a href="MPU6050__GY521_8c_source.html#l00228">MPU6050_GY521.c:228</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a20b3a71ff67ac6e34b54c3959891107b" name="a20b3a71ff67ac6e34b54c3959891107b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20b3a71ff67ac6e34b54c3959891107b">&#9670;&nbsp;</a></span>MPU6050_detectTilt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Gyro.html#ga7021b2a1eb586b74239bbfa19f42724a">tilt_direction_t</a> MPU6050_detectTilt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>detects the tilt of the Sensor in relation to the calibrated starting stance </p>
<dl class="section return"><dt>Returns</dt><dd>tilt_direction_t </dd></dl>

<p class="definition">Definition at line <a class="el" href="MPU6050__GY521_8c_source.html#l00499">499</a> of file <a class="el" href="MPU6050__GY521_8c_source.html">MPU6050_GY521.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  499</span>                                     {</div>
<div class="line"><span class="lineno">  500</span>    <span class="comment">//tilt Thresholds, right, left , front</span></div>
<div class="line"><span class="lineno">  501</span>    int16_t tilt_TH_X_r,tilt_TH_X_l,  tilt_TH_Y, tilt_TH_Y_f,tilt_TH_Y_b, tilt_TH_Z;</div>
<div class="line"><span class="lineno">  502</span>    int16_t tilt_TH_X_r_s, tilt_TH_X_l_s,  tilt_TH_Y_f_s, tilt_TH_Y_b_s;</div>
<div class="line"><span class="lineno">  503</span>    <span class="comment">//slow tilt</span></div>
<div class="line"><span class="lineno">  504</span>    tilt_TH_X_r = -1500;</div>
<div class="line"><span class="lineno">  505</span>    tilt_TH_X_l = 1500;</div>
<div class="line"><span class="lineno">  506</span>    tilt_TH_Y   = 1500;</div>
<div class="line"><span class="lineno">  507</span>    tilt_TH_Y_f = -1500;</div>
<div class="line"><span class="lineno">  508</span>    tilt_TH_Y_b = 1500;</div>
<div class="line"><span class="lineno">  509</span>    tilt_TH_Z   = 3800;</div>
<div class="line"><span class="lineno">  510</span>    <span class="keywordtype">float</span> angle_TH = 25.0;</div>
<div class="line"><span class="lineno">  511</span>    <span class="comment">//strong tilt</span></div>
<div class="line"><span class="lineno">  512</span>    tilt_TH_X_r_s = -2500;</div>
<div class="line"><span class="lineno">  513</span>    tilt_TH_X_l_s = 2500;</div>
<div class="line"><span class="lineno">  514</span>    tilt_TH_Y_f_s = -3000;</div>
<div class="line"><span class="lineno">  515</span>    tilt_TH_Y_b_s = 3000;</div>
<div class="line"><span class="lineno">  516</span> </div>
<div class="line"><span class="lineno">  517</span>    getAngleRoll(<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>);</div>
<div class="line"><span class="lineno">  518</span>    <span class="keywordtype">float</span> alpha = sqrtf(<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;X_deg*<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;X_deg + <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Y_deg* <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Y_deg);</div>
<div class="line"><span class="lineno">  519</span>    <span class="comment">//detect tilt in any diretion</span></div>
<div class="line"><span class="lineno">  520</span>    <span class="keywordflow">if</span> ((alpha &gt; angle_TH) &amp;&amp;  (abs(<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_Z) &lt; tilt_TH_Z)){</div>
<div class="line"><span class="lineno">  521</span>        <span class="comment">//speciify direction</span></div>
<div class="line"><span class="lineno">  522</span>        <span class="keywordflow">if</span> (abs(<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_Y) &lt; tilt_TH_Y){</div>
<div class="line"><span class="lineno">  523</span>            <span class="comment">//tilt rigth when Accl_X is negative</span></div>
<div class="line"><span class="lineno">  524</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_X &lt; tilt_TH_X_r){</div>
<div class="line"><span class="lineno">  525</span>                <span class="comment">//</span></div>
<div class="line"><span class="lineno">  526</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_X &lt; tilt_TH_X_r_s){</div>
<div class="line"><span class="lineno">  527</span>                    <span class="comment">//printf(&quot;tilt strong right \r\n&quot;);</span></div>
<div class="line"><span class="lineno">  528</span>                    <span class="keywordflow">return</span> TILT_RIGHT_S;</div>
<div class="line"><span class="lineno">  529</span>                }</div>
<div class="line"><span class="lineno">  530</span>                <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  531</span>                    <span class="comment">//printf(&quot;tilt right \r\n&quot;);</span></div>
<div class="line"><span class="lineno">  532</span>                    <span class="keywordflow">return</span> TILT_RIGHT;</div>
<div class="line"><span class="lineno">  533</span>                }</div>
<div class="line"><span class="lineno">  534</span> </div>
<div class="line"><span class="lineno">  535</span>            }</div>
<div class="line"><span class="lineno">  536</span>            <span class="comment">//tilt left when Accl_X is positiv</span></div>
<div class="line"><span class="lineno">  537</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_X &gt; tilt_TH_X_l) &amp;&amp; abs(<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_Y)){</div>
<div class="line"><span class="lineno">  538</span> </div>
<div class="line"><span class="lineno">  539</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_X &gt; tilt_TH_X_l_s){</div>
<div class="line"><span class="lineno">  540</span>                                        <span class="comment">//printf(&quot;tilt strong left\r\n&quot;);</span></div>
<div class="line"><span class="lineno">  541</span>                    <span class="keywordflow">return</span> TILT_LEFT_S;</div>
<div class="line"><span class="lineno">  542</span>                }</div>
<div class="line"><span class="lineno">  543</span>                <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  544</span>                                        <span class="comment">//printf(&quot;tilt left\r\n&quot;);</span></div>
<div class="line"><span class="lineno">  545</span>                    <span class="keywordflow">return</span> TILT_LEFT;</div>
<div class="line"><span class="lineno">  546</span>                }</div>
<div class="line"><span class="lineno">  547</span>            }</div>
<div class="line"><span class="lineno">  548</span>        }</div>
<div class="line"><span class="lineno">  549</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_Y &lt; tilt_TH_Y_f){</div>
<div class="line"><span class="lineno">  550</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_Y &lt; tilt_TH_Y_f_s){</div>
<div class="line"><span class="lineno">  551</span>                                <span class="comment">//printf(&quot;tilt strong front\r\n&quot;);</span></div>
<div class="line"><span class="lineno">  552</span>                <span class="keywordflow">return</span> TILT_FRONT_S;</div>
<div class="line"><span class="lineno">  553</span>            }</div>
<div class="line"><span class="lineno">  554</span>            <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  555</span>                                <span class="comment">//printf(&quot;tilt front\r\n&quot;);</span></div>
<div class="line"><span class="lineno">  556</span>                <span class="keywordflow">return</span> TILT_FRONT;</div>
<div class="line"><span class="lineno">  557</span>            }</div>
<div class="line"><span class="lineno">  558</span> </div>
<div class="line"><span class="lineno">  559</span>        }</div>
<div class="line"><span class="lineno">  560</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_Y &gt; tilt_TH_Y_b){</div>
<div class="line"><span class="lineno">  561</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_Y &gt; tilt_TH_Y_b_s){</div>
<div class="line"><span class="lineno">  562</span>                                <span class="comment">//printf(&quot;tilt strong back\r\n&quot;);</span></div>
<div class="line"><span class="lineno">  563</span>                <span class="keywordflow">return</span> TILT_BACK_S;</div>
<div class="line"><span class="lineno">  564</span>            }</div>
<div class="line"><span class="lineno">  565</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  566</span>                                <span class="comment">//printf(&quot;tilt back\r\n&quot;);</span></div>
<div class="line"><span class="lineno">  567</span>                <span class="keywordflow">return</span> TILT_BACK;</div>
<div class="line"><span class="lineno">  568</span>            }</div>
<div class="line"><span class="lineno">  569</span> </div>
<div class="line"><span class="lineno">  570</span>        }</div>
<div class="line"><span class="lineno">  571</span>    }</div>
<div class="line"><span class="lineno">  572</span>    <span class="keywordflow">return</span> TILT_NONE;</div>
<div class="line"><span class="lineno">  573</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad5723da18ebbc9a3730c81df47503f5a" name="ad5723da18ebbc9a3730c81df47503f5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5723da18ebbc9a3730c81df47503f5a">&#9670;&nbsp;</a></span>MPU6050_Display_Data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MPU6050_Display_Data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Displays all Gyro and Accl Axis. </p>

<p class="definition">Definition at line <a class="el" href="MPU6050__GY521_8c_source.html#l00414">414</a> of file <a class="el" href="MPU6050__GY521_8c_source.html">MPU6050_GY521.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  414</span>                           {</div>
<div class="line"><span class="lineno">  415</span>    <span class="comment">//  uint8_t buffer[1024];</span></div>
<div class="line"><span class="lineno">  416</span>    <a class="code hl_function" href="MPU6050__GY521_8c.html#a109418b6b13fd4ddff993014f625994f">MPU6050_Read_Sensor</a>(<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>);</div>
<div class="line"><span class="lineno">  417</span>    printf(<span class="stringliteral">&quot;Gx: %i\r\n&quot;</span>, <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gyro_X);<span class="comment">//+(buffer[5]&lt;&lt;8)+(buffer[6]&lt;&lt;16)+(buffer[7]&lt;&lt;24));</span></div>
<div class="line"><span class="lineno">  418</span>    printf(<span class="stringliteral">&quot;Gy: %i\r\n&quot;</span>, <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gyro_Y);</div>
<div class="line"><span class="lineno">  419</span>    printf(<span class="stringliteral">&quot;Gz: %i\r\n&quot;</span>, <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gyro_Z);</div>
<div class="line"><span class="lineno">  420</span>    printf(<span class="stringliteral">&quot;Ax: %i\r\n&quot;</span>, <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_X);</div>
<div class="line"><span class="lineno">  421</span>    printf(<span class="stringliteral">&quot;Ay: %i\r\n&quot;</span>, <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_Y);</div>
<div class="line"><span class="lineno">  422</span>    printf(<span class="stringliteral">&quot;Az: %i\r\n&quot;</span>, <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_Z);</div>
<div class="line"><span class="lineno">  423</span> </div>
<div class="line"><span class="lineno">  424</span>    <span class="comment">//  printf(&quot;Gx: %i      **Gy: %i        **Gz: %i\r\n&quot;,Sensor_Data-&gt;Gyro_X ,Sensor_Data-&gt;Gyro_Y ,Sensor_Data-&gt;Gyro_Z);</span></div>
<div class="line"><span class="lineno">  425</span>    <span class="comment">//  printf(&quot;Ax: %i      **Ay: %i        **Az: %i\r\n&quot;, Sensor_Data-&gt;Accl_X,Sensor_Data-&gt;Accl_Y, Sensor_Data-&gt;Accl_Z);</span></div>
<div class="line"><span class="lineno">  426</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac896cd48fc6b29da35d26c89908f2481" name="ac896cd48fc6b29da35d26c89908f2481"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac896cd48fc6b29da35d26c89908f2481">&#9670;&nbsp;</a></span>MPU6050_Display_Data_DMP()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MPU6050_Display_Data_DMP </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="MPU6050__GY521_8c_source.html#l00478">478</a> of file <a class="el" href="MPU6050__GY521_8c_source.html">MPU6050_GY521.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  478</span>                               {</div>
<div class="line"><span class="lineno">  479</span>    uint8_t buffer[1024];</div>
<div class="line"><span class="lineno">  480</span>    <a class="code hl_function" href="MPU6050__GY521_8c.html#a8885c86e21d11e448d1545147b357a6c">MPU6050_GetFiFoData</a>(buffer);</div>
<div class="line"><span class="lineno">  481</span>    <span class="comment">//  printf(&quot;w: %i\r\n&quot;, buffer[0]);//+(buffer[1]&lt;&lt;8)+(buffer[2]&lt;&lt;16)+(buffer[3]&lt;&lt;24));</span></div>
<div class="line"><span class="lineno">  482</span>    <span class="comment">//  printf(&quot;Gx: %i\r\n&quot;, buffer[4]);//+(buffer[5]&lt;&lt;8)+(buffer[6]&lt;&lt;16)+(buffer[7]&lt;&lt;24));</span></div>
<div class="line"><span class="lineno">  483</span>    <span class="comment">//  printf(&quot;Gy: %i\r\n&quot;, buffer[8]);//+(buffer[9]&lt;&lt;8)+(buffer[10]&lt;&lt;16)+(buffer[12]&lt;&lt;24));</span></div>
<div class="line"><span class="lineno">  484</span>    <span class="comment">//  printf(&quot;Gz: %i\r\n&quot;, buffer[12]);//+(buffer[9]&lt;&lt;8)+(buffer[10]&lt;&lt;16)+(buffer[12]&lt;&lt;24));</span></div>
<div class="line"><span class="lineno">  485</span>    <span class="comment">//  printf(&quot;Ax: %i\r\n&quot;, buffer[4]);//+(buffer[5]&lt;&lt;8)+(buffer[6]&lt;&lt;16)+(buffer[7]&lt;&lt;24));</span></div>
<div class="line"><span class="lineno">  486</span>    <span class="comment">//  printf(&quot;Ay: %i\r\n&quot;, buffer[8]);//+(buffer[9]&lt;&lt;8)+(buffer[10]&lt;&lt;16)+(buffer[12]&lt;&lt;24));</span></div>
<div class="line"><span class="lineno">  487</span>    <span class="comment">//  printf(&quot;Az: %i\r\n&quot;, buffer[12]);//+(buffer[9]&lt;&lt;8)+(buffer[10]&lt;&lt;16)+(buffer[12]&lt;&lt;24));</span></div>
<div class="line"><span class="lineno">  488</span>    printf(<span class="stringliteral">&quot;Gx: %i ** Gy: %i ** Gz: %i\r\n&quot;</span>,buffer[4] ,buffer[8], buffer[12]);</div>
<div class="line"><span class="lineno">  489</span>    printf(<span class="stringliteral">&quot;Az: %i ** Ay: %i ** Az: %i\r\n&quot;</span>, buffer[4],buffer[8],buffer[12]);</div>
<div class="line"><span class="lineno">  490</span> </div>
<div class="line"><span class="lineno">  491</span>}</div>
<div class="ttc" id="aMPU6050__GY521_8c_html_a8885c86e21d11e448d1545147b357a6c"><div class="ttname"><a href="MPU6050__GY521_8c.html#a8885c86e21d11e448d1545147b357a6c">MPU6050_GetFiFoData</a></div><div class="ttdeci">void MPU6050_GetFiFoData(uint8_t buffer[1024])</div><div class="ttdef"><b>Definition:</b> <a href="MPU6050__GY521_8c_source.html#l00459">MPU6050_GY521.c:459</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6298e3fba6912f640f4fdc1fa11fd982" name="a6298e3fba6912f640f4fdc1fa11fd982"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6298e3fba6912f640f4fdc1fa11fd982">&#9670;&nbsp;</a></span>MPU6050_FIFO_RESET()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MPU6050_FIFO_RESET </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="MPU6050__GY521_8c_source.html#l00468">468</a> of file <a class="el" href="MPU6050__GY521_8c_source.html">MPU6050_GY521.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  468</span>                         {</div>
<div class="line"><span class="lineno">  469</span>    uint8_t buffer;</div>
<div class="line"><span class="lineno">  470</span>    HAL_I2C_Mem_Read(MPU6050_hi2c,MPU6050_ADDR, MPU6050_USR_CRTL_REG, 1,&amp;buffer , 1,100);</div>
<div class="line"><span class="lineno">  471</span>    printf(<span class="stringliteral">&quot;%i\r\n&quot;</span>, buffer);</div>
<div class="line"><span class="lineno">  472</span>    buffer = MPU6050_USR_CRTL_FIFO_EN | MPU6050_USR_CRTL_FIFO_RESET;</div>
<div class="line"><span class="lineno">  473</span> </div>
<div class="line"><span class="lineno">  474</span>    HAL_I2C_Mem_Write(MPU6050_hi2c,MPU6050_ADDR, MPU6050_USR_CRTL_REG, 1,&amp;buffer,1,100);</div>
<div class="line"><span class="lineno">  475</span>    HAL_I2C_Mem_Read(MPU6050_hi2c,MPU6050_ADDR, MPU6050_USR_CRTL_REG, 1,&amp;buffer , 1,100);</div>
<div class="line"><span class="lineno">  476</span>    printf(<span class="stringliteral">&quot;%i\r\n&quot;</span>, buffer);</div>
<div class="line"><span class="lineno">  477</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a02824d958116be29bdab36becfb8c7f6" name="a02824d958116be29bdab36becfb8c7f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02824d958116be29bdab36becfb8c7f6">&#9670;&nbsp;</a></span>MPU6050_GetDMPIntReg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MPU6050_GetDMPIntReg </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="MPU6050__GY521_8c_source.html#l00438">438</a> of file <a class="el" href="MPU6050__GY521_8c_source.html">MPU6050_GY521.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  438</span>                                  {</div>
<div class="line"><span class="lineno">  439</span>    uint8_t retval = 0;</div>
<div class="line"><span class="lineno">  440</span>    HAL_I2C_Mem_Read(MPU6050_hi2c, MPU6050_ADDR,MPU6050_RA_DMP_INT_STATUS ,  1, &amp;retval, 1,100);</div>
<div class="line"><span class="lineno">  441</span>    <span class="keywordflow">return</span> retval;</div>
<div class="line"><span class="lineno">  442</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8885c86e21d11e448d1545147b357a6c" name="a8885c86e21d11e448d1545147b357a6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8885c86e21d11e448d1545147b357a6c">&#9670;&nbsp;</a></span>MPU6050_GetFiFoData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MPU6050_GetFiFoData </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>buffer</em>[1024]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Gets the Data out of the FIFO-Buffer, Data inside the FIFO depends on the FIFO_EN Register set in the Init </p>

<p class="definition">Definition at line <a class="el" href="MPU6050__GY521_8c_source.html#l00459">459</a> of file <a class="el" href="MPU6050__GY521_8c_source.html">MPU6050_GY521.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  459</span>                                              {</div>
<div class="line"><span class="lineno">  460</span>    <span class="keywordflow">if</span> ((<a class="code hl_function" href="MPU6050__GY521_8c.html#aaee8c045744fa4931cc694f7ef43d034">MPU6050_GetIntReg</a>() &amp; 0x01) == MPU6050_INT_DATA_RDY){</div>
<div class="line"><span class="lineno">  461</span>        uint16_t count =  MPU6050_Read_FIFOcount();</div>
<div class="line"><span class="lineno">  462</span>        <span class="comment">// for (int fifo_counter  = 0; fifo_counter &lt; count; fifo_counter++){</span></div>
<div class="line"><span class="lineno">  463</span>        HAL_I2C_Mem_Read(MPU6050_hi2c, MPU6050_ADDR, MPU6050_FIFO_DATA_REG, 1024, buffer, 1,100);</div>
<div class="line"><span class="lineno">  464</span>        <span class="comment">// }</span></div>
<div class="line"><span class="lineno">  465</span>    }</div>
<div class="line"><span class="lineno">  466</span>}</div>
<div class="ttc" id="aMPU6050__GY521_8c_html_aaee8c045744fa4931cc694f7ef43d034"><div class="ttname"><a href="MPU6050__GY521_8c.html#aaee8c045744fa4931cc694f7ef43d034">MPU6050_GetIntReg</a></div><div class="ttdeci">uint8_t MPU6050_GetIntReg(void)</div><div class="ttdef"><b>Definition:</b> <a href="MPU6050__GY521_8c_source.html#l00433">MPU6050_GY521.c:433</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaee8c045744fa4931cc694f7ef43d034" name="aaee8c045744fa4931cc694f7ef43d034"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaee8c045744fa4931cc694f7ef43d034">&#9670;&nbsp;</a></span>MPU6050_GetIntReg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MPU6050_GetIntReg </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >DMP functions </p>

<p class="definition">Definition at line <a class="el" href="MPU6050__GY521_8c_source.html#l00433">433</a> of file <a class="el" href="MPU6050__GY521_8c_source.html">MPU6050_GY521.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  433</span>                               {</div>
<div class="line"><span class="lineno">  434</span>    uint8_t retval = 0;</div>
<div class="line"><span class="lineno">  435</span>    HAL_I2C_Mem_Read(MPU6050_hi2c, MPU6050_ADDR, MPU6050_INT_STATUS_REG, 1, &amp;retval, 1,100);</div>
<div class="line"><span class="lineno">  436</span>    <span class="keywordflow">return</span> retval;</div>
<div class="line"><span class="lineno">  437</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a93e7a7a1d489ec9ce063a30d1a5df5" name="a1a93e7a7a1d489ec9ce063a30d1a5df5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a93e7a7a1d489ec9ce063a30d1a5df5">&#9670;&nbsp;</a></span>MPU6050_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="MPU6050__GY521_8h.html#a93fe4b900e9a53cf29a99adc9e64d7c4">MPU6050_STATUS</a> MPU6050_init </td>
          <td>(</td>
          <td class="paramtype">I2C_HandleTypeDef *&#160;</td>
          <td class="paramname"><em>__hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structMPU6050__Data.html">MPU6050_Data</a> *&#160;</td>
          <td class="paramname"><em>Sensor_Data_pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="MPU6050__GY521_8h.html#a18ad019342a4d49779b497db4882529d">MPU6050_ACCL_RES</a>&#160;</td>
          <td class="paramname"><em>accl_resolution</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="MPU6050__GY521_8h.html#aca49957b1a43f91ee978555e2dfc7ff0">MPU6050_GYRO_RES</a>&#160;</td>
          <td class="paramname"><em>gyro_resolution</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>samplerate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Init for the MPU6050. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">__hi2c</td><td>i2c handler </td></tr>
    <tr><td class="paramname">Sensor_Data_pointer</td><td>struct to save the data </td></tr>
    <tr><td class="paramname">accl_resolution</td><td></td></tr>
    <tr><td class="paramname">gyro_resolution</td><td></td></tr>
    <tr><td class="paramname">samplerate</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MPU6050_STATUS </dd></dl>

<p class="definition">Definition at line <a class="el" href="MPU6050__GY521_8c_source.html#l00025">25</a> of file <a class="el" href="MPU6050__GY521_8c_source.html">MPU6050_GY521.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   25</span>                                                                                                                                                                                 {</div>
<div class="line"><span class="lineno">   26</span> </div>
<div class="line"><span class="lineno">   27</span>    uint8_t Data=0x00;</div>
<div class="line"><span class="lineno">   28</span>    MPU6050_hi2c = __hi2c;</div>
<div class="line"><span class="lineno">   29</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a> = Sensor_Data_pointer;</div>
<div class="line"><span class="lineno">   30</span>    printf(<span class="stringliteral">&quot;MPU6050 init begin\r\n&quot;</span>);</div>
<div class="line"><span class="lineno">   31</span>    <span class="comment">//Check if device is ready: Let LED blink 3 times if yes</span></div>
<div class="line"><span class="lineno">   32</span>    <span class="keywordflow">if</span>((HAL_I2C_IsDeviceReady(MPU6050_hi2c, MPU6050_ADDR, 2, 20)) != HAL_OK){</div>
<div class="line"><span class="lineno">   33</span>        printf(<span class="stringliteral">&quot;MPU 6050 No Connection\r\n&quot;</span>);</div>
<div class="line"><span class="lineno">   34</span>        <span class="keywordflow">return</span> MPU6050_Status_Notconnected;</div>
<div class="line"><span class="lineno">   35</span> </div>
<div class="line"><span class="lineno">   36</span>    }</div>
<div class="line"><span class="lineno">   37</span> </div>
<div class="line"><span class="lineno">   38</span> </div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span>    <span class="comment">//check WHO_AM_I: If answer is I_AM toggle LED</span></div>
<div class="line"><span class="lineno">   41</span>    HAL_I2C_Mem_Read(MPU6050_hi2c, MPU6050_ADDR, MPU6050_WHO_AM_I_REG, 1, &amp;Data, 1, 1000);</div>
<div class="line"><span class="lineno">   42</span> </div>
<div class="line"><span class="lineno">   43</span>    <span class="keywordflow">if</span> ((Data =! <a class="code hl_define" href="MPU6050__GY521_8h.html#a1de390da371b9193740d43bf523b9791">MPU6050_I_AM</a>)) <span class="comment">// if-statement is 1 if MPU is present</span></div>
<div class="line"><span class="lineno">   44</span>    {</div>
<div class="line"><span class="lineno">   45</span>        <span class="keywordflow">return</span> MPU6050_Status_Invalid;</div>
<div class="line"><span class="lineno">   46</span>    }</div>
<div class="line"><span class="lineno">   47</span> </div>
<div class="line"><span class="lineno">   48</span> </div>
<div class="line"><span class="lineno">   49</span> </div>
<div class="line"><span class="lineno">   50</span>    <span class="comment">// wake sensor</span></div>
<div class="line"><span class="lineno">   51</span>    Data=0x00;</div>
<div class="line"><span class="lineno">   52</span>    <span class="keywordflow">if</span>(HAL_I2C_Mem_Write(MPU6050_hi2c, MPU6050_ADDR, MPU6050_PWR_MGMT_1_REG, 1, &amp;Data, 1, 1000)!=HAL_OK)</div>
<div class="line"><span class="lineno">   53</span>    {</div>
<div class="line"><span class="lineno">   54</span>        <span class="keywordflow">return</span> MPU6050_Status_Invalid;</div>
<div class="line"><span class="lineno">   55</span>    }</div>
<div class="line"><span class="lineno">   56</span> </div>
<div class="line"><span class="lineno">   57</span> </div>
<div class="line"><span class="lineno">   58</span>    <span class="comment">// Config range/resolution Gyroscope</span></div>
<div class="line"><span class="lineno">   59</span>    Data = 0xE0 | (gyro_resolution&lt;&lt;3);</div>
<div class="line"><span class="lineno">   60</span>    <span class="keywordflow">if</span>(HAL_I2C_Mem_Write(MPU6050_hi2c, MPU6050_ADDR, MPU6050_GYRO_CONFIG_REG, 1, &amp;Data, 1, 1000) != HAL_OK){</div>
<div class="line"><span class="lineno">   61</span>        <span class="keywordflow">return</span> MPU6050_Status_Error;</div>
<div class="line"><span class="lineno">   62</span>    }</div>
<div class="line"><span class="lineno">   63</span>    <span class="comment">//for normalization of Gyroscope range</span></div>
<div class="line"><span class="lineno">   64</span>    <span class="keywordflow">switch</span> (gyro_resolution){</div>
<div class="line"><span class="lineno">   65</span>    <span class="keywordflow">case</span> MPU6050_GYRO_250deg:</div>
<div class="line"><span class="lineno">   66</span>        <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gyro_mult = <a class="code hl_define" href="MPU6050__GY521_8h.html#a0c37fc112539bcdbe9faa322935b02d7">MPU6050_GYRO_SENS_250</a>;</div>
<div class="line"><span class="lineno">   67</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   68</span>    <span class="keywordflow">case</span> MPU6050_GYRO_500deg:</div>
<div class="line"><span class="lineno">   69</span>        <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gyro_mult = MPU6050_GYRO_SENS_500;</div>
<div class="line"><span class="lineno">   70</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   71</span>    <span class="keywordflow">case</span> MPU6050_GYRO_1000deg:</div>
<div class="line"><span class="lineno">   72</span>        <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gyro_mult = MPU6050_GYRO_SENS_1000;</div>
<div class="line"><span class="lineno">   73</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   74</span>    <span class="keywordflow">case</span> MPU6050_GYRO_2000deg:</div>
<div class="line"><span class="lineno">   75</span>        <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gyro_mult = MPU6050_GYRO_SENS_2000;</div>
<div class="line"><span class="lineno">   76</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   77</span>    }</div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span>    <span class="comment">// Config range/resolution of Accelerometer</span></div>
<div class="line"><span class="lineno">   81</span>    Data = 0xE0 | (accl_resolution&lt;&lt;3);</div>
<div class="line"><span class="lineno">   82</span>    <span class="keywordflow">if</span>(HAL_I2C_Mem_Write(MPU6050_hi2c, MPU6050_ADDR, MPU6050_ACCL_CONFIG_REG, 1, &amp;Data, 1, 1000) != HAL_OK){</div>
<div class="line"><span class="lineno">   83</span>        <span class="keywordflow">return</span> MPU6050_Status_Error;</div>
<div class="line"><span class="lineno">   84</span>    }</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>    <span class="keywordflow">switch</span>(accl_resolution){</div>
<div class="line"><span class="lineno">   87</span>    <span class="keywordflow">case</span> MPU6050_ACCL_2G:</div>
<div class="line"><span class="lineno">   88</span>        <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_mult = <a class="code hl_define" href="MPU6050__GY521_8h.html#a1c92b8af476c3704f73583d654dd3b5e">MPU6050_ACCL_SENS_2</a>;</div>
<div class="line"><span class="lineno">   89</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   90</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="MPU6050__GY521_8h.html#a18ad019342a4d49779b497db4882529da6390f128316eec4b36b7ea3b6d59f581">MPU6050_ACCL_4G</a>:</div>
<div class="line"><span class="lineno">   91</span>        <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_mult = MPU6050_ACCL_SENS_4;</div>
<div class="line"><span class="lineno">   92</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   93</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="MPU6050__GY521_8h.html#a18ad019342a4d49779b497db4882529dadd5c313c6802fd5118fd0ceec67ab4a9">MPU6050_ACCL_8G</a>:</div>
<div class="line"><span class="lineno">   94</span>        <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_mult = MPU6050_ACCL_SENS_8;</div>
<div class="line"><span class="lineno">   95</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   96</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="MPU6050__GY521_8h.html#a18ad019342a4d49779b497db4882529daa44ddb1fd0aa9d8783c29f2fbf45fda8">MPU6050_ACCL_16G</a>:</div>
<div class="line"><span class="lineno">   97</span>        <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_mult = MPU6050_ACCL_SENS_16;</div>
<div class="line"><span class="lineno">   98</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   99</span>    }</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>    <span class="comment">// Config Sample Rate: Sample Rate=8/(1+Data)</span></div>
<div class="line"><span class="lineno">  103</span>    Data=samplerate;</div>
<div class="line"><span class="lineno">  104</span>    <span class="keywordflow">if</span>(HAL_I2C_Mem_Write(MPU6050_hi2c, MPU6050_ADDR, <a class="code hl_define" href="MPU6050__GY521_8h.html#a8264ea96144f5fa98bd1a22ceb590315">MPU6050_SMPLRT_DIV_REG</a>, 1, &amp;Data, 1, 1000) != HAL_OK){</div>
<div class="line"><span class="lineno">  105</span>        <span class="keywordflow">return</span> MPU6050_Status_Error;</div>
<div class="line"><span class="lineno">  106</span>    }</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>    <span class="comment">//Set Gyroscope offset to zero</span></div>
<div class="line"><span class="lineno">  109</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gx_offset = 0;</div>
<div class="line"><span class="lineno">  110</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gy_offset = 0;</div>
<div class="line"><span class="lineno">  111</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gz_offset = 0;</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span>    <span class="comment">//Set Accelerometer offset to zero</span></div>
<div class="line"><span class="lineno">  114</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Ax_offset = 0;</div>
<div class="line"><span class="lineno">  115</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Ay_offset = 0;</div>
<div class="line"><span class="lineno">  116</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Az_offset = 0;</div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>    <span class="comment">//  //Set User Controll, Enable FIFO</span></div>
<div class="line"><span class="lineno">  119</span>    Data = MPU6050_USR_CRTL_FIFO_EN;</div>
<div class="line"><span class="lineno">  120</span>    <span class="keywordflow">if</span>(HAL_I2C_Mem_Write(MPU6050_hi2c, MPU6050_ADDR, MPU6050_USR_CRTL_REG, 1, &amp;Data, 1, 1000) != HAL_OK){</div>
<div class="line"><span class="lineno">  121</span>        <span class="keywordflow">return</span> MPU6050_Status_Error;</div>
<div class="line"><span class="lineno">  122</span>    }</div>
<div class="line"><span class="lineno">  123</span>    HAL_I2C_Mem_Read(MPU6050_hi2c, MPU6050_ADDR, MPU6050_USR_CRTL_REG, 1, &amp;Data, 1, 1000);</div>
<div class="line"><span class="lineno">  124</span>    <span class="comment">//  printf(&quot;MPU6050_USR_CRTL_REG: %i\r\n&quot;,Data);</span></div>
<div class="line"><span class="lineno">  125</span>    <span class="comment">// Interruppt Enable</span></div>
<div class="line"><span class="lineno">  126</span>    Data = MPU6050_INT_EN_DATA_RDY;</div>
<div class="line"><span class="lineno">  127</span>    <span class="keywordflow">if</span>(HAL_I2C_Mem_Write(MPU6050_hi2c, MPU6050_ADDR,MPU6050_RA_INT_ENABLE, 1, &amp;Data, 1, 1000) != HAL_OK){</div>
<div class="line"><span class="lineno">  128</span>        <span class="keywordflow">return</span> MPU6050_Status_Error;</div>
<div class="line"><span class="lineno">  129</span>    }</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span>    <span class="comment">//determines which sensor measurements are loaded into the FIFO buffer</span></div>
<div class="line"><span class="lineno">  133</span>    <span class="comment">//  Data = MPU6050_FIFO_EN_ACCEL | MPU6050_FIFO_EN_ZG | MPU6050_FIFO_EN_YG | MPU6050_FIFO_EN_XG;</span></div>
<div class="line"><span class="lineno">  134</span>    Data = 0x00;</div>
<div class="line"><span class="lineno">  135</span>    <span class="keywordflow">if</span>(HAL_I2C_Mem_Write(MPU6050_hi2c, MPU6050_ADDR, MPU6050_FIFO_DATA_REG, 1, &amp;Data, 1, 1000) != HAL_OK){</div>
<div class="line"><span class="lineno">  136</span>        <span class="keywordflow">return</span> MPU6050_Status_Error;</div>
<div class="line"><span class="lineno">  137</span>    }</div>
<div class="line"><span class="lineno">  138</span>    printf(<span class="stringliteral">&quot;MPU6050 init end\r\n&quot;</span>);</div>
<div class="line"><span class="lineno">  139</span>    <span class="keywordflow">return</span> MPU6050_Status_OK;</div>
<div class="line"><span class="lineno">  140</span>}</div>
<div class="ttc" id="aMPU6050__GY521_8h_html_a0c37fc112539bcdbe9faa322935b02d7"><div class="ttname"><a href="MPU6050__GY521_8h.html#a0c37fc112539bcdbe9faa322935b02d7">MPU6050_GYRO_SENS_250</a></div><div class="ttdeci">#define MPU6050_GYRO_SENS_250</div><div class="ttdef"><b>Definition:</b> <a href="MPU6050__GY521_8h_source.html#l00150">MPU6050_GY521.h:150</a></div></div>
<div class="ttc" id="aMPU6050__GY521_8h_html_a18ad019342a4d49779b497db4882529da6390f128316eec4b36b7ea3b6d59f581"><div class="ttname"><a href="MPU6050__GY521_8h.html#a18ad019342a4d49779b497db4882529da6390f128316eec4b36b7ea3b6d59f581">MPU6050_ACCL_4G</a></div><div class="ttdeci">@ MPU6050_ACCL_4G</div><div class="ttdoc">-&gt;0 ¬±2g 16384 LSB/g</div><div class="ttdef"><b>Definition:</b> <a href="MPU6050__GY521_8h_source.html#l00254">MPU6050_GY521.h:254</a></div></div>
<div class="ttc" id="aMPU6050__GY521_8h_html_a18ad019342a4d49779b497db4882529daa44ddb1fd0aa9d8783c29f2fbf45fda8"><div class="ttname"><a href="MPU6050__GY521_8h.html#a18ad019342a4d49779b497db4882529daa44ddb1fd0aa9d8783c29f2fbf45fda8">MPU6050_ACCL_16G</a></div><div class="ttdeci">@ MPU6050_ACCL_16G</div><div class="ttdoc">-&gt;2 ¬±8g 4096 LSB/g</div><div class="ttdef"><b>Definition:</b> <a href="MPU6050__GY521_8h_source.html#l00257">MPU6050_GY521.h:256</a></div></div>
<div class="ttc" id="aMPU6050__GY521_8h_html_a18ad019342a4d49779b497db4882529dadd5c313c6802fd5118fd0ceec67ab4a9"><div class="ttname"><a href="MPU6050__GY521_8h.html#a18ad019342a4d49779b497db4882529dadd5c313c6802fd5118fd0ceec67ab4a9">MPU6050_ACCL_8G</a></div><div class="ttdeci">@ MPU6050_ACCL_8G</div><div class="ttdoc">-&gt;1 ¬±4g 8192 LSB/g</div><div class="ttdef"><b>Definition:</b> <a href="MPU6050__GY521_8h_source.html#l00255">MPU6050_GY521.h:255</a></div></div>
<div class="ttc" id="aMPU6050__GY521_8h_html_a1c92b8af476c3704f73583d654dd3b5e"><div class="ttname"><a href="MPU6050__GY521_8h.html#a1c92b8af476c3704f73583d654dd3b5e">MPU6050_ACCL_SENS_2</a></div><div class="ttdeci">#define MPU6050_ACCL_SENS_2</div><div class="ttdef"><b>Definition:</b> <a href="MPU6050__GY521_8h_source.html#l00155">MPU6050_GY521.h:155</a></div></div>
<div class="ttc" id="aMPU6050__GY521_8h_html_a1de390da371b9193740d43bf523b9791"><div class="ttname"><a href="MPU6050__GY521_8h.html#a1de390da371b9193740d43bf523b9791">MPU6050_I_AM</a></div><div class="ttdeci">#define MPU6050_I_AM</div><div class="ttdef"><b>Definition:</b> <a href="MPU6050__GY521_8h_source.html#l00148">MPU6050_GY521.h:148</a></div></div>
<div class="ttc" id="aMPU6050__GY521_8h_html_a8264ea96144f5fa98bd1a22ceb590315"><div class="ttname"><a href="MPU6050__GY521_8h.html#a8264ea96144f5fa98bd1a22ceb590315">MPU6050_SMPLRT_DIV_REG</a></div><div class="ttdeci">#define MPU6050_SMPLRT_DIV_REG</div><div class="ttdoc">Define I2C Register Addresses.</div><div class="ttdef"><b>Definition:</b> <a href="MPU6050__GY521_8h_source.html#l00032">MPU6050_GY521.h:32</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a54ed50404498f4682d81ad8cb74a7150" name="a54ed50404498f4682d81ad8cb74a7150"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54ed50404498f4682d81ad8cb74a7150">&#9670;&nbsp;</a></span>MPU6050_Read_Accl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="MPU6050__GY521_8h.html#a93fe4b900e9a53cf29a99adc9e64d7c4">MPU6050_STATUS</a> MPU6050_Read_Accl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>reeads only accl data </p>
<dl class="section return"><dt>Returns</dt><dd>MPU6050_STATUS </dd></dl>

<p class="definition">Definition at line <a class="el" href="MPU6050__GY521_8c_source.html#l00149">149</a> of file <a class="el" href="MPU6050__GY521_8c_source.html">MPU6050_GY521.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  149</span>                                  {</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>    uint8_t Rec_Data[6];</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>    <span class="comment">// Read 6Bytes (2byte per axis) starting from ACCL_XOUT_H register</span></div>
<div class="line"><span class="lineno">  154</span>    <span class="keywordflow">if</span>(HAL_I2C_Mem_Read (MPU6050_hi2c, MPU6050_ADDR, MPU6050_ACCL_XOUT_H_REG, 1, Rec_Data, 6, 1000) != HAL_OK){</div>
<div class="line"><span class="lineno">  155</span>        <span class="keywordflow">return</span> MPU6050_Status_Error;</div>
<div class="line"><span class="lineno">  156</span>    }</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>    <span class="comment">// Data for all axis comes as 6Byte array, in the following it is filled into one 16-bit array for each axis</span></div>
<div class="line"><span class="lineno">  159</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_X = (int16_t)(Rec_Data[0]&lt;&lt;8 | Rec_Data[1]) - <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Ax_offset;</div>
<div class="line"><span class="lineno">  160</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_Y = (int16_t)(Rec_Data[2]&lt;&lt;8 | Rec_Data[3]) - <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Ay_offset;</div>
<div class="line"><span class="lineno">  161</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_Z = (int16_t)(Rec_Data[4]&lt;&lt;8 | Rec_Data[5]) - <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Az_offset;</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>    <span class="keywordflow">return</span> MPU6050_Read_OK;</div>
<div class="line"><span class="lineno">  164</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad201e8f55c11cb39a7077fe1d5b32f70" name="ad201e8f55c11cb39a7077fe1d5b32f70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad201e8f55c11cb39a7077fe1d5b32f70">&#9670;&nbsp;</a></span>MPU6050_Read_FIFOcount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t MPU6050_Read_FIFOcount </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="MPU6050__GY521_8c_source.html#l00444">444</a> of file <a class="el" href="MPU6050__GY521_8c_source.html">MPU6050_GY521.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  444</span>                                     {</div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>    uint8_t retval[2];</div>
<div class="line"><span class="lineno">  447</span>    HAL_I2C_Mem_Read (MPU6050_hi2c, MPU6050_ADDR, MPU6050_FIFO_COUNT_H_REG, 1, &amp;retval[1],1, 1000) ;</div>
<div class="line"><span class="lineno">  448</span>    HAL_I2C_Mem_Read (MPU6050_hi2c, MPU6050_ADDR, MPU6050_FIFO_COUNT_L_REG, 1, &amp;retval[0],1, 1000) ;</div>
<div class="line"><span class="lineno">  449</span>    printf(<span class="stringliteral">&quot;%i,\r\n&quot;</span>,retval[0]);</div>
<div class="line"><span class="lineno">  450</span>    printf(<span class="stringliteral">&quot;%i,\r\n&quot;</span>,retval[1]);</div>
<div class="line"><span class="lineno">  451</span>    <span class="keywordflow">return</span> (retval[0]&lt;&lt;8) + retval[1];</div>
<div class="line"><span class="lineno">  452</span> </div>
<div class="line"><span class="lineno">  453</span> </div>
<div class="line"><span class="lineno">  454</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac16021f5f2c6dbf509ed77ddfc6d943d" name="ac16021f5f2c6dbf509ed77ddfc6d943d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac16021f5f2c6dbf509ed77ddfc6d943d">&#9670;&nbsp;</a></span>MPU6050_Read_Gyro()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="MPU6050__GY521_8h.html#a93fe4b900e9a53cf29a99adc9e64d7c4">MPU6050_STATUS</a> MPU6050_Read_Gyro </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>reads only gyro data </p>
<dl class="section return"><dt>Returns</dt><dd>MPU6050_STATUS </dd></dl>

<p class="definition">Definition at line <a class="el" href="MPU6050__GY521_8c_source.html#l00171">171</a> of file <a class="el" href="MPU6050__GY521_8c_source.html">MPU6050_GY521.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  171</span>                                  {</div>
<div class="line"><span class="lineno">  172</span> </div>
<div class="line"><span class="lineno">  173</span>    uint8_t Rec_Data[6];</div>
<div class="line"><span class="lineno">  174</span> </div>
<div class="line"><span class="lineno">  175</span>    <span class="comment">// Read 6Bytes (2byte per axis) starting from GYRO_XOUT_H register</span></div>
<div class="line"><span class="lineno">  176</span>    <span class="keywordflow">if</span>(HAL_I2C_Mem_Read ( MPU6050_hi2c, MPU6050_ADDR, MPU6050_GYRO_XOUT_H_REG, 1, Rec_Data, 6, 1000) != HAL_OK){</div>
<div class="line"><span class="lineno">  177</span>        <span class="keywordflow">return</span> MPU6050_Status_Error;</div>
<div class="line"><span class="lineno">  178</span>    }</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>    <span class="comment">// Get time of new Measurement and safe time of last measurement</span></div>
<div class="line"><span class="lineno">  181</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gyro_time  =   DWT-&gt;CYCCNT;</div>
<div class="line"><span class="lineno">  182</span>    DWT-&gt;CYCCNT             =   0;</div>
<div class="line"><span class="lineno">  183</span> </div>
<div class="line"><span class="lineno">  184</span>    <span class="comment">// Data for all axis comes as 6Byte array, in the following it is filled into one 16-bit array for each axis</span></div>
<div class="line"><span class="lineno">  185</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gyro_X = (int16_t)(Rec_Data[0]&lt;&lt;8 | Rec_Data[1])-<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gx_offset;</div>
<div class="line"><span class="lineno">  186</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gyro_Y = (int16_t)(Rec_Data[2]&lt;&lt;8 | Rec_Data[3])-<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gy_offset;</div>
<div class="line"><span class="lineno">  187</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gyro_Z = (int16_t)(Rec_Data[4]&lt;&lt;8 | Rec_Data[5])-<a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gz_offset;</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>    <span class="keywordflow">return</span> MPU6050_Read_OK;</div>
<div class="line"><span class="lineno">  191</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a109418b6b13fd4ddff993014f625994f" name="a109418b6b13fd4ddff993014f625994f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a109418b6b13fd4ddff993014f625994f">&#9670;&nbsp;</a></span>MPU6050_Read_Sensor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="MPU6050__GY521_8h.html#a93fe4b900e9a53cf29a99adc9e64d7c4">MPU6050_STATUS</a> MPU6050_Read_Sensor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads raw data from accl and gyro <br  />
 </p>
<dl class="section return"><dt>Returns</dt><dd>MPU6050_STATUS </dd></dl>

<p class="definition">Definition at line <a class="el" href="MPU6050__GY521_8c_source.html#l00198">198</a> of file <a class="el" href="MPU6050__GY521_8c_source.html">MPU6050_GY521.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  198</span>                                    {</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>    uint8_t Rec_Data[14];</div>
<div class="line"><span class="lineno">  201</span> </div>
<div class="line"><span class="lineno">  202</span>    <span class="comment">// Read 6Bytes (2byte per axis) starting from ACCL_XOUT_H register</span></div>
<div class="line"><span class="lineno">  203</span>    <span class="keywordflow">if</span> (HAL_I2C_Mem_Read (MPU6050_hi2c, MPU6050_ADDR, MPU6050_ACCL_XOUT_H_REG, 1, Rec_Data, 14, 1000) != HAL_OK ){</div>
<div class="line"><span class="lineno">  204</span>        <span class="keywordflow">return</span> MPU6050_Status_Error;</div>
<div class="line"><span class="lineno">  205</span>        printf(<span class="stringliteral">&quot;READ ERROR\r\n&quot;</span>);</div>
<div class="line"><span class="lineno">  206</span>    }</div>
<div class="line"><span class="lineno">  207</span>    <span class="comment">// Get time of new Measurement and safe time of last measurement</span></div>
<div class="line"><span class="lineno">  208</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gyro_time  =   DWT-&gt;CYCCNT;</div>
<div class="line"><span class="lineno">  209</span>    DWT-&gt;CYCCNT             =   0;</div>
<div class="line"><span class="lineno">  210</span>    <span class="comment">// Data for all axis comes as 6Byte array, in the following it is filled into one 16-bit array for each axis</span></div>
<div class="line"><span class="lineno">  211</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_X = (int16_t)(Rec_Data[0]&lt;&lt;8 | Rec_Data[1]) - <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Ax_offset;</div>
<div class="line"><span class="lineno">  212</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_Y = (int16_t)(Rec_Data[2]&lt;&lt;8 | Rec_Data[3]) - <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Ay_offset;</div>
<div class="line"><span class="lineno">  213</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Accl_Z = (int16_t)(Rec_Data[4]&lt;&lt;8 | Rec_Data[5]) - <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Az_offset;</div>
<div class="line"><span class="lineno">  214</span>    <span class="comment">// Data for all axis comes as 6Byte array, in the following it is filled into one 16-bit array for each axis</span></div>
<div class="line"><span class="lineno">  215</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gyro_X = (int16_t)(Rec_Data[8]&lt;&lt;8 | Rec_Data[9]) - <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gx_offset;</div>
<div class="line"><span class="lineno">  216</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gyro_Y = (int16_t)(Rec_Data[10]&lt;&lt;8 | Rec_Data[11]) - <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gy_offset;</div>
<div class="line"><span class="lineno">  217</span>    <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gyro_Z = (int16_t)(Rec_Data[12]&lt;&lt;8 | Rec_Data[13]) - <a class="code hl_variable" href="MPU6050__GY521_8h.html#abdc15688e79d6395670b10cf1b2e1235">Sensor_Data</a>-&gt;Gz_offset;</div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>    <span class="keywordflow">return</span> MPU6050_Read_OK;</div>
<div class="line"><span class="lineno">  220</span>}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_3b7061cfae27535312e070b6c554b6fd.html">Sensor_Code</a></li><li class="navelem"><a class="el" href="dir_512c14c91bc04b8b0bf9a15f73014c98.html">Body-Synthezier_Sensors</a></li><li class="navelem"><a class="el" href="dir_24e77c184121db63b6cb530ab62a7929.html">Core</a></li><li class="navelem"><a class="el" href="dir_cc89e2f54899b0907ffc43b0c8f24b34.html">Src</a></li><li class="navelem"><a class="el" href="MPU6050__GY521_8c.html">MPU6050_GY521.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
