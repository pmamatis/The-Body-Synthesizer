\hypertarget{keyboard_8h}{}\doxysection{/media/paul/\+LINUX\+\_\+\+MEM/\+Uni/\+Git Repos/\+Body-\/\+Synthesizer\+\_\+\+STM32\+\_\+\+F746\+ZG/body-\/synthesizer-\/stm32-\/f746zg/\+Core/\+Inc/keyboard.h File Reference}
\label{keyboard_8h}\index{/media/paul/LINUX\_MEM/Uni/Git Repos/Body-\/Synthesizer\_STM32\_F746ZG/body-\/synthesizer-\/stm32-\/f746zg/Core/Inc/keyboard.h@{/media/paul/LINUX\_MEM/Uni/Git Repos/Body-\/Synthesizer\_STM32\_F746ZG/body-\/synthesizer-\/stm32-\/f746zg/Core/Inc/keyboard.h}}


keyboard adc data processing  


{\ttfamily \#include \char`\"{}main.\+h\char`\"{}}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{keyboard_8h_a1e98c907246db70618a24c58d5f2dbad}{KEYBOARD\+\_\+\+SR}}~500
\item 
\#define \mbox{\hyperlink{keyboard_8h_a0925999ad04646c40c88acad44d112b2}{KEYBOARD\+\_\+\+VOICE\+\_\+\+ID}}~4
\item 
\#define \mbox{\hyperlink{keyboard_8h_a6046b15858f72a37e7822e5d4e0e284c}{VOICES\+\_\+\+ID}}~0
\item 
\#define \mbox{\hyperlink{keyboard_8h_a5b6b06be8158790d4e7dfc884690acb1}{NO\+\_\+\+KEY\+\_\+\+ADC\+\_\+\+VALUE}}~200
\item 
\#define \mbox{\hyperlink{keyboard_8h_aaa8ce6d66acf69ac599527ea3c51a7bb}{NUMBER\+\_\+\+OF\+\_\+\+KEYBOARD\+\_\+\+NOTES}}~13
\item 
\#define \mbox{\hyperlink{keyboard_8h_abcc22bbe2fc19ba537b8b0f24595ffa1}{MAX\+\_\+\+SIMULTANEOUS\+\_\+\+KEYBOARD\+\_\+\+NOTES}}~5
\item 
\#define \mbox{\hyperlink{keyboard_8h_a223f58b0e6ba7585a26967062d8c6e17}{KEYBOARD\+\_\+\+SP}}~\mbox{\hyperlink{signal__synthesis_8h_a74bf0cbaccfba1bf548d482148183a12}{MAX\+\_\+\+SIGNAL\+\_\+\+KOMBINATION}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{keyboard_8h_a49b74c118843f9046a50a49296e3ce37}{keyboard\+\_\+init}} (ADC\+\_\+\+Handle\+Type\+Def $\ast$ADC\+\_\+\+Handler, TIM\+\_\+\+Handle\+Type\+Def $\ast$TIM\+\_\+\+Handler)
\begin{DoxyCompactList}\small\item\em Keyboaed Init funcrion. \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{keyboard_8h_a86de1f5c40ab14dddcc12fbf3eafde08}{keyboard\+\_\+start\+\_\+read}} (void)
\begin{DoxyCompactList}\small\item\em starts the keyboard reading process \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{keyboard_8h_a2482802c0a6906975f7ad3f6143bd456}{keyboard\+\_\+stop\+\_\+read}} (void)
\begin{DoxyCompactList}\small\item\em Stops teh Keyboard readout by stoping the timer-\/interrupt. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{keyboard_8h_a4f8ca4fda6a27fe2ed6ad14c40339324}{One\+Press\+\_\+keyboard\+\_\+process}} (uint32\+\_\+t adc\+\_\+value, struct \mbox{\hyperlink{structsignal__t}{signal\+\_\+t}} $\ast$signals, struct \mbox{\hyperlink{structdisplay__variables}{display\+\_\+variables}} $\ast$Display)
\begin{DoxyCompactList}\small\item\em This function handles the Data processing for the Keyboard ADC, depending on the given value a signal is generated and played untill the keyboard adsr end for this signal. ~\newline
 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const uint16\+\_\+t \mbox{\hyperlink{keyboard_8h_a994e37dd30a67beee328caeb1975e7e2}{keyboard\+\_\+note\+\_\+adcval}} \mbox{[}NUMBER\+\_\+\+OF\+\_\+\+KEYBOARD\+\_\+\+NOTES\mbox{]}
\item 
ADC\+\_\+\+Handle\+Type\+Def $\ast$ \mbox{\hyperlink{keyboard_8h_a871034e248b9e3d89132c320a8a0fc31}{KEYBOARD\+\_\+\+ADC}}
\item 
TIM\+\_\+\+Handle\+Type\+Def $\ast$ \mbox{\hyperlink{keyboard_8h_a7786cb1b74bd2aa2a9b97f1372a3e308}{KEYBOARD\+\_\+\+TIM}}
\item 
uint32\+\_\+t \mbox{\hyperlink{keyboard_8h_a34df4b41f8c51fa60fd85e2864156acd}{keyboard\+\_\+pressed\+\_\+counter}}
\item 
bool \mbox{\hyperlink{keyboard_8h_a7bfc57c85f9d6a1dc4f6c4f2b85ab519}{played\+\_\+keyboard\+\_\+note}} \mbox{[}MAX\+\_\+\+SIMULTANEOUS\+\_\+\+KEYBOARD\+\_\+\+NOTES\mbox{]}
\item 
bool \mbox{\hyperlink{keyboard_8h_aefe54d3f8f407830155ba96ec1ea7c4d}{activate\+\_\+processing}} \mbox{[}MAX\+\_\+\+SIMULTANEOUS\+\_\+\+KEYBOARD\+\_\+\+NOTES\mbox{]}
\item 
uint8\+\_\+t \mbox{\hyperlink{keyboard_8h_a3cb9c3d7be09493634b6d9d88c4a43b7}{active\+\_\+keyboard\+\_\+notes}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
keyboard adc data processing 

\begin{DoxyAuthor}{Author}
paul mamatis \& marc bielen 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
2022-\/01-\/06
\end{DoxyDate}
\begin{DoxyCopyright}{Copyright}
Copyright (c) 2022 
\end{DoxyCopyright}


Definition in file \mbox{\hyperlink{keyboard_8h_source}{keyboard.\+h}}.



\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{keyboard_8h_a223f58b0e6ba7585a26967062d8c6e17}\label{keyboard_8h_a223f58b0e6ba7585a26967062d8c6e17}} 
\index{keyboard.h@{keyboard.h}!KEYBOARD\_SP@{KEYBOARD\_SP}}
\index{KEYBOARD\_SP@{KEYBOARD\_SP}!keyboard.h@{keyboard.h}}
\doxysubsubsection{\texorpdfstring{KEYBOARD\_SP}{KEYBOARD\_SP}}
{\footnotesize\ttfamily \#define KEYBOARD\+\_\+\+SP~\mbox{\hyperlink{signal__synthesis_8h_a74bf0cbaccfba1bf548d482148183a12}{MAX\+\_\+\+SIGNAL\+\_\+\+KOMBINATION}}}

reserved position in the signal struct array. (New\+Signal from last pressed key) 

Definition at line \mbox{\hyperlink{keyboard_8h_source_l00044}{44}} of file \mbox{\hyperlink{keyboard_8h_source}{keyboard.\+h}}.

\mbox{\Hypertarget{keyboard_8h_a1e98c907246db70618a24c58d5f2dbad}\label{keyboard_8h_a1e98c907246db70618a24c58d5f2dbad}} 
\index{keyboard.h@{keyboard.h}!KEYBOARD\_SR@{KEYBOARD\_SR}}
\index{KEYBOARD\_SR@{KEYBOARD\_SR}!keyboard.h@{keyboard.h}}
\doxysubsubsection{\texorpdfstring{KEYBOARD\_SR}{KEYBOARD\_SR}}
{\footnotesize\ttfamily \#define KEYBOARD\+\_\+\+SR~500}



Definition at line \mbox{\hyperlink{keyboard_8h_source_l00019}{19}} of file \mbox{\hyperlink{keyboard_8h_source}{keyboard.\+h}}.

\mbox{\Hypertarget{keyboard_8h_a0925999ad04646c40c88acad44d112b2}\label{keyboard_8h_a0925999ad04646c40c88acad44d112b2}} 
\index{keyboard.h@{keyboard.h}!KEYBOARD\_VOICE\_ID@{KEYBOARD\_VOICE\_ID}}
\index{KEYBOARD\_VOICE\_ID@{KEYBOARD\_VOICE\_ID}!keyboard.h@{keyboard.h}}
\doxysubsubsection{\texorpdfstring{KEYBOARD\_VOICE\_ID}{KEYBOARD\_VOICE\_ID}}
{\footnotesize\ttfamily \#define KEYBOARD\+\_\+\+VOICE\+\_\+\+ID~4}



Definition at line \mbox{\hyperlink{keyboard_8h_source_l00020}{20}} of file \mbox{\hyperlink{keyboard_8h_source}{keyboard.\+h}}.

\mbox{\Hypertarget{keyboard_8h_abcc22bbe2fc19ba537b8b0f24595ffa1}\label{keyboard_8h_abcc22bbe2fc19ba537b8b0f24595ffa1}} 
\index{keyboard.h@{keyboard.h}!MAX\_SIMULTANEOUS\_KEYBOARD\_NOTES@{MAX\_SIMULTANEOUS\_KEYBOARD\_NOTES}}
\index{MAX\_SIMULTANEOUS\_KEYBOARD\_NOTES@{MAX\_SIMULTANEOUS\_KEYBOARD\_NOTES}!keyboard.h@{keyboard.h}}
\doxysubsubsection{\texorpdfstring{MAX\_SIMULTANEOUS\_KEYBOARD\_NOTES}{MAX\_SIMULTANEOUS\_KEYBOARD\_NOTES}}
{\footnotesize\ttfamily \#define MAX\+\_\+\+SIMULTANEOUS\+\_\+\+KEYBOARD\+\_\+\+NOTES~5}



Definition at line \mbox{\hyperlink{keyboard_8h_source_l00039}{39}} of file \mbox{\hyperlink{keyboard_8h_source}{keyboard.\+h}}.

\mbox{\Hypertarget{keyboard_8h_a5b6b06be8158790d4e7dfc884690acb1}\label{keyboard_8h_a5b6b06be8158790d4e7dfc884690acb1}} 
\index{keyboard.h@{keyboard.h}!NO\_KEY\_ADC\_VALUE@{NO\_KEY\_ADC\_VALUE}}
\index{NO\_KEY\_ADC\_VALUE@{NO\_KEY\_ADC\_VALUE}!keyboard.h@{keyboard.h}}
\doxysubsubsection{\texorpdfstring{NO\_KEY\_ADC\_VALUE}{NO\_KEY\_ADC\_VALUE}}
{\footnotesize\ttfamily \#define NO\+\_\+\+KEY\+\_\+\+ADC\+\_\+\+VALUE~200}



Definition at line \mbox{\hyperlink{keyboard_8h_source_l00036}{36}} of file \mbox{\hyperlink{keyboard_8h_source}{keyboard.\+h}}.

\mbox{\Hypertarget{keyboard_8h_aaa8ce6d66acf69ac599527ea3c51a7bb}\label{keyboard_8h_aaa8ce6d66acf69ac599527ea3c51a7bb}} 
\index{keyboard.h@{keyboard.h}!NUMBER\_OF\_KEYBOARD\_NOTES@{NUMBER\_OF\_KEYBOARD\_NOTES}}
\index{NUMBER\_OF\_KEYBOARD\_NOTES@{NUMBER\_OF\_KEYBOARD\_NOTES}!keyboard.h@{keyboard.h}}
\doxysubsubsection{\texorpdfstring{NUMBER\_OF\_KEYBOARD\_NOTES}{NUMBER\_OF\_KEYBOARD\_NOTES}}
{\footnotesize\ttfamily \#define NUMBER\+\_\+\+OF\+\_\+\+KEYBOARD\+\_\+\+NOTES~13}



Definition at line \mbox{\hyperlink{keyboard_8h_source_l00038}{38}} of file \mbox{\hyperlink{keyboard_8h_source}{keyboard.\+h}}.

\mbox{\Hypertarget{keyboard_8h_a6046b15858f72a37e7822e5d4e0e284c}\label{keyboard_8h_a6046b15858f72a37e7822e5d4e0e284c}} 
\index{keyboard.h@{keyboard.h}!VOICES\_ID@{VOICES\_ID}}
\index{VOICES\_ID@{VOICES\_ID}!keyboard.h@{keyboard.h}}
\doxysubsubsection{\texorpdfstring{VOICES\_ID}{VOICES\_ID}}
{\footnotesize\ttfamily \#define VOICES\+\_\+\+ID~0}



Definition at line \mbox{\hyperlink{keyboard_8h_source_l00021}{21}} of file \mbox{\hyperlink{keyboard_8h_source}{keyboard.\+h}}.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{keyboard_8h_a49b74c118843f9046a50a49296e3ce37}\label{keyboard_8h_a49b74c118843f9046a50a49296e3ce37}} 
\index{keyboard.h@{keyboard.h}!keyboard\_init@{keyboard\_init}}
\index{keyboard\_init@{keyboard\_init}!keyboard.h@{keyboard.h}}
\doxysubsubsection{\texorpdfstring{keyboard\_init()}{keyboard\_init()}}
{\footnotesize\ttfamily void keyboard\+\_\+init (\begin{DoxyParamCaption}\item[{ADC\+\_\+\+Handle\+Type\+Def $\ast$}]{ADC\+\_\+\+Handler,  }\item[{TIM\+\_\+\+Handle\+Type\+Def $\ast$}]{TIM\+\_\+\+Handler }\end{DoxyParamCaption})}



Keyboaed Init funcrion. 


\begin{DoxyParams}{Parameters}
{\em ADC\+\_\+\+Handler} & \\
\hline
{\em TIM\+\_\+\+Handler} & \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{keyboard_8c_source_l00020}{20}} of file \mbox{\hyperlink{keyboard_8c_source}{keyboard.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00020                                                                                   \{}
\DoxyCodeLine{00021     KEYBOARD\_ADC = ADC\_Handler;}
\DoxyCodeLine{00022     \mbox{\hyperlink{keyboard_8h_a7786cb1b74bd2aa2a9b97f1372a3e308}{KEYBOARD\_TIM}} = TIM\_Handler;}
\DoxyCodeLine{00023     \mbox{\hyperlink{signal__synthesis_8h_adc7b4110b68d58532096fe9f817df89c}{SetTimerSettings}}(TIM\_Handler, KEYBOARD\_SR);}
\DoxyCodeLine{00024     keyboard\_pressed\_counter = 0;}
\DoxyCodeLine{00025     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < MAX\_SIMULTANEOUS\_KEYBOARD\_NOTES; i++) \{}
\DoxyCodeLine{00026         played\_keyboard\_note[i] = \textcolor{keyword}{false};}
\DoxyCodeLine{00027         activate\_processing[i] = \textcolor{keyword}{false};}
\DoxyCodeLine{00028     \}}
\DoxyCodeLine{00029     active\_keyboard\_notes = 0;}
\DoxyCodeLine{00030 \}}

\end{DoxyCode}
\mbox{\Hypertarget{keyboard_8h_a86de1f5c40ab14dddcc12fbf3eafde08}\label{keyboard_8h_a86de1f5c40ab14dddcc12fbf3eafde08}} 
\index{keyboard.h@{keyboard.h}!keyboard\_start\_read@{keyboard\_start\_read}}
\index{keyboard\_start\_read@{keyboard\_start\_read}!keyboard.h@{keyboard.h}}
\doxysubsubsection{\texorpdfstring{keyboard\_start\_read()}{keyboard\_start\_read()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def keyboard\+\_\+start\+\_\+read (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



starts the keyboard reading process 

\begin{DoxyNote}{Note}
the ADC is controlled by the Timer keyboard\+\_\+\+TIM, so the ADC-\/\+Read Command is inside the Timer Interrupt 
\end{DoxyNote}


Definition at line \mbox{\hyperlink{keyboard_8c_source_l00036}{36}} of file \mbox{\hyperlink{keyboard_8c_source}{keyboard.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00036                                             \{}
\DoxyCodeLine{00037 }
\DoxyCodeLine{00038     HAL\_StatusTypeDef retval;}
\DoxyCodeLine{00039     printf(\textcolor{stringliteral}{"{}start keyboard read....\(\backslash\)r\(\backslash\)n"{}});}
\DoxyCodeLine{00040     retval = HAL\_TIM\_Base\_Start\_IT(\mbox{\hyperlink{keyboard_8h_a7786cb1b74bd2aa2a9b97f1372a3e308}{KEYBOARD\_TIM}});}
\DoxyCodeLine{00041     HAL\_ADC\_Start\_DMA(KEYBOARD\_ADC, \&Display.ADC1input, 1);}
\DoxyCodeLine{00042     \textcolor{keywordflow}{return} retval;}
\DoxyCodeLine{00043 \}}

\end{DoxyCode}
\mbox{\Hypertarget{keyboard_8h_a2482802c0a6906975f7ad3f6143bd456}\label{keyboard_8h_a2482802c0a6906975f7ad3f6143bd456}} 
\index{keyboard.h@{keyboard.h}!keyboard\_stop\_read@{keyboard\_stop\_read}}
\index{keyboard\_stop\_read@{keyboard\_stop\_read}!keyboard.h@{keyboard.h}}
\doxysubsubsection{\texorpdfstring{keyboard\_stop\_read()}{keyboard\_stop\_read()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def keyboard\+\_\+stop\+\_\+read (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Stops teh Keyboard readout by stoping the timer-\/interrupt. 

\begin{DoxyReturn}{Returns}
HAL\+\_\+\+Status\+Type\+Def 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{keyboard_8c_source_l00050}{50}} of file \mbox{\hyperlink{keyboard_8c_source}{keyboard.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00050                                        \{}
\DoxyCodeLine{00051     printf(\textcolor{stringliteral}{"{}end keyboard read....\(\backslash\)r\(\backslash\)n"{}});}
\DoxyCodeLine{00052     \textcolor{keywordflow}{return} HAL\_TIM\_Base\_Stop\_IT(\mbox{\hyperlink{keyboard_8h_a7786cb1b74bd2aa2a9b97f1372a3e308}{KEYBOARD\_TIM}});}
\DoxyCodeLine{00053 \}}

\end{DoxyCode}
\mbox{\Hypertarget{keyboard_8h_a4f8ca4fda6a27fe2ed6ad14c40339324}\label{keyboard_8h_a4f8ca4fda6a27fe2ed6ad14c40339324}} 
\index{keyboard.h@{keyboard.h}!OnePress\_keyboard\_process@{OnePress\_keyboard\_process}}
\index{OnePress\_keyboard\_process@{OnePress\_keyboard\_process}!keyboard.h@{keyboard.h}}
\doxysubsubsection{\texorpdfstring{OnePress\_keyboard\_process()}{OnePress\_keyboard\_process()}}
{\footnotesize\ttfamily void One\+Press\+\_\+keyboard\+\_\+process (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{adc\+\_\+value,  }\item[{struct \mbox{\hyperlink{structsignal__t}{signal\+\_\+t}} $\ast$}]{signals,  }\item[{struct \mbox{\hyperlink{structdisplay__variables}{display\+\_\+variables}} $\ast$}]{Display }\end{DoxyParamCaption})}



This function handles the Data processing for the Keyboard ADC, depending on the given value a signal is generated and played untill the keyboard adsr end for this signal. ~\newline
 


\begin{DoxyParams}{Parameters}
{\em adc\+\_\+value} & raw data from the keyboard adc \\
\hline
{\em signals} & \\
\hline
{\em Display} & \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{keyboard_8c_source_l00061}{61}} of file \mbox{\hyperlink{keyboard_8c_source}{keyboard.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00061                                                                                                                 \{}
\DoxyCodeLine{00062 }
\DoxyCodeLine{00063     \textcolor{comment}{// Generate Signal}}
\DoxyCodeLine{00064     \textcolor{keywordflow}{for}(uint8\_t i=0; i<(NUMBER\_OF\_KEYBOARD\_NOTES-\/1); i++) \{}
\DoxyCodeLine{00065 }
\DoxyCodeLine{00066         \textcolor{keywordflow}{if}(adc\_value > keyboard\_note\_adcval[i] \&\& adc\_value < keyboard\_note\_adcval[i+1]) \{}
\DoxyCodeLine{00067 }
\DoxyCodeLine{00068             \textcolor{keywordflow}{if}(!played\_keyboard\_note[0] \&\& activate\_processing[0])\{}
\DoxyCodeLine{00069                 \mbox{\hyperlink{signal__synthesis_8h_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(signals, RECT, \mbox{\hyperlink{music__notes_8h_aa6edf4563731abf1927b342c5ebe3e8a}{keys}}[i], Display-\/>Keyboard\_Octave, KEYBOARD\_VOICE\_ID);}
\DoxyCodeLine{00070                 played\_keyboard\_note[0] = \textcolor{keyword}{true};}
\DoxyCodeLine{00071                 active\_keyboard\_notes++;}
\DoxyCodeLine{00072             \}}
\DoxyCodeLine{00073             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!played\_keyboard\_note[1] \&\& activate\_processing[1])\{}
\DoxyCodeLine{00074                 \mbox{\hyperlink{signal__synthesis_8h_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(signals, RECT, \mbox{\hyperlink{music__notes_8h_aa6edf4563731abf1927b342c5ebe3e8a}{keys}}[i], Display-\/>Keyboard\_Octave, KEYBOARD\_VOICE\_ID+1);}
\DoxyCodeLine{00075                 played\_keyboard\_note[1] = \textcolor{keyword}{true};}
\DoxyCodeLine{00076                 active\_keyboard\_notes++;}
\DoxyCodeLine{00077             \}}
\DoxyCodeLine{00078             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!played\_keyboard\_note[2] \&\& activate\_processing[2])\{}
\DoxyCodeLine{00079                 \mbox{\hyperlink{signal__synthesis_8h_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(signals, RECT, \mbox{\hyperlink{music__notes_8h_aa6edf4563731abf1927b342c5ebe3e8a}{keys}}[i], Display-\/>Keyboard\_Octave, KEYBOARD\_VOICE\_ID+2);}
\DoxyCodeLine{00080                 played\_keyboard\_note[2] = \textcolor{keyword}{true};}
\DoxyCodeLine{00081                 active\_keyboard\_notes++;}
\DoxyCodeLine{00082             \}}
\DoxyCodeLine{00083             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!played\_keyboard\_note[3] \&\& activate\_processing[3])\{}
\DoxyCodeLine{00084                 \mbox{\hyperlink{signal__synthesis_8h_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(signals, RECT, \mbox{\hyperlink{music__notes_8h_aa6edf4563731abf1927b342c5ebe3e8a}{keys}}[i], Display-\/>Keyboard\_Octave, KEYBOARD\_VOICE\_ID+3);}
\DoxyCodeLine{00085                 played\_keyboard\_note[3] = \textcolor{keyword}{true};}
\DoxyCodeLine{00086                 active\_keyboard\_notes++;}
\DoxyCodeLine{00087             \}}
\DoxyCodeLine{00088             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!played\_keyboard\_note[4] \&\& activate\_processing[4])\{}
\DoxyCodeLine{00089                 \mbox{\hyperlink{signal__synthesis_8h_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(signals, RECT, \mbox{\hyperlink{music__notes_8h_aa6edf4563731abf1927b342c5ebe3e8a}{keys}}[i], Display-\/>Keyboard\_Octave, KEYBOARD\_VOICE\_ID+4);}
\DoxyCodeLine{00090                 played\_keyboard\_note[4] = \textcolor{keyword}{true};}
\DoxyCodeLine{00091                 active\_keyboard\_notes++;}
\DoxyCodeLine{00092             \}}
\DoxyCodeLine{00093         \}}
\DoxyCodeLine{00094     \}}
\DoxyCodeLine{00095 }
\DoxyCodeLine{00096     \textcolor{comment}{// Delete signal}}
\DoxyCodeLine{00097     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < MAX\_SIMULTANEOUS\_KEYBOARD\_NOTES; i++)\{}
\DoxyCodeLine{00098 }
\DoxyCodeLine{00099         \textcolor{keywordflow}{if} (adsr\_keyboard[i].adsr\_done)\{}
\DoxyCodeLine{00100             \textcolor{keywordtype}{int} index = \mbox{\hyperlink{signal__synthesis_8h_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(KEYBOARD\_VOICE\_ID+i);}
\DoxyCodeLine{00101 }
\DoxyCodeLine{00102             \mbox{\hyperlink{signal__synthesis_8h_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(signals,index);}
\DoxyCodeLine{00103             adsr\_keyboard[i].adsr\_done = \textcolor{keyword}{false};}
\DoxyCodeLine{00104 }
\DoxyCodeLine{00105             played\_keyboard\_note[i] = \textcolor{keyword}{false};}
\DoxyCodeLine{00106 }
\DoxyCodeLine{00107             activate\_processing[i] = \textcolor{keyword}{false};}
\DoxyCodeLine{00108 }
\DoxyCodeLine{00109             active\_keyboard\_notes-\/-\/;}
\DoxyCodeLine{00110         \}}
\DoxyCodeLine{00111     \}}
\DoxyCodeLine{00112 \}}

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{keyboard_8h_aefe54d3f8f407830155ba96ec1ea7c4d}\label{keyboard_8h_aefe54d3f8f407830155ba96ec1ea7c4d}} 
\index{keyboard.h@{keyboard.h}!activate\_processing@{activate\_processing}}
\index{activate\_processing@{activate\_processing}!keyboard.h@{keyboard.h}}
\doxysubsubsection{\texorpdfstring{activate\_processing}{activate\_processing}}
{\footnotesize\ttfamily bool activate\+\_\+processing\mbox{[}MAX\+\_\+\+SIMULTANEOUS\+\_\+\+KEYBOARD\+\_\+\+NOTES\mbox{]}}



Definition at line \mbox{\hyperlink{keyboard_8h_source_l00062}{62}} of file \mbox{\hyperlink{keyboard_8h_source}{keyboard.\+h}}.

\mbox{\Hypertarget{keyboard_8h_a3cb9c3d7be09493634b6d9d88c4a43b7}\label{keyboard_8h_a3cb9c3d7be09493634b6d9d88c4a43b7}} 
\index{keyboard.h@{keyboard.h}!active\_keyboard\_notes@{active\_keyboard\_notes}}
\index{active\_keyboard\_notes@{active\_keyboard\_notes}!keyboard.h@{keyboard.h}}
\doxysubsubsection{\texorpdfstring{active\_keyboard\_notes}{active\_keyboard\_notes}}
{\footnotesize\ttfamily uint8\+\_\+t active\+\_\+keyboard\+\_\+notes}



Definition at line \mbox{\hyperlink{keyboard_8h_source_l00064}{64}} of file \mbox{\hyperlink{keyboard_8h_source}{keyboard.\+h}}.

\mbox{\Hypertarget{keyboard_8h_a871034e248b9e3d89132c320a8a0fc31}\label{keyboard_8h_a871034e248b9e3d89132c320a8a0fc31}} 
\index{keyboard.h@{keyboard.h}!KEYBOARD\_ADC@{KEYBOARD\_ADC}}
\index{KEYBOARD\_ADC@{KEYBOARD\_ADC}!keyboard.h@{keyboard.h}}
\doxysubsubsection{\texorpdfstring{KEYBOARD\_ADC}{KEYBOARD\_ADC}}
{\footnotesize\ttfamily ADC\+\_\+\+Handle\+Type\+Def$\ast$ KEYBOARD\+\_\+\+ADC}



Definition at line \mbox{\hyperlink{keyboard_8h_source_l00054}{54}} of file \mbox{\hyperlink{keyboard_8h_source}{keyboard.\+h}}.

\mbox{\Hypertarget{keyboard_8h_a994e37dd30a67beee328caeb1975e7e2}\label{keyboard_8h_a994e37dd30a67beee328caeb1975e7e2}} 
\index{keyboard.h@{keyboard.h}!keyboard\_note\_adcval@{keyboard\_note\_adcval}}
\index{keyboard\_note\_adcval@{keyboard\_note\_adcval}!keyboard.h@{keyboard.h}}
\doxysubsubsection{\texorpdfstring{keyboard\_note\_adcval}{keyboard\_note\_adcval}}
{\footnotesize\ttfamily const uint16\+\_\+t keyboard\+\_\+note\+\_\+adcval\mbox{[}NUMBER\+\_\+\+OF\+\_\+\+KEYBOARD\+\_\+\+NOTES\mbox{]}}



Definition at line \mbox{\hyperlink{keyboard_8h_source_l00052}{52}} of file \mbox{\hyperlink{keyboard_8h_source}{keyboard.\+h}}.

\mbox{\Hypertarget{keyboard_8h_a34df4b41f8c51fa60fd85e2864156acd}\label{keyboard_8h_a34df4b41f8c51fa60fd85e2864156acd}} 
\index{keyboard.h@{keyboard.h}!keyboard\_pressed\_counter@{keyboard\_pressed\_counter}}
\index{keyboard\_pressed\_counter@{keyboard\_pressed\_counter}!keyboard.h@{keyboard.h}}
\doxysubsubsection{\texorpdfstring{keyboard\_pressed\_counter}{keyboard\_pressed\_counter}}
{\footnotesize\ttfamily uint32\+\_\+t keyboard\+\_\+pressed\+\_\+counter}



Definition at line \mbox{\hyperlink{keyboard_8h_source_l00059}{59}} of file \mbox{\hyperlink{keyboard_8h_source}{keyboard.\+h}}.

\mbox{\Hypertarget{keyboard_8h_a7786cb1b74bd2aa2a9b97f1372a3e308}\label{keyboard_8h_a7786cb1b74bd2aa2a9b97f1372a3e308}} 
\index{keyboard.h@{keyboard.h}!KEYBOARD\_TIM@{KEYBOARD\_TIM}}
\index{KEYBOARD\_TIM@{KEYBOARD\_TIM}!keyboard.h@{keyboard.h}}
\doxysubsubsection{\texorpdfstring{KEYBOARD\_TIM}{KEYBOARD\_TIM}}
{\footnotesize\ttfamily TIM\+\_\+\+Handle\+Type\+Def$\ast$ KEYBOARD\+\_\+\+TIM}

Timer which triggers the keyboard ADC 

Definition at line \mbox{\hyperlink{keyboard_8h_source_l00057}{57}} of file \mbox{\hyperlink{keyboard_8h_source}{keyboard.\+h}}.

\mbox{\Hypertarget{keyboard_8h_a7bfc57c85f9d6a1dc4f6c4f2b85ab519}\label{keyboard_8h_a7bfc57c85f9d6a1dc4f6c4f2b85ab519}} 
\index{keyboard.h@{keyboard.h}!played\_keyboard\_note@{played\_keyboard\_note}}
\index{played\_keyboard\_note@{played\_keyboard\_note}!keyboard.h@{keyboard.h}}
\doxysubsubsection{\texorpdfstring{played\_keyboard\_note}{played\_keyboard\_note}}
{\footnotesize\ttfamily bool played\+\_\+keyboard\+\_\+note\mbox{[}MAX\+\_\+\+SIMULTANEOUS\+\_\+\+KEYBOARD\+\_\+\+NOTES\mbox{]}}



Definition at line \mbox{\hyperlink{keyboard_8h_source_l00061}{61}} of file \mbox{\hyperlink{keyboard_8h_source}{keyboard.\+h}}.

