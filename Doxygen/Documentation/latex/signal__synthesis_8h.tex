\hypertarget{signal__synthesis_8h}{}\doxysection{/media/paul/\+LINUX\+\_\+\+MEM/\+Uni/\+Git Repos/\+Body-\/\+Synthesizer\+\_\+\+STM32\+\_\+\+F746\+ZG/body-\/synthesizer-\/stm32-\/f746zg/\+Core/\+Inc/signal\+\_\+synthesis.h File Reference}
\label{signal__synthesis_8h}\index{/media/paul/LINUX\_MEM/Uni/Git Repos/Body-\/Synthesizer\_STM32\_F746ZG/body-\/synthesizer-\/stm32-\/f746zg/Core/Inc/signal\_synthesis.h@{/media/paul/LINUX\_MEM/Uni/Git Repos/Body-\/Synthesizer\_STM32\_F746ZG/body-\/synthesizer-\/stm32-\/f746zg/Core/Inc/signal\_synthesis.h}}


sound synthesis, (Signals + Effects) -\/\texorpdfstring{$>$}{>} DAC  


{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include \char`\"{}main.\+h\char`\"{}}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$stdarg.\+h$>$}\newline
{\ttfamily \#include \char`\"{}display.\+h\char`\"{}}\newline
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structsignal__t}{signal\+\_\+t}}
\begin{DoxyCompactList}\small\item\em struct to store signals \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structeffects__lfo__t}{effects\+\_\+lfo\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{signal__synthesis_8h_ae2d3a48fb01bbc0fe795724379434d05}{AMPLITUDE}}~1000
\begin{DoxyCompactList}\small\item\em maximal amplitude of output voltage in millivolts \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{signal__synthesis_8h_a80825df7d911faa99554cbe165590474}{DAC\+\_\+\+MAX}}~4095
\begin{DoxyCompactList}\small\item\em digital DAC value for maximal output voltage (3,3V) \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{signal__synthesis_8h_a21005f9f4e2ce7597c5eb4351816d7e2}{OFFSET}}~2047
\begin{DoxyCompactList}\small\item\em digital value for 1.\+65 V \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{signal__synthesis_8h_a9403bb31e6a5748c0bfc57f7523ef483}{DAC\+\_\+\+MAXVALUE\+\_\+\+TO\+\_\+\+AMPLITUDE\+\_\+\+RATIO}}~1.\+24121212121212
\begin{DoxyCompactList}\small\item\em 4096/3300 \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{signal__synthesis_8h_a74bf0cbaccfba1bf548d482148183a12}{MAX\+\_\+\+SIGNAL\+\_\+\+KOMBINATION}}~30
\begin{DoxyCompactList}\small\item\em Maximum of SIgnals which can be played at the same time. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{signal__synthesis_8h_a30e7759725b5108d333a72ccd70aece3}{signal\+\_\+kind\+\_\+enum}} \{ {\bfseries SIN} = 1
, {\bfseries RECT}
, {\bfseries TRIANGLE}
, {\bfseries NOISE}
 \}
\begin{DoxyCompactList}\small\item\em Signal kinds. \end{DoxyCompactList}\item 
enum {\bfseries lfo\+\_\+effect} \{ {\bfseries TREMOLO\+\_\+\+LFO} = 0
, {\bfseries WAHWAH\+\_\+\+LFO}
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{signal__synthesis_8h_a9eda288feb5c689a0f90742249fe6da0}{Signal\+\_\+\+Synthesis\+\_\+\+Init}} (TIM\+\_\+\+Handle\+Type\+Def htim, DAC\+\_\+\+Handle\+Type\+Def \mbox{\hyperlink{music__notes_8c_a40a0d1383beda58531dfda6218720e45}{hdac}})
\begin{DoxyCompactList}\small\item\em Init funtion for the signal\+\_\+synthesis, must be used in order to use any other funtion of this .c. \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{signal__synthesis_8h_af4829c3aeeaf3dbcda0b5266e2834898}{Voices\+\_\+\+Reset}} (void)
\begin{DoxyCompactList}\small\item\em resets the voice parameter which can be changed in the GUI \end{DoxyCompactList}\item 
void \mbox{\hyperlink{signal__synthesis_8h_adc7b4110b68d58532096fe9f817df89c}{Set\+Timer\+Settings}} (TIM\+\_\+\+Handle\+Type\+Def $\ast$htim, uint32\+\_\+t SR)
\begin{DoxyCompactList}\small\item\em Init funtion for the Timer which triggers the DAC, this function sets the timerperiode and presacaler. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{signal__synthesis_8h_a14e563872b7cc3bae6f534d36f016911}{Signal\+\_\+\+Synthesis}} (struct \mbox{\hyperlink{structsignal__t}{signal\+\_\+t}} $\ast$signals, uint8\+\_\+t output\+\_\+\+Channel)
\begin{DoxyCompactList}\small\item\em generates a digital signal in the calculate\+\_\+vector, depending on the signals inside the struct signals1. To add signals use New\+Signal and to delete signals use Delete\+Signal \end{DoxyCompactList}\item 
void \mbox{\hyperlink{signal__synthesis_8h_aff4b96bd9a6fb74a10215a54f141d06d}{Delete\+Signal}} (struct \mbox{\hyperlink{structsignal__t}{signal\+\_\+t}} $\ast$signals, int16\+\_\+t signal\+\_\+index)
\begin{DoxyCompactList}\small\item\em deletes a signal inside the signals1 struct, and shifts all other signals behind the deleted signal to the left. The shift is for having no empty spaces inside the signals1 struct \end{DoxyCompactList}\item 
void \mbox{\hyperlink{signal__synthesis_8h_a15e519685bb7a5374c0ea7e3b9980952}{New\+Signal}} (struct \mbox{\hyperlink{structsignal__t}{signal\+\_\+t}} $\ast$signals, uint8\+\_\+t kind, uint8\+\_\+t \mbox{\hyperlink{music__notes_8c_acad36f7a1211e9e9da68e181667d9c3f}{key}}, uint8\+\_\+t octave, uint8\+\_\+t ID)
\begin{DoxyCompactList}\small\item\em generates a signal which is processed in the \mbox{\hyperlink{signal__synthesis_8c_a14e563872b7cc3bae6f534d36f016911}{Signal\+\_\+\+Synthesis()}} \end{DoxyCompactList}\item 
void \mbox{\hyperlink{signal__synthesis_8h_a381bb27bca64ed7f5df822a3db09707a}{LFO\+\_\+\+Single\+Value\+Process}} (struct \mbox{\hyperlink{structeffects__lfo__t}{effects\+\_\+lfo\+\_\+t}} $\ast$lfo, uint8\+\_\+t lfo\+\_\+effect)
\begin{DoxyCompactList}\small\item\em Constructor for a signal, adds a signal into the signals1 struct. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{signal__synthesis_8h_a2b8c4b7d554c97fbb68f2226c8202acd}{Calc\+Rect\+Sample}} (struct \mbox{\hyperlink{structsignal__t}{signal\+\_\+t}} $\ast$signals, int index)
\begin{DoxyCompactList}\small\item\em Rectangle wave based on struct signals. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{signal__synthesis_8h_abeac1ddb99c3d1374df2dc163a756072}{Calc\+Triangle\+Sample}} (struct \mbox{\hyperlink{structsignal__t}{signal\+\_\+t}} $\ast$signals, int index)
\begin{DoxyCompactList}\small\item\em Triangle wave samples based on struct signals. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{signal__synthesis_8h_a2f9745c8cd2b522e949b4c58cfccce56}{Noise\+\_\+\+Generator}} (void)
\begin{DoxyCompactList}\small\item\em random number generator \end{DoxyCompactList}\item 
int16\+\_\+t \mbox{\hyperlink{signal__synthesis_8h_a100668ad3cefb7abc0f65f866ea508ba}{IDto\+Index}} (int16\+\_\+t id)
\begin{DoxyCompactList}\small\item\em converts an signal ID into its Index \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{signal__synthesis_8h_a994b819c46cb3569b8854f25a13b54fc}{init\+Ramp}} (void)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structsignal__t}{signal\+\_\+t}} \mbox{\hyperlink{signal__synthesis_8h_a5b95c7f01daea158ffcc681572618373}{signals1}}
\item 
struct \mbox{\hyperlink{structeffects__lfo__t}{effects\+\_\+lfo\+\_\+t}} \mbox{\hyperlink{signal__synthesis_8h_a97dbcee80a3c35c2977ad6b4678d3537}{lfo\+\_\+tremolo}}
\item 
struct \mbox{\hyperlink{structeffects__lfo__t}{effects\+\_\+lfo\+\_\+t}} \mbox{\hyperlink{signal__synthesis_8h_a2a60cfa8d2bbdf6a0ac6e035afe008cb}{lfo\+\_\+wahwah}}
\item 
float \mbox{\hyperlink{signal__synthesis_8h_a0c06ec02b1329cdb21df9311f9bc3712}{volume}} \mbox{[}4\mbox{]}
\item 
float \mbox{\hyperlink{signal__synthesis_8h_aa15347ac4d705e4e9db618dfa95640e7}{Master\+\_\+\+Volume}}
\item 
float \mbox{\hyperlink{signal__synthesis_8h_a5c1306f9014e8c807f270a79a96bc1e4}{calculate\+\_\+keyboard}} \mbox{[}5\mbox{]}
\item 
uint8\+\_\+t \mbox{\hyperlink{signal__synthesis_8h_a5b4caaf313594423ca462cb11a33eca9}{output\+Buffer\+\_\+position}}
\begin{DoxyCompactList}\small\item\em Position of the DMA Output Buffer, can be HALF\+\_\+\+BLOCK or FULL\+\_\+\+BLOCK. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
sound synthesis, (Signals + Effects) -\/\texorpdfstring{$>$}{>} DAC 

\begin{DoxyAuthor}{Author}
max lehmer \& marc bielen \& paul mamatis 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
2022-\/01-\/06
\end{DoxyDate}
\begin{DoxyCopyright}{Copyright}
Copyright (c) 2022 
\end{DoxyCopyright}


Definition in file \mbox{\hyperlink{signal__synthesis_8h_source}{signal\+\_\+synthesis.\+h}}.



\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{signal__synthesis_8h_ae2d3a48fb01bbc0fe795724379434d05}\label{signal__synthesis_8h_ae2d3a48fb01bbc0fe795724379434d05}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!AMPLITUDE@{AMPLITUDE}}
\index{AMPLITUDE@{AMPLITUDE}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{AMPLITUDE}{AMPLITUDE}}
{\footnotesize\ttfamily \#define AMPLITUDE~1000}



maximal amplitude of output voltage in millivolts 



Definition at line \mbox{\hyperlink{signal__synthesis_8h_source_l00026}{26}} of file \mbox{\hyperlink{signal__synthesis_8h_source}{signal\+\_\+synthesis.\+h}}.

\mbox{\Hypertarget{signal__synthesis_8h_a80825df7d911faa99554cbe165590474}\label{signal__synthesis_8h_a80825df7d911faa99554cbe165590474}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!DAC\_MAX@{DAC\_MAX}}
\index{DAC\_MAX@{DAC\_MAX}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{DAC\_MAX}{DAC\_MAX}}
{\footnotesize\ttfamily \#define DAC\+\_\+\+MAX~4095}



digital DAC value for maximal output voltage (3,3V) 



Definition at line \mbox{\hyperlink{signal__synthesis_8h_source_l00028}{28}} of file \mbox{\hyperlink{signal__synthesis_8h_source}{signal\+\_\+synthesis.\+h}}.

\mbox{\Hypertarget{signal__synthesis_8h_a9403bb31e6a5748c0bfc57f7523ef483}\label{signal__synthesis_8h_a9403bb31e6a5748c0bfc57f7523ef483}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!DAC\_MAXVALUE\_TO\_AMPLITUDE\_RATIO@{DAC\_MAXVALUE\_TO\_AMPLITUDE\_RATIO}}
\index{DAC\_MAXVALUE\_TO\_AMPLITUDE\_RATIO@{DAC\_MAXVALUE\_TO\_AMPLITUDE\_RATIO}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{DAC\_MAXVALUE\_TO\_AMPLITUDE\_RATIO}{DAC\_MAXVALUE\_TO\_AMPLITUDE\_RATIO}}
{\footnotesize\ttfamily \#define DAC\+\_\+\+MAXVALUE\+\_\+\+TO\+\_\+\+AMPLITUDE\+\_\+\+RATIO~1.\+24121212121212}



4096/3300 



Definition at line \mbox{\hyperlink{signal__synthesis_8h_source_l00032}{32}} of file \mbox{\hyperlink{signal__synthesis_8h_source}{signal\+\_\+synthesis.\+h}}.

\mbox{\Hypertarget{signal__synthesis_8h_a74bf0cbaccfba1bf548d482148183a12}\label{signal__synthesis_8h_a74bf0cbaccfba1bf548d482148183a12}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!MAX\_SIGNAL\_KOMBINATION@{MAX\_SIGNAL\_KOMBINATION}}
\index{MAX\_SIGNAL\_KOMBINATION@{MAX\_SIGNAL\_KOMBINATION}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{MAX\_SIGNAL\_KOMBINATION}{MAX\_SIGNAL\_KOMBINATION}}
{\footnotesize\ttfamily \#define MAX\+\_\+\+SIGNAL\+\_\+\+KOMBINATION~30}



Maximum of SIgnals which can be played at the same time. 



Definition at line \mbox{\hyperlink{signal__synthesis_8h_source_l00035}{35}} of file \mbox{\hyperlink{signal__synthesis_8h_source}{signal\+\_\+synthesis.\+h}}.

\mbox{\Hypertarget{signal__synthesis_8h_a21005f9f4e2ce7597c5eb4351816d7e2}\label{signal__synthesis_8h_a21005f9f4e2ce7597c5eb4351816d7e2}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!OFFSET@{OFFSET}}
\index{OFFSET@{OFFSET}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{OFFSET}{OFFSET}}
{\footnotesize\ttfamily \#define OFFSET~2047}



digital value for 1.\+65 V 



Definition at line \mbox{\hyperlink{signal__synthesis_8h_source_l00030}{30}} of file \mbox{\hyperlink{signal__synthesis_8h_source}{signal\+\_\+synthesis.\+h}}.



\doxysubsection{Enumeration Type Documentation}
\mbox{\Hypertarget{signal__synthesis_8h_a41b813defc3a047ea3fff8befbc3f002}\label{signal__synthesis_8h_a41b813defc3a047ea3fff8befbc3f002}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!lfo\_effect@{lfo\_effect}}
\index{lfo\_effect@{lfo\_effect}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{lfo\_effect}{lfo\_effect}}
{\footnotesize\ttfamily enum lfo\+\_\+effect}



Definition at line \mbox{\hyperlink{signal__synthesis_8h_source_l00088}{88}} of file \mbox{\hyperlink{signal__synthesis_8h_source}{signal\+\_\+synthesis.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00088                \{}
\DoxyCodeLine{00089     TREMOLO\_LFO = 0,}
\DoxyCodeLine{00090     WAHWAH\_LFO}
\DoxyCodeLine{00091 \};}

\end{DoxyCode}
\mbox{\Hypertarget{signal__synthesis_8h_a30e7759725b5108d333a72ccd70aece3}\label{signal__synthesis_8h_a30e7759725b5108d333a72ccd70aece3}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!signal\_kind\_enum@{signal\_kind\_enum}}
\index{signal\_kind\_enum@{signal\_kind\_enum}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{signal\_kind\_enum}{signal\_kind\_enum}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{signal__synthesis_8h_a30e7759725b5108d333a72ccd70aece3}{signal\+\_\+kind\+\_\+enum}}}



Signal kinds. 



Definition at line \mbox{\hyperlink{signal__synthesis_8h_source_l00081}{81}} of file \mbox{\hyperlink{signal__synthesis_8h_source}{signal\+\_\+synthesis.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00081                      \{}
\DoxyCodeLine{00082     SIN = 1,}
\DoxyCodeLine{00083     RECT,}
\DoxyCodeLine{00084     TRIANGLE,}
\DoxyCodeLine{00085     NOISE}
\DoxyCodeLine{00086 \};}

\end{DoxyCode}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{signal__synthesis_8h_a2b8c4b7d554c97fbb68f2226c8202acd}\label{signal__synthesis_8h_a2b8c4b7d554c97fbb68f2226c8202acd}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!CalcRectSample@{CalcRectSample}}
\index{CalcRectSample@{CalcRectSample}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{CalcRectSample()}{CalcRectSample()}}
{\footnotesize\ttfamily float Calc\+Rect\+Sample (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structsignal__t}{signal\+\_\+t}} $\ast$}]{signals,  }\item[{int}]{index }\end{DoxyParamCaption})}



Rectangle wave based on struct signals. 


\begin{DoxyParams}{Parameters}
{\em signals} & \\
\hline
{\em index} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
float 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{signal__synthesis_8c_source_l01261}{1261}} of file \mbox{\hyperlink{signal__synthesis_8c_source}{signal\+\_\+synthesis.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01261                                                          \{}
\DoxyCodeLine{01262 }
\DoxyCodeLine{01263     \textcolor{keywordtype}{float} rect = 0;}
\DoxyCodeLine{01264 }
\DoxyCodeLine{01265     \textcolor{comment}{// Current Index:   signals-\/>current\_LUT\_Index[index]}}
\DoxyCodeLine{01266     \textcolor{comment}{// Period:          LUT\_SUPPORTPOINTS[signals-\/>freqIndex[index]]}}
\DoxyCodeLine{01267 }
\DoxyCodeLine{01268     \textcolor{comment}{// IF: Length of period is even (e.g. 346)}}
\DoxyCodeLine{01269     \textcolor{keywordflow}{if}(LUT\_SUPPORTPOINTS[signals-\/>freqIndex[index]] \% 2 == 0)\{}
\DoxyCodeLine{01270 }
\DoxyCodeLine{01271         \textcolor{comment}{// IF: Current index < length of period of desired frequency (0:172 < 173)}}
\DoxyCodeLine{01272         \textcolor{keywordflow}{if}(signals-\/>current\_LUT\_Index[index] < (LUT\_SUPPORTPOINTS[signals-\/>freqIndex[index]] / 2))\{}
\DoxyCodeLine{01273 }
\DoxyCodeLine{01274             rect = 0.2;}
\DoxyCodeLine{01275         \}}
\DoxyCodeLine{01276         \textcolor{comment}{// IF: Current index >= length of period of desired frequency (173:345 >= 173)}}
\DoxyCodeLine{01277         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(signals-\/>current\_LUT\_Index[index] >= (LUT\_SUPPORTPOINTS[signals-\/>freqIndex[index]] / 2))\{}
\DoxyCodeLine{01278 }
\DoxyCodeLine{01279             rect = -\/0.2;}
\DoxyCodeLine{01280         \}}
\DoxyCodeLine{01281     \}}
\DoxyCodeLine{01282     \textcolor{comment}{// IF: Length of period is odd (e.g. 347)}}
\DoxyCodeLine{01283     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(LUT\_SUPPORTPOINTS[signals-\/>freqIndex[index]] \% 2 == 1)\{}
\DoxyCodeLine{01284 }
\DoxyCodeLine{01285         \textcolor{comment}{// IF: Current index < length of period of desired frequency (0:173 < 174) due to (period-\/1)/2 + 1}}
\DoxyCodeLine{01286         \textcolor{keywordflow}{if}(signals-\/>current\_LUT\_Index[index] < (((LUT\_SUPPORTPOINTS[signals-\/>freqIndex[index]] -\/ 1) / 2) + 1))\{}
\DoxyCodeLine{01287 }
\DoxyCodeLine{01288             rect = 0.2;}
\DoxyCodeLine{01289         \}}
\DoxyCodeLine{01290         \textcolor{comment}{// IF: Current index >= length of period of desired frequency (174:346 >= 174) due to (period-\/1)/2 + 1}}
\DoxyCodeLine{01291         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(signals-\/>current\_LUT\_Index[index] >= (((LUT\_SUPPORTPOINTS[signals-\/>freqIndex[index]] -\/ 1) / 2) + 1))\{}
\DoxyCodeLine{01292 }
\DoxyCodeLine{01293             rect = -\/0.2;}
\DoxyCodeLine{01294         \}}
\DoxyCodeLine{01295     \}}
\DoxyCodeLine{01296     \textcolor{keywordflow}{return} rect;}
\DoxyCodeLine{01297 \}}

\end{DoxyCode}
\mbox{\Hypertarget{signal__synthesis_8h_abeac1ddb99c3d1374df2dc163a756072}\label{signal__synthesis_8h_abeac1ddb99c3d1374df2dc163a756072}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!CalcTriangleSample@{CalcTriangleSample}}
\index{CalcTriangleSample@{CalcTriangleSample}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{CalcTriangleSample()}{CalcTriangleSample()}}
{\footnotesize\ttfamily float Calc\+Triangle\+Sample (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structsignal__t}{signal\+\_\+t}} $\ast$}]{signals,  }\item[{int}]{index }\end{DoxyParamCaption})}



Triangle wave samples based on struct signals. 


\begin{DoxyParams}{Parameters}
{\em signals} & \\
\hline
{\em index} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
triangle value 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{signal__synthesis_8c_source_l01306}{1306}} of file \mbox{\hyperlink{signal__synthesis_8c_source}{signal\+\_\+synthesis.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01306                                                              \{}
\DoxyCodeLine{01307 }
\DoxyCodeLine{01308     \textcolor{keywordtype}{float} triangle      = 0;}
\DoxyCodeLine{01309     \textcolor{keywordtype}{float} current\_index = (float)signals-\/>current\_LUT\_Index[index];}
\DoxyCodeLine{01310     \textcolor{keywordtype}{float} period        = (\textcolor{keywordtype}{float})LUT\_SUPPORTPOINTS[signals-\/>freqIndex[index]];}
\DoxyCodeLine{01311 }
\DoxyCodeLine{01312     \textcolor{comment}{/* FORMULA: 4*a/p * abs((((x -\/ p/4) \% p) + p) \% p -\/ p/2) -\/ a }}
\DoxyCodeLine{01313 \textcolor{comment}{     *}}
\DoxyCodeLine{01314 \textcolor{comment}{     * a: Amplitude         >> 1 }}
\DoxyCodeLine{01315 \textcolor{comment}{     * x: Current index     >> signals-\/>current\_LUT\_Index[index] }}
\DoxyCodeLine{01316 \textcolor{comment}{     * p: Period            >> LUT\_SUPPORTPOINTS[signals-\/>freqIndex[index]] }}
\DoxyCodeLine{01317 \textcolor{comment}{     *}}
\DoxyCodeLine{01318 \textcolor{comment}{     * Source: https://en.wikipedia.org/wiki/Triangle\_wave }}
\DoxyCodeLine{01319 \textcolor{comment}{     *}}
\DoxyCodeLine{01320 \textcolor{comment}{     */}}
\DoxyCodeLine{01321 }
\DoxyCodeLine{01322     triangle = fmodf(current\_index -\/ period/4, period);}
\DoxyCodeLine{01323     triangle = triangle + period;}
\DoxyCodeLine{01324     triangle = fmodf(triangle, period) -\/ period/2;}
\DoxyCodeLine{01325     triangle = abs(triangle);}
\DoxyCodeLine{01326     triangle = (4/period) * triangle -\/ 1;;}
\DoxyCodeLine{01327 }
\DoxyCodeLine{01328     \textcolor{keywordflow}{return} triangle;}
\DoxyCodeLine{01329 \}}

\end{DoxyCode}
\mbox{\Hypertarget{signal__synthesis_8h_aff4b96bd9a6fb74a10215a54f141d06d}\label{signal__synthesis_8h_aff4b96bd9a6fb74a10215a54f141d06d}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!DeleteSignal@{DeleteSignal}}
\index{DeleteSignal@{DeleteSignal}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{DeleteSignal()}{DeleteSignal()}}
{\footnotesize\ttfamily void Delete\+Signal (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structsignal__t}{signal\+\_\+t}} $\ast$}]{signals,  }\item[{int16\+\_\+t}]{signal\+\_\+index }\end{DoxyParamCaption})}



deletes a signal inside the signals1 struct, and shifts all other signals behind the deleted signal to the left. The shift is for having no empty spaces inside the signals1 struct 


\begin{DoxyParams}{Parameters}
{\em } & signal\+\_\+index\+: index of the signals which should be seleted \\
\hline
\end{DoxyParams}
\begin{DoxyAttention}{Attention}
if you wnat to delete two signals in a row, beware that the index of the second signal could have changed, e.\+g. signals1 contains three signals, you want to delete signals1\mbox{[}0\mbox{]} and signals1\mbox{[}1\mbox{]}. After using Delete\+Signal(0) you need to use Delete\+Signal(0) again, because signals1\mbox{[}1\mbox{]} became signals1\mbox{[}0\mbox{]} after first use 
\end{DoxyAttention}
\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{signal__synthesis_8c_source_l00807}{807}} of file \mbox{\hyperlink{signal__synthesis_8c_source}{signal\+\_\+synthesis.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00807                                                                  \{}
\DoxyCodeLine{00808 }
\DoxyCodeLine{00809     \textcolor{keywordflow}{if} (signals-\/>count > 0 \&\& signal\_index > -\/1)\{}
\DoxyCodeLine{00810         \textcolor{comment}{//shift signals too left}}
\DoxyCodeLine{00811         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} delete\_counter=signal\_index; delete\_counter < signals-\/>count; delete\_counter++ )\{}
\DoxyCodeLine{00812             signals -\/> current\_LUT\_Index[delete\_counter] = signals -\/> current\_LUT\_Index[delete\_counter+1] ;}
\DoxyCodeLine{00813             signals -\/> freq[delete\_counter] = signals -\/> freq[delete\_counter+1];}
\DoxyCodeLine{00814             signals -\/> freqIndex[delete\_counter] = signals -\/> freqIndex[delete\_counter+1];}
\DoxyCodeLine{00815             signals -\/> kind[delete\_counter] = signals -\/> kind[delete\_counter+1];}
\DoxyCodeLine{00816             signals -\/> ID[delete\_counter] = signals -\/> ID[delete\_counter+1];}
\DoxyCodeLine{00817         \}}
\DoxyCodeLine{00818         signals -\/> count-\/=1;}
\DoxyCodeLine{00819         signals -\/> max = 1;}
\DoxyCodeLine{00820     \}}
\DoxyCodeLine{00821     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00822         printf(\textcolor{stringliteral}{"{}delete ERROR\(\backslash\)r\(\backslash\)n"{}});}
\DoxyCodeLine{00823     \}}
\DoxyCodeLine{00824 \}}

\end{DoxyCode}
\mbox{\Hypertarget{signal__synthesis_8h_a100668ad3cefb7abc0f65f866ea508ba}\label{signal__synthesis_8h_a100668ad3cefb7abc0f65f866ea508ba}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!IDtoIndex@{IDtoIndex}}
\index{IDtoIndex@{IDtoIndex}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{IDtoIndex()}{IDtoIndex()}}
{\footnotesize\ttfamily int16\+\_\+t IDto\+Index (\begin{DoxyParamCaption}\item[{int16\+\_\+t}]{id }\end{DoxyParamCaption})}



converts an signal ID into its Index 


\begin{DoxyParams}{Parameters}
{\em } & ID of the wanted signal \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em } & Index of the signal with the given ID, or -\/1 when ID was not found \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{signal__synthesis_8c_source_l00830}{830}} of file \mbox{\hyperlink{signal__synthesis_8c_source}{signal\+\_\+synthesis.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00830                               \{}
\DoxyCodeLine{00831 }
\DoxyCodeLine{00832     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i =0; i < \mbox{\hyperlink{signal__synthesis_8h_a74bf0cbaccfba1bf548d482148183a12}{MAX\_SIGNAL\_KOMBINATION}};i++)\{}
\DoxyCodeLine{00833         \textcolor{keywordflow}{if} (signals1.ID[i] == \textcolor{keywordtype}{id})\{}
\DoxyCodeLine{00834             \textcolor{keywordflow}{return} i;}
\DoxyCodeLine{00835         \}}
\DoxyCodeLine{00836     \}}
\DoxyCodeLine{00837     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00838 \}}

\end{DoxyCode}
\mbox{\Hypertarget{signal__synthesis_8h_a994b819c46cb3569b8854f25a13b54fc}\label{signal__synthesis_8h_a994b819c46cb3569b8854f25a13b54fc}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!initRamp@{initRamp}}
\index{initRamp@{initRamp}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{initRamp()}{initRamp()}}
{\footnotesize\ttfamily bool init\+Ramp (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{signal__synthesis_8c_source_l01215}{1215}} of file \mbox{\hyperlink{signal__synthesis_8c_source}{signal\+\_\+synthesis.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01215                    \{}
\DoxyCodeLine{01216     \textcolor{keywordtype}{bool} retval = \textcolor{keyword}{false};}
\DoxyCodeLine{01217     \textcolor{keywordtype}{float}* calculate\_vector\_tmp = \mbox{\hyperlink{main_8h_a25be00c869033fae5b8206c20aeb3861}{calculate\_vector1}};}
\DoxyCodeLine{01218 }
\DoxyCodeLine{01219     \textcolor{comment}{// ramp Duration of 0.5 seconds}}
\DoxyCodeLine{01220     \textcolor{keywordtype}{float} ramp\_dur = 0.5*LUT\_SR;}
\DoxyCodeLine{01221     \textcolor{comment}{// MAX Ramp Value in mV}}
\DoxyCodeLine{01222     uint32\_t maxRamp = (uint32\_t)(1650 * \mbox{\hyperlink{signal__synthesis_8h_a9403bb31e6a5748c0bfc57f7523ef483}{DAC\_MAXVALUE\_TO\_AMPLITUDE\_RATIO}} );}
\DoxyCodeLine{01223 }
\DoxyCodeLine{01224     \textcolor{comment}{// Write into DAC-\/Buffer}}
\DoxyCodeLine{01225     \textcolor{comment}{// decide if first half of BLOCKSIZE or second half}}
\DoxyCodeLine{01226     uint16\_t BLOOCKSIZE\_startIndex = 0, BLOOCKSIZE\_endIndex = 0;}
\DoxyCodeLine{01227     \textcolor{keywordflow}{if} (\mbox{\hyperlink{signal__synthesis_8h_a5b4caaf313594423ca462cb11a33eca9}{outputBuffer\_position}} == HALF\_BLOCK)\{}
\DoxyCodeLine{01228         BLOOCKSIZE\_startIndex = 0;}
\DoxyCodeLine{01229         BLOOCKSIZE\_endIndex = \mbox{\hyperlink{main_8h_afcf795f5a96fd55561abe69f56224630}{BLOCKSIZE}}/2;}
\DoxyCodeLine{01230     \}}
\DoxyCodeLine{01231     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\mbox{\hyperlink{signal__synthesis_8h_a5b4caaf313594423ca462cb11a33eca9}{outputBuffer\_position}} == FULL\_BLOCK)\{}
\DoxyCodeLine{01232         BLOOCKSIZE\_startIndex = \mbox{\hyperlink{main_8h_afcf795f5a96fd55561abe69f56224630}{BLOCKSIZE}}/2;}
\DoxyCodeLine{01233         BLOOCKSIZE\_endIndex  = \mbox{\hyperlink{main_8h_afcf795f5a96fd55561abe69f56224630}{BLOCKSIZE}};}
\DoxyCodeLine{01234     \}}
\DoxyCodeLine{01235 }
\DoxyCodeLine{01236     \textcolor{comment}{//Write into DAC}}
\DoxyCodeLine{01237     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} BLOCKSIZE\_counter = BLOOCKSIZE\_startIndex; BLOCKSIZE\_counter < BLOOCKSIZE\_endIndex; BLOCKSIZE\_counter++) \{}
\DoxyCodeLine{01238 }
\DoxyCodeLine{01239         \textcolor{keywordflow}{if} (\mbox{\hyperlink{signal__synthesis_8c_a406aefd47c82521bb2c5a14ef93c85d2}{ramp\_counter}} < ramp\_dur)\{}
\DoxyCodeLine{01240             *((uint32\_t *)(\&calculate\_vector\_tmp[BLOCKSIZE\_counter] )) = (uint32\_t)((float)((\mbox{\hyperlink{signal__synthesis_8c_a406aefd47c82521bb2c5a14ef93c85d2}{ramp\_counter}}/ramp\_dur) * maxRamp));}
\DoxyCodeLine{01241             \mbox{\hyperlink{signal__synthesis_8c_a406aefd47c82521bb2c5a14ef93c85d2}{ramp\_counter}}++;}
\DoxyCodeLine{01242         \}}
\DoxyCodeLine{01243         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\mbox{\hyperlink{signal__synthesis_8c_a406aefd47c82521bb2c5a14ef93c85d2}{ramp\_counter}} >= ramp\_dur)\{}
\DoxyCodeLine{01244             *((uint32\_t *)(\&calculate\_vector\_tmp[BLOCKSIZE\_counter] )) = (uint32\_t)(maxRamp);}
\DoxyCodeLine{01245         \}}
\DoxyCodeLine{01246     \}}
\DoxyCodeLine{01247     \textcolor{keywordflow}{if} (\mbox{\hyperlink{signal__synthesis_8c_a406aefd47c82521bb2c5a14ef93c85d2}{ramp\_counter}} >= ramp\_dur)}
\DoxyCodeLine{01248         retval = \textcolor{keyword}{true};}
\DoxyCodeLine{01249 }
\DoxyCodeLine{01250     \textcolor{keywordflow}{return} retval;}
\DoxyCodeLine{01251 \}}

\end{DoxyCode}
\mbox{\Hypertarget{signal__synthesis_8h_a381bb27bca64ed7f5df822a3db09707a}\label{signal__synthesis_8h_a381bb27bca64ed7f5df822a3db09707a}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!LFO\_SingleValueProcess@{LFO\_SingleValueProcess}}
\index{LFO\_SingleValueProcess@{LFO\_SingleValueProcess}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{LFO\_SingleValueProcess()}{LFO\_SingleValueProcess()}}
{\footnotesize\ttfamily void LFO\+\_\+\+Single\+Value\+Process (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structeffects__lfo__t}{effects\+\_\+lfo\+\_\+t}} $\ast$}]{lfo,  }\item[{uint8\+\_\+t}]{lfo\+\_\+effect }\end{DoxyParamCaption})}



Constructor for a signal, adds a signal into the signals1 struct. 


\begin{DoxyParams}{Parameters}
{\em kind} & kind of the signal, use signal\+\_\+kind\+\_\+enum \\
\hline
{\em key} & is string which is a note key from C to b \\
\hline
{\em octave} & defines in which octave the key is settled. \\
\hline
\end{DoxyParams}
\begin{DoxyAttention}{Attention}
the combination of key and octave defines the frequency 
\end{DoxyAttention}


Definition at line \mbox{\hyperlink{signal__synthesis_8c_source_l00147}{147}} of file \mbox{\hyperlink{signal__synthesis_8c_source}{signal\+\_\+synthesis.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00147                                                                            \{}
\DoxyCodeLine{00148 }
\DoxyCodeLine{00149     lfo-\/>lfo\_data = 0;}
\DoxyCodeLine{00150 }
\DoxyCodeLine{00151     \textcolor{comment}{// CASE 1: 0.125 Hz}}
\DoxyCodeLine{00152     \textcolor{keywordflow}{if}(lfo-\/>lfo\_frequency == LFO\_FREQUENCYS[0]) \{}
\DoxyCodeLine{00153 }
\DoxyCodeLine{00154         \textcolor{keywordflow}{switch}(lfo-\/>lfo\_quarter) \{}
\DoxyCodeLine{00155         \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{00156             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0)}
\DoxyCodeLine{00157                 lfo-\/>lfo\_data = 0;}
\DoxyCodeLine{00158             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00159                 lfo-\/>lfo\_data = LFO[LFO\_STARTINDEX[0]  + lfo-\/>lfo\_index];}
\DoxyCodeLine{00160             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00161         \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{00162             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0) \{}
\DoxyCodeLine{00163                 lfo-\/>lfo\_data = 1;}
\DoxyCodeLine{00164 }
\DoxyCodeLine{00165                 \textcolor{keywordflow}{if}(lfo\_effect == TREMOLO\_LFO) \{}
\DoxyCodeLine{00166                     Tremolo.lfo-\/>lfo\_depth = Display.Tremolo\_Depth; \textcolor{comment}{// tremolo depth has to be updated when the maximum amplitude is reached}}
\DoxyCodeLine{00167                     \textcolor{comment}{// tremolo effect has to be deleted, when the amplitude is 1 to avoid an abrupt change in the amplitude}}
\DoxyCodeLine{00168                     \textcolor{keywordflow}{if}(Display.Tremolo\_ONOFF == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{00169                         \mbox{\hyperlink{effects_8h_a050a7ed0cb582067293e423a9c3fd7a9}{effects\_delete}}(TREM);}
\DoxyCodeLine{00170                         Display.last\_Tremolo\_ONOFF = \textcolor{keyword}{false};}
\DoxyCodeLine{00171                     \}}
\DoxyCodeLine{00172                 \}}
\DoxyCodeLine{00173             \}}
\DoxyCodeLine{00174             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00175                 lfo-\/>lfo\_data = LFO[LFO\_ENDINDEX[0]    -\/ lfo-\/>lfo\_index + 1];}
\DoxyCodeLine{00176             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00177         \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{00178             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0)}
\DoxyCodeLine{00179                 lfo-\/>lfo\_data = 0;}
\DoxyCodeLine{00180             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00181                 lfo-\/>lfo\_data = -\/LFO[LFO\_STARTINDEX[0] + lfo-\/>lfo\_index];}
\DoxyCodeLine{00182             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00183         \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{00184             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0) \{}
\DoxyCodeLine{00185                 lfo-\/>lfo\_data = -\/1;}
\DoxyCodeLine{00186             \}}
\DoxyCodeLine{00187             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00188                 lfo-\/>lfo\_data = -\/LFO[LFO\_ENDINDEX[0]   -\/ lfo-\/>lfo\_index + 1];}
\DoxyCodeLine{00189             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00190         \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00191             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00192         \}}
\DoxyCodeLine{00193         lfo-\/>lfo\_index++;}
\DoxyCodeLine{00194 }
\DoxyCodeLine{00195         \textcolor{comment}{// CHECK: if end of quarter is reached, if yes then increment quarter and set index to zero}}
\DoxyCodeLine{00196         \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == LFO\_SUPPORTPOINTS[0]) \{}
\DoxyCodeLine{00197 }
\DoxyCodeLine{00198             lfo-\/>lfo\_index = 0;}
\DoxyCodeLine{00199             lfo-\/>lfo\_quarter++;}
\DoxyCodeLine{00200             \textcolor{keywordflow}{if} (lfo-\/>lfo\_quarter == 4) \{}
\DoxyCodeLine{00201                 lfo-\/>lfo\_quarter = 0;}
\DoxyCodeLine{00202 }
\DoxyCodeLine{00203                 \textcolor{keywordflow}{if}(lfo\_effect == TREMOLO\_LFO) \{}
\DoxyCodeLine{00204                     \textcolor{comment}{// to make sure that the tremolo restarts only when the LFO period is done}}
\DoxyCodeLine{00205                     \textcolor{keywordflow}{if}(Display.Tremolo\_Rate\_Index != Display.last\_Tremolo\_Rate\_Index) \{}
\DoxyCodeLine{00206 }
\DoxyCodeLine{00207                         Display.Tremolo\_Rate = LFO\_FREQUENCYS[Display.Tremolo\_Rate\_Index];}
\DoxyCodeLine{00208                         Display.last\_Tremolo\_Rate\_Index = Display.Tremolo\_Rate\_Index;}
\DoxyCodeLine{00209                         lfo-\/>lfo\_done\_flag = \textcolor{keyword}{true};}
\DoxyCodeLine{00210                         Tremolo.lfo-\/>lfo\_frequency = Display.Tremolo\_Rate;}
\DoxyCodeLine{00211                     \}}
\DoxyCodeLine{00212                 \}}
\DoxyCodeLine{00213                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(lfo\_effect == WAHWAH\_LFO) \{}
\DoxyCodeLine{00214                     \textcolor{comment}{// to make sure that the auto-\/wahwah restarts only when the LFO period is done}}
\DoxyCodeLine{00215                     \textcolor{keywordflow}{if}(Display.WahWah\_LFOfreq\_Index != Display.last\_WahWah\_LFOfreq\_Index) \{}
\DoxyCodeLine{00216 }
\DoxyCodeLine{00217                         Display.WahWah\_LFOfreq = LFO\_FREQUENCYS[Display.WahWah\_LFOfreq\_Index];}
\DoxyCodeLine{00218                         Display.last\_WahWah\_LFOfreq\_Index = Display.WahWah\_LFOfreq\_Index;}
\DoxyCodeLine{00219                         lfo-\/>lfo\_done\_flag = \textcolor{keyword}{true};}
\DoxyCodeLine{00220                         WahWah.lfo-\/>lfo\_frequency = Display.WahWah\_LFOfreq;}
\DoxyCodeLine{00221                     \}}
\DoxyCodeLine{00222                 \}}
\DoxyCodeLine{00223             \}}
\DoxyCodeLine{00224         \}}
\DoxyCodeLine{00225     \}}
\DoxyCodeLine{00226     \textcolor{comment}{// CASE 2: 0.25 Hz}}
\DoxyCodeLine{00227     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(lfo-\/>lfo\_frequency == LFO\_FREQUENCYS[1]) \{}
\DoxyCodeLine{00228 }
\DoxyCodeLine{00229         \textcolor{keywordflow}{switch}(lfo-\/>lfo\_quarter) \{}
\DoxyCodeLine{00230         \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{00231             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0)}
\DoxyCodeLine{00232                 lfo-\/>lfo\_data = 0;}
\DoxyCodeLine{00233             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00234                 lfo-\/>lfo\_data = LFO[LFO\_STARTINDEX[1]  + lfo-\/>lfo\_index];}
\DoxyCodeLine{00235             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00236         \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{00237             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0) \{}
\DoxyCodeLine{00238                 lfo-\/>lfo\_data = 1;}
\DoxyCodeLine{00239 }
\DoxyCodeLine{00240                 \textcolor{keywordflow}{if}(lfo\_effect == TREMOLO\_LFO) \{}
\DoxyCodeLine{00241                     Tremolo.lfo-\/>lfo\_depth = Display.Tremolo\_Depth; \textcolor{comment}{// tremolo depth has to be updated when the maximum amplitude is reached}}
\DoxyCodeLine{00242                     \textcolor{comment}{// tremolo effect has to be deleted, when the amplitude is 1 to avoid an abrupt change in the amplitude}}
\DoxyCodeLine{00243                     \textcolor{keywordflow}{if}(Display.Tremolo\_ONOFF == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{00244                         \mbox{\hyperlink{effects_8h_a050a7ed0cb582067293e423a9c3fd7a9}{effects\_delete}}(TREM);}
\DoxyCodeLine{00245                         Display.last\_Tremolo\_ONOFF = \textcolor{keyword}{false};}
\DoxyCodeLine{00246                     \}}
\DoxyCodeLine{00247                 \}}
\DoxyCodeLine{00248             \}}
\DoxyCodeLine{00249             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00250                 lfo-\/>lfo\_data = LFO[LFO\_ENDINDEX[1]    -\/ lfo-\/>lfo\_index + 1];}
\DoxyCodeLine{00251             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00252         \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{00253             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0)}
\DoxyCodeLine{00254                 lfo-\/>lfo\_data = 0;}
\DoxyCodeLine{00255             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00256                 lfo-\/>lfo\_data = -\/LFO[LFO\_STARTINDEX[1] + lfo-\/>lfo\_index];}
\DoxyCodeLine{00257             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00258         \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{00259             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0) \{}
\DoxyCodeLine{00260                 lfo-\/>lfo\_data = -\/1;}
\DoxyCodeLine{00261             \}}
\DoxyCodeLine{00262             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00263                 lfo-\/>lfo\_data = -\/LFO[LFO\_ENDINDEX[1]   -\/ lfo-\/>lfo\_index + 1];}
\DoxyCodeLine{00264             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00265         \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00266             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00267         \}}
\DoxyCodeLine{00268         lfo-\/>lfo\_index++;}
\DoxyCodeLine{00269 }
\DoxyCodeLine{00270         \textcolor{comment}{// CHECK: if end of quarter is reached, if yes then increment quarter and set index to zero}}
\DoxyCodeLine{00271         \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == LFO\_SUPPORTPOINTS[1]) \{}
\DoxyCodeLine{00272 }
\DoxyCodeLine{00273             lfo-\/>lfo\_index = 0;}
\DoxyCodeLine{00274             lfo-\/>lfo\_quarter++;}
\DoxyCodeLine{00275             \textcolor{keywordflow}{if} (lfo-\/>lfo\_quarter == 4) \{}
\DoxyCodeLine{00276                 lfo-\/>lfo\_quarter = 0;}
\DoxyCodeLine{00277 }
\DoxyCodeLine{00278                 \textcolor{keywordflow}{if}(lfo\_effect == TREMOLO\_LFO) \{}
\DoxyCodeLine{00279                     \textcolor{comment}{// to make sure that the tremolo restarts only when the LFO period is done}}
\DoxyCodeLine{00280                     \textcolor{keywordflow}{if}(Display.Tremolo\_Rate\_Index != Display.last\_Tremolo\_Rate\_Index) \{}
\DoxyCodeLine{00281 }
\DoxyCodeLine{00282                         Display.Tremolo\_Rate = LFO\_FREQUENCYS[Display.Tremolo\_Rate\_Index];}
\DoxyCodeLine{00283                         Display.last\_Tremolo\_Rate\_Index = Display.Tremolo\_Rate\_Index;}
\DoxyCodeLine{00284                         lfo-\/>lfo\_done\_flag = \textcolor{keyword}{true};}
\DoxyCodeLine{00285                         Tremolo.lfo-\/>lfo\_frequency = Display.Tremolo\_Rate;}
\DoxyCodeLine{00286                     \}}
\DoxyCodeLine{00287                 \}}
\DoxyCodeLine{00288                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(lfo\_effect == WAHWAH\_LFO) \{}
\DoxyCodeLine{00289                     \textcolor{comment}{// to make sure that the auto-\/wahwah restarts only when the LFO period is done}}
\DoxyCodeLine{00290                     \textcolor{keywordflow}{if}(Display.WahWah\_LFOfreq\_Index != Display.last\_WahWah\_LFOfreq\_Index) \{}
\DoxyCodeLine{00291 }
\DoxyCodeLine{00292                         Display.WahWah\_LFOfreq = LFO\_FREQUENCYS[Display.WahWah\_LFOfreq\_Index];}
\DoxyCodeLine{00293                         Display.last\_WahWah\_LFOfreq\_Index = Display.WahWah\_LFOfreq\_Index;}
\DoxyCodeLine{00294                         lfo-\/>lfo\_done\_flag = \textcolor{keyword}{true};}
\DoxyCodeLine{00295                         WahWah.lfo-\/>lfo\_frequency = Display.WahWah\_LFOfreq;}
\DoxyCodeLine{00296                     \}}
\DoxyCodeLine{00297                 \}}
\DoxyCodeLine{00298             \}}
\DoxyCodeLine{00299         \}}
\DoxyCodeLine{00300     \}}
\DoxyCodeLine{00301     \textcolor{comment}{// CASE 3: 0.5 Hz}}
\DoxyCodeLine{00302     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(lfo-\/>lfo\_frequency == LFO\_FREQUENCYS[2]) \{}
\DoxyCodeLine{00303 }
\DoxyCodeLine{00304         \textcolor{keywordflow}{switch}(lfo-\/>lfo\_quarter) \{}
\DoxyCodeLine{00305         \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{00306             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0)}
\DoxyCodeLine{00307                 lfo-\/>lfo\_data = 0;}
\DoxyCodeLine{00308             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00309                 lfo-\/>lfo\_data = LFO[LFO\_STARTINDEX[2]  + lfo-\/>lfo\_index];}
\DoxyCodeLine{00310             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00311         \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{00312             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0) \{}
\DoxyCodeLine{00313                 lfo-\/>lfo\_data = 1;}
\DoxyCodeLine{00314 }
\DoxyCodeLine{00315                 \textcolor{keywordflow}{if}(lfo\_effect == TREMOLO\_LFO) \{}
\DoxyCodeLine{00316                     Tremolo.lfo-\/>lfo\_depth = Display.Tremolo\_Depth; \textcolor{comment}{// tremolo depth has to be updated when the maximum amplitude is reached}}
\DoxyCodeLine{00317                     \textcolor{comment}{// tremolo effect has to be deleted, when the amplitude is 1 to avoid an abrupt change in the amplitude}}
\DoxyCodeLine{00318                     \textcolor{keywordflow}{if}(Display.Tremolo\_ONOFF == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{00319                         \mbox{\hyperlink{effects_8h_a050a7ed0cb582067293e423a9c3fd7a9}{effects\_delete}}(TREM);}
\DoxyCodeLine{00320                         Display.last\_Tremolo\_ONOFF = \textcolor{keyword}{false};}
\DoxyCodeLine{00321                     \}}
\DoxyCodeLine{00322                 \}}
\DoxyCodeLine{00323             \}}
\DoxyCodeLine{00324             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00325                 lfo-\/>lfo\_data = LFO[LFO\_ENDINDEX[2]    -\/ lfo-\/>lfo\_index + 1];}
\DoxyCodeLine{00326             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00327         \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{00328             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0)}
\DoxyCodeLine{00329                 lfo-\/>lfo\_data = 0;}
\DoxyCodeLine{00330             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00331                 lfo-\/>lfo\_data = -\/LFO[LFO\_STARTINDEX[2] + lfo-\/>lfo\_index];}
\DoxyCodeLine{00332             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00333         \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{00334             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0) \{}
\DoxyCodeLine{00335                 lfo-\/>lfo\_data = -\/1;}
\DoxyCodeLine{00336             \}}
\DoxyCodeLine{00337             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00338                 lfo-\/>lfo\_data = -\/LFO[LFO\_ENDINDEX[2]   -\/ lfo-\/>lfo\_index + 1];}
\DoxyCodeLine{00339             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00340         \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00341             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00342         \}}
\DoxyCodeLine{00343         lfo-\/>lfo\_index++;}
\DoxyCodeLine{00344 }
\DoxyCodeLine{00345         \textcolor{comment}{// CHECK: if end of quarter is reached, if yes then increment quarter and set index to zero}}
\DoxyCodeLine{00346         \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == LFO\_SUPPORTPOINTS[2]) \{}
\DoxyCodeLine{00347 }
\DoxyCodeLine{00348             lfo-\/>lfo\_index = 0;}
\DoxyCodeLine{00349             lfo-\/>lfo\_quarter++;}
\DoxyCodeLine{00350             \textcolor{keywordflow}{if} (lfo-\/>lfo\_quarter == 4) \{}
\DoxyCodeLine{00351                 lfo-\/>lfo\_quarter = 0;}
\DoxyCodeLine{00352 }
\DoxyCodeLine{00353                 \textcolor{keywordflow}{if}(lfo\_effect == TREMOLO\_LFO) \{}
\DoxyCodeLine{00354                     \textcolor{comment}{// to make sure that the tremolo restarts only when the LFO period is done}}
\DoxyCodeLine{00355                     \textcolor{keywordflow}{if}(Display.Tremolo\_Rate\_Index != Display.last\_Tremolo\_Rate\_Index) \{}
\DoxyCodeLine{00356 }
\DoxyCodeLine{00357                         Display.Tremolo\_Rate = LFO\_FREQUENCYS[Display.Tremolo\_Rate\_Index];}
\DoxyCodeLine{00358                         Display.last\_Tremolo\_Rate\_Index = Display.Tremolo\_Rate\_Index;}
\DoxyCodeLine{00359                         lfo-\/>lfo\_done\_flag = \textcolor{keyword}{true};}
\DoxyCodeLine{00360                         Tremolo.lfo-\/>lfo\_frequency = Display.Tremolo\_Rate;}
\DoxyCodeLine{00361                     \}}
\DoxyCodeLine{00362                 \}}
\DoxyCodeLine{00363                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(lfo\_effect == WAHWAH\_LFO) \{}
\DoxyCodeLine{00364                     \textcolor{comment}{// to make sure that the auto-\/wahwah restarts only when the LFO period is done}}
\DoxyCodeLine{00365                     \textcolor{keywordflow}{if}(Display.WahWah\_LFOfreq\_Index != Display.last\_WahWah\_LFOfreq\_Index) \{}
\DoxyCodeLine{00366 }
\DoxyCodeLine{00367                         Display.WahWah\_LFOfreq = LFO\_FREQUENCYS[Display.WahWah\_LFOfreq\_Index];}
\DoxyCodeLine{00368                         Display.last\_WahWah\_LFOfreq\_Index = Display.WahWah\_LFOfreq\_Index;}
\DoxyCodeLine{00369                         lfo-\/>lfo\_done\_flag = \textcolor{keyword}{true};}
\DoxyCodeLine{00370                         WahWah.lfo-\/>lfo\_frequency = Display.WahWah\_LFOfreq;}
\DoxyCodeLine{00371                     \}}
\DoxyCodeLine{00372                 \}}
\DoxyCodeLine{00373             \}}
\DoxyCodeLine{00374         \}}
\DoxyCodeLine{00375     \}}
\DoxyCodeLine{00376     \textcolor{comment}{// CASE 4: 1 Hz}}
\DoxyCodeLine{00377     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(lfo-\/>lfo\_frequency == LFO\_FREQUENCYS[3]) \{}
\DoxyCodeLine{00378 }
\DoxyCodeLine{00379         \textcolor{keywordflow}{switch}(lfo-\/>lfo\_quarter) \{}
\DoxyCodeLine{00380         \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{00381             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0)}
\DoxyCodeLine{00382                 lfo-\/>lfo\_data = 0;}
\DoxyCodeLine{00383             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00384                 lfo-\/>lfo\_data = LFO[LFO\_STARTINDEX[3]  + lfo-\/>lfo\_index];}
\DoxyCodeLine{00385             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00386         \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{00387             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0) \{}
\DoxyCodeLine{00388                 lfo-\/>lfo\_data = 1;}
\DoxyCodeLine{00389 }
\DoxyCodeLine{00390                 \textcolor{keywordflow}{if}(lfo\_effect == TREMOLO\_LFO) \{}
\DoxyCodeLine{00391                     Tremolo.lfo-\/>lfo\_depth = Display.Tremolo\_Depth; \textcolor{comment}{// tremolo depth has to be updated when the maximum amplitude is reached}}
\DoxyCodeLine{00392                     \textcolor{comment}{// tremolo effect has to be deleted, when the amplitude is 1 to avoid an abrupt change in the amplitude}}
\DoxyCodeLine{00393                     \textcolor{keywordflow}{if}(Display.Tremolo\_ONOFF == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{00394                         \mbox{\hyperlink{effects_8h_a050a7ed0cb582067293e423a9c3fd7a9}{effects\_delete}}(TREM);}
\DoxyCodeLine{00395                         Display.last\_Tremolo\_ONOFF = \textcolor{keyword}{false};}
\DoxyCodeLine{00396                     \}}
\DoxyCodeLine{00397                 \}}
\DoxyCodeLine{00398             \}}
\DoxyCodeLine{00399             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00400                 lfo-\/>lfo\_data = LFO[LFO\_ENDINDEX[3]    -\/ lfo-\/>lfo\_index + 1];}
\DoxyCodeLine{00401             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00402         \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{00403             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0)}
\DoxyCodeLine{00404                 lfo-\/>lfo\_data = 0;}
\DoxyCodeLine{00405             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00406                 lfo-\/>lfo\_data = -\/LFO[LFO\_STARTINDEX[3] + lfo-\/>lfo\_index];}
\DoxyCodeLine{00407             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00408         \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{00409             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0) \{}
\DoxyCodeLine{00410                 lfo-\/>lfo\_data = -\/1;}
\DoxyCodeLine{00411             \}}
\DoxyCodeLine{00412             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00413                 lfo-\/>lfo\_data = -\/LFO[LFO\_ENDINDEX[3]   -\/ lfo-\/>lfo\_index + 1];}
\DoxyCodeLine{00414             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00415         \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00416             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00417         \}}
\DoxyCodeLine{00418         lfo-\/>lfo\_index++;}
\DoxyCodeLine{00419 }
\DoxyCodeLine{00420         \textcolor{comment}{// CHECK: if end of quarter is reached, if yes then increment quarter and set index to zero}}
\DoxyCodeLine{00421         \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == LFO\_SUPPORTPOINTS[3]) \{}
\DoxyCodeLine{00422 }
\DoxyCodeLine{00423             lfo-\/>lfo\_index = 0;}
\DoxyCodeLine{00424             lfo-\/>lfo\_quarter++;}
\DoxyCodeLine{00425             \textcolor{keywordflow}{if} (lfo-\/>lfo\_quarter == 4) \{}
\DoxyCodeLine{00426                 lfo-\/>lfo\_quarter = 0;}
\DoxyCodeLine{00427 }
\DoxyCodeLine{00428                 \textcolor{keywordflow}{if}(lfo\_effect == TREMOLO\_LFO) \{}
\DoxyCodeLine{00429                     \textcolor{comment}{// to make sure that the tremolo restarts only when the LFO period is done}}
\DoxyCodeLine{00430                     \textcolor{keywordflow}{if}(Display.Tremolo\_Rate\_Index != Display.last\_Tremolo\_Rate\_Index) \{}
\DoxyCodeLine{00431 }
\DoxyCodeLine{00432                         Display.Tremolo\_Rate = LFO\_FREQUENCYS[Display.Tremolo\_Rate\_Index];}
\DoxyCodeLine{00433                         Display.last\_Tremolo\_Rate\_Index = Display.Tremolo\_Rate\_Index;}
\DoxyCodeLine{00434                         lfo-\/>lfo\_done\_flag = \textcolor{keyword}{true};}
\DoxyCodeLine{00435                         Tremolo.lfo-\/>lfo\_frequency = Display.Tremolo\_Rate;}
\DoxyCodeLine{00436                     \}}
\DoxyCodeLine{00437                 \}}
\DoxyCodeLine{00438                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(lfo\_effect == WAHWAH\_LFO) \{}
\DoxyCodeLine{00439                     \textcolor{comment}{// to make sure that the auto-\/wahwah restarts only when the LFO period is done}}
\DoxyCodeLine{00440                     \textcolor{keywordflow}{if}(Display.WahWah\_LFOfreq\_Index != Display.last\_WahWah\_LFOfreq\_Index) \{}
\DoxyCodeLine{00441 }
\DoxyCodeLine{00442                         Display.WahWah\_LFOfreq = LFO\_FREQUENCYS[Display.WahWah\_LFOfreq\_Index];}
\DoxyCodeLine{00443                         Display.last\_WahWah\_LFOfreq\_Index = Display.WahWah\_LFOfreq\_Index;}
\DoxyCodeLine{00444                         lfo-\/>lfo\_done\_flag = \textcolor{keyword}{true};}
\DoxyCodeLine{00445                         WahWah.lfo-\/>lfo\_frequency = Display.WahWah\_LFOfreq;}
\DoxyCodeLine{00446                     \}}
\DoxyCodeLine{00447                 \}}
\DoxyCodeLine{00448             \}}
\DoxyCodeLine{00449         \}}
\DoxyCodeLine{00450     \}}
\DoxyCodeLine{00451     \textcolor{comment}{// CASE 5: 2 Hz}}
\DoxyCodeLine{00452     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(lfo-\/>lfo\_frequency == LFO\_FREQUENCYS[4]) \{}
\DoxyCodeLine{00453 }
\DoxyCodeLine{00454         \textcolor{keywordflow}{switch}(lfo-\/>lfo\_quarter) \{}
\DoxyCodeLine{00455         \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{00456             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0)}
\DoxyCodeLine{00457                 lfo-\/>lfo\_data = 0;}
\DoxyCodeLine{00458             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00459                 lfo-\/>lfo\_data = LFO[LFO\_STARTINDEX[4]  + lfo-\/>lfo\_index];}
\DoxyCodeLine{00460             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00461         \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{00462             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0) \{}
\DoxyCodeLine{00463                 lfo-\/>lfo\_data = 1;}
\DoxyCodeLine{00464 }
\DoxyCodeLine{00465                 \textcolor{keywordflow}{if}(lfo\_effect == TREMOLO\_LFO) \{}
\DoxyCodeLine{00466                     Tremolo.lfo-\/>lfo\_depth = Display.Tremolo\_Depth; \textcolor{comment}{// tremolo depth has to be updated when the maximum amplitude is reached}}
\DoxyCodeLine{00467                     \textcolor{comment}{// tremolo effect has to be deleted, when the amplitude is 1 to avoid an abrupt change in the amplitude}}
\DoxyCodeLine{00468                     \textcolor{keywordflow}{if}(Display.Tremolo\_ONOFF == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{00469                         \mbox{\hyperlink{effects_8h_a050a7ed0cb582067293e423a9c3fd7a9}{effects\_delete}}(TREM);}
\DoxyCodeLine{00470                         Display.last\_Tremolo\_ONOFF = \textcolor{keyword}{false};}
\DoxyCodeLine{00471                     \}}
\DoxyCodeLine{00472                 \}}
\DoxyCodeLine{00473             \}}
\DoxyCodeLine{00474             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00475                 lfo-\/>lfo\_data = LFO[LFO\_ENDINDEX[4]    -\/ lfo-\/>lfo\_index + 1];}
\DoxyCodeLine{00476             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00477         \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{00478             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0)}
\DoxyCodeLine{00479                 lfo-\/>lfo\_data = 0;}
\DoxyCodeLine{00480             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00481                 lfo-\/>lfo\_data = -\/LFO[LFO\_STARTINDEX[4] + lfo-\/>lfo\_index];}
\DoxyCodeLine{00482             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00483         \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{00484             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0) \{}
\DoxyCodeLine{00485                 lfo-\/>lfo\_data = -\/1;}
\DoxyCodeLine{00486             \}}
\DoxyCodeLine{00487             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00488                 lfo-\/>lfo\_data = -\/LFO[LFO\_ENDINDEX[4]   -\/ lfo-\/>lfo\_index + 1];}
\DoxyCodeLine{00489             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00490         \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00491             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00492         \}}
\DoxyCodeLine{00493         lfo-\/>lfo\_index++;}
\DoxyCodeLine{00494 }
\DoxyCodeLine{00495         \textcolor{comment}{// CHECK: if end of quarter is reached, if yes then increment quarter and set index to zero}}
\DoxyCodeLine{00496         \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == LFO\_SUPPORTPOINTS[4]) \{}
\DoxyCodeLine{00497 }
\DoxyCodeLine{00498             lfo-\/>lfo\_index = 0;}
\DoxyCodeLine{00499             lfo-\/>lfo\_quarter++;}
\DoxyCodeLine{00500             \textcolor{keywordflow}{if} (lfo-\/>lfo\_quarter == 4) \{}
\DoxyCodeLine{00501                 lfo-\/>lfo\_quarter = 0;}
\DoxyCodeLine{00502 }
\DoxyCodeLine{00503                 \textcolor{keywordflow}{if}(lfo\_effect == TREMOLO\_LFO) \{}
\DoxyCodeLine{00504                     \textcolor{comment}{// to make sure that the tremolo restarts only when the LFO period is done}}
\DoxyCodeLine{00505                     \textcolor{keywordflow}{if}(Display.Tremolo\_Rate\_Index != Display.last\_Tremolo\_Rate\_Index) \{}
\DoxyCodeLine{00506 }
\DoxyCodeLine{00507                         Display.Tremolo\_Rate = LFO\_FREQUENCYS[Display.Tremolo\_Rate\_Index];}
\DoxyCodeLine{00508                         Display.last\_Tremolo\_Rate\_Index = Display.Tremolo\_Rate\_Index;}
\DoxyCodeLine{00509                         lfo-\/>lfo\_done\_flag = \textcolor{keyword}{true};}
\DoxyCodeLine{00510                         Tremolo.lfo-\/>lfo\_frequency = Display.Tremolo\_Rate;}
\DoxyCodeLine{00511                     \}}
\DoxyCodeLine{00512                 \}}
\DoxyCodeLine{00513                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(lfo\_effect == WAHWAH\_LFO) \{}
\DoxyCodeLine{00514                     \textcolor{comment}{// to make sure that the auto-\/wahwah restarts only when the LFO period is done}}
\DoxyCodeLine{00515                     \textcolor{keywordflow}{if}(Display.WahWah\_LFOfreq\_Index != Display.last\_WahWah\_LFOfreq\_Index) \{}
\DoxyCodeLine{00516 }
\DoxyCodeLine{00517                         Display.WahWah\_LFOfreq = LFO\_FREQUENCYS[Display.WahWah\_LFOfreq\_Index];}
\DoxyCodeLine{00518                         Display.last\_WahWah\_LFOfreq\_Index = Display.WahWah\_LFOfreq\_Index;}
\DoxyCodeLine{00519                         lfo-\/>lfo\_done\_flag = \textcolor{keyword}{true};}
\DoxyCodeLine{00520                         WahWah.lfo-\/>lfo\_frequency = Display.WahWah\_LFOfreq;}
\DoxyCodeLine{00521                     \}}
\DoxyCodeLine{00522                 \}}
\DoxyCodeLine{00523             \}}
\DoxyCodeLine{00524         \}}
\DoxyCodeLine{00525     \}}
\DoxyCodeLine{00526     \textcolor{comment}{// CASE 6: 4 Hz}}
\DoxyCodeLine{00527     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(lfo-\/>lfo\_frequency == LFO\_FREQUENCYS[5]) \{}
\DoxyCodeLine{00528 }
\DoxyCodeLine{00529         \textcolor{keywordflow}{switch}(lfo-\/>lfo\_quarter) \{}
\DoxyCodeLine{00530         \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{00531             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0)}
\DoxyCodeLine{00532                 lfo-\/>lfo\_data = 0;}
\DoxyCodeLine{00533             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00534                 lfo-\/>lfo\_data = LFO[LFO\_STARTINDEX[5]  + lfo-\/>lfo\_index];}
\DoxyCodeLine{00535             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00536         \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{00537             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0) \{}
\DoxyCodeLine{00538                 lfo-\/>lfo\_data = 1;}
\DoxyCodeLine{00539 }
\DoxyCodeLine{00540                 \textcolor{keywordflow}{if}(lfo\_effect == TREMOLO\_LFO) \{}
\DoxyCodeLine{00541                     Tremolo.lfo-\/>lfo\_depth = Display.Tremolo\_Depth; \textcolor{comment}{// tremolo depth has to be updated when the maximum amplitude is reached}}
\DoxyCodeLine{00542                     \textcolor{comment}{// tremolo effect has to be deleted, when the amplitude is 1 to avoid an abrupt change in the amplitude}}
\DoxyCodeLine{00543                     \textcolor{keywordflow}{if}(Display.Tremolo\_ONOFF == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{00544                         \mbox{\hyperlink{effects_8h_a050a7ed0cb582067293e423a9c3fd7a9}{effects\_delete}}(TREM);}
\DoxyCodeLine{00545                         Display.last\_Tremolo\_ONOFF = \textcolor{keyword}{false};}
\DoxyCodeLine{00546                     \}}
\DoxyCodeLine{00547                 \}}
\DoxyCodeLine{00548             \}}
\DoxyCodeLine{00549             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00550                 lfo-\/>lfo\_data = LFO[LFO\_ENDINDEX[5]    -\/ lfo-\/>lfo\_index + 1];}
\DoxyCodeLine{00551             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00552         \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{00553             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0)}
\DoxyCodeLine{00554                 lfo-\/>lfo\_data = 0;}
\DoxyCodeLine{00555             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00556                 lfo-\/>lfo\_data = -\/LFO[LFO\_STARTINDEX[5] + lfo-\/>lfo\_index];}
\DoxyCodeLine{00557             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00558         \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{00559             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0) \{}
\DoxyCodeLine{00560                 lfo-\/>lfo\_data = -\/1;}
\DoxyCodeLine{00561             \}}
\DoxyCodeLine{00562             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00563                 lfo-\/>lfo\_data = -\/LFO[LFO\_ENDINDEX[5]   -\/ lfo-\/>lfo\_index + 1];}
\DoxyCodeLine{00564             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00565         \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00566             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00567         \}}
\DoxyCodeLine{00568         lfo-\/>lfo\_index++;}
\DoxyCodeLine{00569 }
\DoxyCodeLine{00570         \textcolor{comment}{// CHECK: if end of quarter is reached, if yes then increment quarter and set index to zero}}
\DoxyCodeLine{00571         \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == LFO\_SUPPORTPOINTS[5]) \{}
\DoxyCodeLine{00572 }
\DoxyCodeLine{00573             lfo-\/>lfo\_index = 0;}
\DoxyCodeLine{00574             lfo-\/>lfo\_quarter++;}
\DoxyCodeLine{00575             \textcolor{keywordflow}{if} (lfo-\/>lfo\_quarter == 4) \{}
\DoxyCodeLine{00576                 lfo-\/>lfo\_quarter = 0;}
\DoxyCodeLine{00577 }
\DoxyCodeLine{00578                 \textcolor{keywordflow}{if}(lfo\_effect == TREMOLO\_LFO) \{}
\DoxyCodeLine{00579                     \textcolor{comment}{// to make sure that the tremolo restarts only when the LFO period is done}}
\DoxyCodeLine{00580                     \textcolor{keywordflow}{if}(Display.Tremolo\_Rate\_Index != Display.last\_Tremolo\_Rate\_Index) \{}
\DoxyCodeLine{00581 }
\DoxyCodeLine{00582                         Display.Tremolo\_Rate = LFO\_FREQUENCYS[Display.Tremolo\_Rate\_Index];}
\DoxyCodeLine{00583                         Display.last\_Tremolo\_Rate\_Index = Display.Tremolo\_Rate\_Index;}
\DoxyCodeLine{00584                         lfo-\/>lfo\_done\_flag = \textcolor{keyword}{true};}
\DoxyCodeLine{00585                         Tremolo.lfo-\/>lfo\_frequency = Display.Tremolo\_Rate;}
\DoxyCodeLine{00586                     \}}
\DoxyCodeLine{00587                 \}}
\DoxyCodeLine{00588                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(lfo\_effect == WAHWAH\_LFO) \{}
\DoxyCodeLine{00589                     \textcolor{comment}{// to make sure that the auto-\/wahwah restarts only when the LFO period is done}}
\DoxyCodeLine{00590                     \textcolor{keywordflow}{if}(Display.WahWah\_LFOfreq\_Index != Display.last\_WahWah\_LFOfreq\_Index) \{}
\DoxyCodeLine{00591 }
\DoxyCodeLine{00592                         Display.WahWah\_LFOfreq = LFO\_FREQUENCYS[Display.WahWah\_LFOfreq\_Index];}
\DoxyCodeLine{00593                         Display.last\_WahWah\_LFOfreq\_Index = Display.WahWah\_LFOfreq\_Index;}
\DoxyCodeLine{00594                         lfo-\/>lfo\_done\_flag = \textcolor{keyword}{true};}
\DoxyCodeLine{00595                         WahWah.lfo-\/>lfo\_frequency = Display.WahWah\_LFOfreq;}
\DoxyCodeLine{00596                     \}}
\DoxyCodeLine{00597                 \}}
\DoxyCodeLine{00598             \}}
\DoxyCodeLine{00599         \}}
\DoxyCodeLine{00600     \}}
\DoxyCodeLine{00601     \textcolor{comment}{// CASE 7: 8 Hz}}
\DoxyCodeLine{00602     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(lfo-\/>lfo\_frequency == LFO\_FREQUENCYS[6]) \{}
\DoxyCodeLine{00603 }
\DoxyCodeLine{00604         \textcolor{keywordflow}{switch}(lfo-\/>lfo\_quarter) \{}
\DoxyCodeLine{00605         \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{00606             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0)}
\DoxyCodeLine{00607                 lfo-\/>lfo\_data = 0;}
\DoxyCodeLine{00608             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00609                 lfo-\/>lfo\_data = LFO[LFO\_STARTINDEX[6]  + lfo-\/>lfo\_index];}
\DoxyCodeLine{00610             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00611         \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{00612             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0) \{}
\DoxyCodeLine{00613                 lfo-\/>lfo\_data = 1;}
\DoxyCodeLine{00614 }
\DoxyCodeLine{00615                 \textcolor{keywordflow}{if}(lfo\_effect == TREMOLO\_LFO) \{}
\DoxyCodeLine{00616                     Tremolo.lfo-\/>lfo\_depth = Display.Tremolo\_Depth; \textcolor{comment}{// tremolo depth has to be updated when the maximum amplitude is reached}}
\DoxyCodeLine{00617                     \textcolor{comment}{// tremolo effect has to be deleted, when the amplitude is 1 to avoid an abrupt change in the amplitude}}
\DoxyCodeLine{00618                     \textcolor{keywordflow}{if}(Display.Tremolo\_ONOFF == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{00619                         \mbox{\hyperlink{effects_8h_a050a7ed0cb582067293e423a9c3fd7a9}{effects\_delete}}(TREM);}
\DoxyCodeLine{00620                         Display.last\_Tremolo\_ONOFF = \textcolor{keyword}{false};}
\DoxyCodeLine{00621                     \}}
\DoxyCodeLine{00622                 \}}
\DoxyCodeLine{00623             \}}
\DoxyCodeLine{00624             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00625                 lfo-\/>lfo\_data = LFO[LFO\_ENDINDEX[6]    -\/ lfo-\/>lfo\_index + 1];}
\DoxyCodeLine{00626             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00627         \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{00628             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0)}
\DoxyCodeLine{00629                 lfo-\/>lfo\_data = 0;}
\DoxyCodeLine{00630             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00631                 lfo-\/>lfo\_data = -\/LFO[LFO\_STARTINDEX[6] + lfo-\/>lfo\_index];}
\DoxyCodeLine{00632             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00633         \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{00634             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0) \{}
\DoxyCodeLine{00635                 lfo-\/>lfo\_data = -\/1;}
\DoxyCodeLine{00636             \}}
\DoxyCodeLine{00637             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00638                 lfo-\/>lfo\_data = -\/LFO[LFO\_ENDINDEX[6]   -\/ lfo-\/>lfo\_index + 1];}
\DoxyCodeLine{00639             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00640         \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00641             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00642         \}}
\DoxyCodeLine{00643         lfo-\/>lfo\_index++;}
\DoxyCodeLine{00644 }
\DoxyCodeLine{00645         \textcolor{comment}{// CHECK: if end of quarter is reached, if yes then increment quarter and set index to zero}}
\DoxyCodeLine{00646         \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == LFO\_SUPPORTPOINTS[6]) \{}
\DoxyCodeLine{00647 }
\DoxyCodeLine{00648             lfo-\/>lfo\_index = 0;}
\DoxyCodeLine{00649             lfo-\/>lfo\_quarter++;}
\DoxyCodeLine{00650             \textcolor{keywordflow}{if} (lfo-\/>lfo\_quarter == 4) \{}
\DoxyCodeLine{00651                 lfo-\/>lfo\_quarter = 0;}
\DoxyCodeLine{00652 }
\DoxyCodeLine{00653                 \textcolor{keywordflow}{if}(lfo\_effect == TREMOLO\_LFO) \{}
\DoxyCodeLine{00654                     \textcolor{comment}{// to make sure that the tremolo restarts only when the LFO period is done}}
\DoxyCodeLine{00655                     \textcolor{keywordflow}{if}(Display.Tremolo\_Rate\_Index != Display.last\_Tremolo\_Rate\_Index) \{}
\DoxyCodeLine{00656 }
\DoxyCodeLine{00657                         Display.Tremolo\_Rate = LFO\_FREQUENCYS[Display.Tremolo\_Rate\_Index];}
\DoxyCodeLine{00658                         Display.last\_Tremolo\_Rate\_Index = Display.Tremolo\_Rate\_Index;}
\DoxyCodeLine{00659                         lfo-\/>lfo\_done\_flag = \textcolor{keyword}{true};}
\DoxyCodeLine{00660                         Tremolo.lfo-\/>lfo\_frequency = Display.Tremolo\_Rate;}
\DoxyCodeLine{00661                     \}}
\DoxyCodeLine{00662                 \}}
\DoxyCodeLine{00663                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(lfo\_effect == WAHWAH\_LFO) \{}
\DoxyCodeLine{00664                     \textcolor{comment}{// to make sure that the auto-\/wahwah restarts only when the LFO period is done}}
\DoxyCodeLine{00665                     \textcolor{keywordflow}{if}(Display.WahWah\_LFOfreq\_Index != Display.last\_WahWah\_LFOfreq\_Index) \{}
\DoxyCodeLine{00666 }
\DoxyCodeLine{00667                         Display.WahWah\_LFOfreq = LFO\_FREQUENCYS[Display.WahWah\_LFOfreq\_Index];}
\DoxyCodeLine{00668                         Display.last\_WahWah\_LFOfreq\_Index = Display.WahWah\_LFOfreq\_Index;}
\DoxyCodeLine{00669                         lfo-\/>lfo\_done\_flag = \textcolor{keyword}{true};}
\DoxyCodeLine{00670                         WahWah.lfo-\/>lfo\_frequency = Display.WahWah\_LFOfreq;}
\DoxyCodeLine{00671                     \}}
\DoxyCodeLine{00672                 \}}
\DoxyCodeLine{00673             \}}
\DoxyCodeLine{00674         \}}
\DoxyCodeLine{00675     \}}
\DoxyCodeLine{00676     \textcolor{comment}{// CASE 8: 16 Hz}}
\DoxyCodeLine{00677     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(lfo-\/>lfo\_frequency == LFO\_FREQUENCYS[7]) \{}
\DoxyCodeLine{00678 }
\DoxyCodeLine{00679         \textcolor{keywordflow}{switch}(lfo-\/>lfo\_quarter) \{}
\DoxyCodeLine{00680         \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{00681             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0)}
\DoxyCodeLine{00682                 lfo-\/>lfo\_data = 0;}
\DoxyCodeLine{00683             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00684                 lfo-\/>lfo\_data = LFO[LFO\_STARTINDEX[7]  + lfo-\/>lfo\_index];}
\DoxyCodeLine{00685             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00686         \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{00687             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0) \{}
\DoxyCodeLine{00688                 lfo-\/>lfo\_data = 1;}
\DoxyCodeLine{00689 }
\DoxyCodeLine{00690                 \textcolor{keywordflow}{if}(lfo\_effect == TREMOLO\_LFO) \{}
\DoxyCodeLine{00691                     Tremolo.lfo-\/>lfo\_depth = Display.Tremolo\_Depth; \textcolor{comment}{// tremolo depth has to be updated when the maximum amplitude is reached}}
\DoxyCodeLine{00692                     \textcolor{comment}{// tremolo effect has to be deleted, when the amplitude is 1 to avoid an abrupt change in the amplitude}}
\DoxyCodeLine{00693                     \textcolor{keywordflow}{if}(Display.Tremolo\_ONOFF == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{00694                         \mbox{\hyperlink{effects_8h_a050a7ed0cb582067293e423a9c3fd7a9}{effects\_delete}}(TREM);}
\DoxyCodeLine{00695                         Display.last\_Tremolo\_ONOFF = \textcolor{keyword}{false};}
\DoxyCodeLine{00696                     \}}
\DoxyCodeLine{00697                 \}}
\DoxyCodeLine{00698             \}}
\DoxyCodeLine{00699             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00700                 lfo-\/>lfo\_data = LFO[LFO\_ENDINDEX[7]    -\/ lfo-\/>lfo\_index + 1];}
\DoxyCodeLine{00701             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00702         \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{00703             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0)}
\DoxyCodeLine{00704                 lfo-\/>lfo\_data = 0;}
\DoxyCodeLine{00705             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00706                 lfo-\/>lfo\_data = -\/LFO[LFO\_STARTINDEX[7] + lfo-\/>lfo\_index];}
\DoxyCodeLine{00707             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00708         \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{00709             \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == 0) \{}
\DoxyCodeLine{00710                 lfo-\/>lfo\_data = -\/1;}
\DoxyCodeLine{00711             \}}
\DoxyCodeLine{00712             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00713                 lfo-\/>lfo\_data = -\/LFO[LFO\_ENDINDEX[7]   -\/ lfo-\/>lfo\_index + 1];}
\DoxyCodeLine{00714             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00715         \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00716             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00717         \}}
\DoxyCodeLine{00718         lfo-\/>lfo\_index++;}
\DoxyCodeLine{00719 }
\DoxyCodeLine{00720         \textcolor{comment}{// CHECK: if end of quarter is reached, if yes then increment quarter and set index to zero}}
\DoxyCodeLine{00721         \textcolor{keywordflow}{if}(lfo-\/>lfo\_index == LFO\_SUPPORTPOINTS[7]) \{}
\DoxyCodeLine{00722 }
\DoxyCodeLine{00723             lfo-\/>lfo\_index = 0;}
\DoxyCodeLine{00724             lfo-\/>lfo\_quarter++;}
\DoxyCodeLine{00725             \textcolor{keywordflow}{if} (lfo-\/>lfo\_quarter == 4) \{}
\DoxyCodeLine{00726                 lfo-\/>lfo\_quarter = 0;}
\DoxyCodeLine{00727 }
\DoxyCodeLine{00728                 \textcolor{keywordflow}{if}(lfo\_effect == TREMOLO\_LFO) \{}
\DoxyCodeLine{00729                     \textcolor{comment}{// to make sure that the tremolo restarts only when the LFO period is done}}
\DoxyCodeLine{00730                     \textcolor{keywordflow}{if}(Display.Tremolo\_Rate\_Index != Display.last\_Tremolo\_Rate\_Index) \{}
\DoxyCodeLine{00731 }
\DoxyCodeLine{00732                         Display.Tremolo\_Rate = LFO\_FREQUENCYS[Display.Tremolo\_Rate\_Index];}
\DoxyCodeLine{00733                         Display.last\_Tremolo\_Rate\_Index = Display.Tremolo\_Rate\_Index;}
\DoxyCodeLine{00734                         lfo-\/>lfo\_done\_flag = \textcolor{keyword}{true};}
\DoxyCodeLine{00735                         Tremolo.lfo-\/>lfo\_frequency = Display.Tremolo\_Rate;}
\DoxyCodeLine{00736                     \}}
\DoxyCodeLine{00737                 \}}
\DoxyCodeLine{00738                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(lfo\_effect == WAHWAH\_LFO) \{}
\DoxyCodeLine{00739                     \textcolor{comment}{// to make sure that the auto-\/wahwah restarts only when the LFO period is done}}
\DoxyCodeLine{00740                     \textcolor{keywordflow}{if}(Display.WahWah\_LFOfreq\_Index != Display.last\_WahWah\_LFOfreq\_Index) \{}
\DoxyCodeLine{00741 }
\DoxyCodeLine{00742                         Display.WahWah\_LFOfreq = LFO\_FREQUENCYS[Display.WahWah\_LFOfreq\_Index];}
\DoxyCodeLine{00743                         Display.last\_WahWah\_LFOfreq\_Index = Display.WahWah\_LFOfreq\_Index;}
\DoxyCodeLine{00744                         lfo-\/>lfo\_done\_flag = \textcolor{keyword}{true};}
\DoxyCodeLine{00745                         WahWah.lfo-\/>lfo\_frequency = Display.WahWah\_LFOfreq;}
\DoxyCodeLine{00746                     \}}
\DoxyCodeLine{00747                 \}}
\DoxyCodeLine{00748             \}}
\DoxyCodeLine{00749         \}}
\DoxyCodeLine{00750     \}}
\DoxyCodeLine{00751 \}}

\end{DoxyCode}
\mbox{\Hypertarget{signal__synthesis_8h_a15e519685bb7a5374c0ea7e3b9980952}\label{signal__synthesis_8h_a15e519685bb7a5374c0ea7e3b9980952}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!NewSignal@{NewSignal}}
\index{NewSignal@{NewSignal}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{NewSignal()}{NewSignal()}}
{\footnotesize\ttfamily void New\+Signal (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structsignal__t}{signal\+\_\+t}} $\ast$}]{signals,  }\item[{uint8\+\_\+t}]{kind,  }\item[{uint8\+\_\+t}]{key,  }\item[{uint8\+\_\+t}]{octave,  }\item[{uint8\+\_\+t}]{ID }\end{DoxyParamCaption})}



generates a signal which is processed in the \mbox{\hyperlink{signal__synthesis_8c_a14e563872b7cc3bae6f534d36f016911}{Signal\+\_\+\+Synthesis()}} 

\begin{DoxyNote}{Note}
for more information see siganls struct description
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em signals} & \\
\hline
{\em kind} & \\
\hline
{\em key} & \\
\hline
{\em octave} & \\
\hline
{\em ID} & \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{signal__synthesis_8c_source_l00764}{764}} of file \mbox{\hyperlink{signal__synthesis_8c_source}{signal\+\_\+synthesis.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00764                                                                                                \{}
\DoxyCodeLine{00765 }
\DoxyCodeLine{00766     \textcolor{keywordflow}{if} (signals -\/> count <= \mbox{\hyperlink{signal__synthesis_8h_a74bf0cbaccfba1bf548d482148183a12}{MAX\_SIGNAL\_KOMBINATION}})\{}
\DoxyCodeLine{00767         signals -\/> count += 1;}
\DoxyCodeLine{00768         uint8\_t index = (signals-\/> count)-\/1;}
\DoxyCodeLine{00769         signals -\/> ID[index]= ID;}
\DoxyCodeLine{00770         signals -\/> kind[index] = kind;}
\DoxyCodeLine{00771 }
\DoxyCodeLine{00772         \textcolor{keywordflow}{switch}(kind) \{}
\DoxyCodeLine{00773 }
\DoxyCodeLine{00774         \textcolor{keywordflow}{case} SIN:}
\DoxyCodeLine{00775             signals -\/> freq[index] = \mbox{\hyperlink{music__notes_8h_a3fc1bdf03e12b5dee3aa887f100421bf}{Get\_Note\_Frequency}}(\mbox{\hyperlink{music__notes_8h_a24334366425c42178a955c3c969ad9a8}{Get\_Keyindex}}(\mbox{\hyperlink{music__notes_8c_acad36f7a1211e9e9da68e181667d9c3f}{key}}), octave);}
\DoxyCodeLine{00776             signals -\/> freqIndex[index] = \mbox{\hyperlink{music__notes_8h_a71407d53f2b1100f1ab93dc2681dfe48}{Get\_Note\_Index}}(\mbox{\hyperlink{music__notes_8c_acad36f7a1211e9e9da68e181667d9c3f}{key}},octave);}
\DoxyCodeLine{00777             signals -\/> current\_LUT\_Index[index] = LUT\_STARTINDEX[signals -\/> freqIndex[index]];}
\DoxyCodeLine{00778             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00779 }
\DoxyCodeLine{00780         \textcolor{keywordflow}{case} RECT:}
\DoxyCodeLine{00781             signals -\/> freq[index] = \mbox{\hyperlink{music__notes_8h_a3fc1bdf03e12b5dee3aa887f100421bf}{Get\_Note\_Frequency}}(\mbox{\hyperlink{music__notes_8h_a24334366425c42178a955c3c969ad9a8}{Get\_Keyindex}}(\mbox{\hyperlink{music__notes_8c_acad36f7a1211e9e9da68e181667d9c3f}{key}}), octave);}
\DoxyCodeLine{00782             signals -\/> freqIndex[index] = \mbox{\hyperlink{music__notes_8h_a71407d53f2b1100f1ab93dc2681dfe48}{Get\_Note\_Index}}(\mbox{\hyperlink{music__notes_8c_acad36f7a1211e9e9da68e181667d9c3f}{key}},octave);}
\DoxyCodeLine{00783             signals -\/> current\_LUT\_Index[index] = 0;}
\DoxyCodeLine{00784             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00785 }
\DoxyCodeLine{00786         \textcolor{keywordflow}{case} TRIANGLE:}
\DoxyCodeLine{00787             signals -\/> freq[index] = \mbox{\hyperlink{music__notes_8h_a3fc1bdf03e12b5dee3aa887f100421bf}{Get\_Note\_Frequency}}(\mbox{\hyperlink{music__notes_8h_a24334366425c42178a955c3c969ad9a8}{Get\_Keyindex}}(\mbox{\hyperlink{music__notes_8c_acad36f7a1211e9e9da68e181667d9c3f}{key}}), octave);}
\DoxyCodeLine{00788             signals -\/> freqIndex[index] = \mbox{\hyperlink{music__notes_8h_a71407d53f2b1100f1ab93dc2681dfe48}{Get\_Note\_Index}}(\mbox{\hyperlink{music__notes_8c_acad36f7a1211e9e9da68e181667d9c3f}{key}},octave);}
\DoxyCodeLine{00789             signals -\/> current\_LUT\_Index[index] = 0;}
\DoxyCodeLine{00790             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00791 }
\DoxyCodeLine{00792         \textcolor{keywordflow}{case} NOISE:}
\DoxyCodeLine{00793             signals -\/> freq[index] = 0;}
\DoxyCodeLine{00794             signals -\/> freqIndex[index] = 0;}
\DoxyCodeLine{00795             signals -\/> current\_LUT\_Index[index] = 0;}
\DoxyCodeLine{00796             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00797         \}}
\DoxyCodeLine{00798     \}}
\DoxyCodeLine{00799     signals -\/> max = 1;}
\DoxyCodeLine{00800 \}}

\end{DoxyCode}
\mbox{\Hypertarget{signal__synthesis_8h_a2f9745c8cd2b522e949b4c58cfccce56}\label{signal__synthesis_8h_a2f9745c8cd2b522e949b4c58cfccce56}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!Noise\_Generator@{Noise\_Generator}}
\index{Noise\_Generator@{Noise\_Generator}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{Noise\_Generator()}{Noise\_Generator()}}
{\footnotesize\ttfamily float Noise\+\_\+\+Generator (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



random number generator 

\begin{DoxyReturn}{Returns}
float 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{signal__synthesis_8c_source_l01336}{1336}} of file \mbox{\hyperlink{signal__synthesis_8c_source}{signal\+\_\+synthesis.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{01336                             \{}
\DoxyCodeLine{01337 }
\DoxyCodeLine{01338     \textcolor{keywordtype}{float} NoiseValue = 0;}
\DoxyCodeLine{01339     \textcolor{keywordtype}{float} Noise\_Gain = 0.5;}
\DoxyCodeLine{01340 }
\DoxyCodeLine{01341     \textcolor{keywordflow}{if}(Display.Noise\_ONOFF == \textcolor{keyword}{true})}
\DoxyCodeLine{01342         NoiseValue = (Noise\_Gain*Display.Noise\_Volume*(float)rand()/ (powf(2, 8*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}))) )-\/(Noise\_Gain*Display.Noise\_Volume*0.25); \textcolor{comment}{// Noise Gain = 8}}
\DoxyCodeLine{01343 }
\DoxyCodeLine{01344     \textcolor{keywordflow}{return} NoiseValue;}
\DoxyCodeLine{01345 \}}

\end{DoxyCode}
\mbox{\Hypertarget{signal__synthesis_8h_adc7b4110b68d58532096fe9f817df89c}\label{signal__synthesis_8h_adc7b4110b68d58532096fe9f817df89c}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!SetTimerSettings@{SetTimerSettings}}
\index{SetTimerSettings@{SetTimerSettings}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{SetTimerSettings()}{SetTimerSettings()}}
{\footnotesize\ttfamily void Set\+Timer\+Settings (\begin{DoxyParamCaption}\item[{TIM\+\_\+\+Handle\+Type\+Def $\ast$}]{htim,  }\item[{uint32\+\_\+t}]{SR }\end{DoxyParamCaption})}



Init funtion for the Timer which triggers the DAC, this function sets the timerperiode and presacaler. 


\begin{DoxyParams}{Parameters}
{\em htim} & timer-\/handler which controls the DAC, timer have to be connected with DAC \\
\hline
{\em SR} & Sample Rate \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{signal__synthesis_8c_source_l00093}{93}} of file \mbox{\hyperlink{signal__synthesis_8c_source}{signal\+\_\+synthesis.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00093                                                             \{}
\DoxyCodeLine{00094 }
\DoxyCodeLine{00095     \textcolor{comment}{// Clock Sources of all 14 timers: 1 = APB1, 2 = APB2}}
\DoxyCodeLine{00096     uint8\_t APBTimerCases[] = \{2,1,1,1,1,1,1,2,2,2,2,1,1,1\};}
\DoxyCodeLine{00097     uint8\_t Timer = 0;}
\DoxyCodeLine{00098     uint32\_t Clock = 0;}
\DoxyCodeLine{00099 }
\DoxyCodeLine{00100     \textcolor{keywordflow}{if}(htim-\/>Instance == TIM1) Timer = 1;}
\DoxyCodeLine{00101     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(htim-\/>Instance == TIM2) Timer = 2;}
\DoxyCodeLine{00102     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(htim-\/>Instance == TIM3) Timer = 3;}
\DoxyCodeLine{00103     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(htim-\/>Instance == TIM4) Timer = 4;}
\DoxyCodeLine{00104     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(htim-\/>Instance == TIM5) Timer = 5;}
\DoxyCodeLine{00105     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(htim-\/>Instance == TIM6) Timer = 6;}
\DoxyCodeLine{00106     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(htim-\/>Instance == TIM7) Timer = 7;}
\DoxyCodeLine{00107     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(htim-\/>Instance == TIM8) Timer = 8;}
\DoxyCodeLine{00108     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(htim-\/>Instance == TIM9) Timer = 9;}
\DoxyCodeLine{00109     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(htim-\/>Instance == TIM10) Timer = 10;}
\DoxyCodeLine{00110     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(htim-\/>Instance == TIM11) Timer = 11;}
\DoxyCodeLine{00111     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(htim-\/>Instance == TIM12) Timer = 12;}
\DoxyCodeLine{00112     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(htim-\/>Instance == TIM13) Timer = 13;}
\DoxyCodeLine{00113     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(htim-\/>Instance == TIM14) Timer = 14;}
\DoxyCodeLine{00114 }
\DoxyCodeLine{00115     \textcolor{keywordflow}{if}(APBTimerCases[Timer-\/1] == 1)}
\DoxyCodeLine{00116         Clock = 2 * HAL\_RCC\_GetPCLK1Freq(); \textcolor{comment}{// APB1 Timer Clock}}
\DoxyCodeLine{00117 }
\DoxyCodeLine{00118     \textcolor{keywordflow}{if}(APBTimerCases[Timer-\/1] == 2)}
\DoxyCodeLine{00119         Clock = 2 * HAL\_RCC\_GetPCLK2Freq(); \textcolor{comment}{// APB2 Timer Clock}}
\DoxyCodeLine{00120 }
\DoxyCodeLine{00121     uint32\_t values\_length = 65536;}
\DoxyCodeLine{00122     uint16\_t prescaler;}
\DoxyCodeLine{00123     uint32\_t timerperiod = 0;}
\DoxyCodeLine{00124 }
\DoxyCodeLine{00125     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=1; i<values\_length; i++) \{}
\DoxyCodeLine{00126 }
\DoxyCodeLine{00127         prescaler = fmod(Clock, i); \textcolor{comment}{// modulo-\/operation}}
\DoxyCodeLine{00128         \textcolor{keywordflow}{if}(prescaler == 0) \{\textcolor{comment}{// find possible prescaler Values}}
\DoxyCodeLine{00129             prescaler = i;}
\DoxyCodeLine{00130             timerperiod = Clock/( prescaler * SR );\textcolor{comment}{//set timerperiod}}
\DoxyCodeLine{00131             \textcolor{keywordflow}{if} (timerperiod < values\_length)\{}
\DoxyCodeLine{00132                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{00133             \}}
\DoxyCodeLine{00134         \}}
\DoxyCodeLine{00135     \}\textcolor{comment}{//end for-\/loop}}
\DoxyCodeLine{00136 }
\DoxyCodeLine{00137     \_\_HAL\_TIM\_SET\_AUTORELOAD(htim, timerperiod-\/1);  \textcolor{comment}{// update timer settings}}
\DoxyCodeLine{00138     \_\_HAL\_TIM\_SET\_PRESCALER(htim, prescaler-\/1);}
\DoxyCodeLine{00139 \}}

\end{DoxyCode}
\mbox{\Hypertarget{signal__synthesis_8h_a14e563872b7cc3bae6f534d36f016911}\label{signal__synthesis_8h_a14e563872b7cc3bae6f534d36f016911}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!Signal\_Synthesis@{Signal\_Synthesis}}
\index{Signal\_Synthesis@{Signal\_Synthesis}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{Signal\_Synthesis()}{Signal\_Synthesis()}}
{\footnotesize\ttfamily void Signal\+\_\+\+Synthesis (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structsignal__t}{signal\+\_\+t}} $\ast$}]{signals,  }\item[{uint8\+\_\+t}]{output\+\_\+\+Channel }\end{DoxyParamCaption})}



generates a digital signal in the calculate\+\_\+vector, depending on the signals inside the struct signals1. To add signals use New\+Signal and to delete signals use Delete\+Signal 


\begin{DoxyParams}{Parameters}
{\em signal} & is a \mbox{\hyperlink{structsignal__t}{signal\+\_\+t}} struct which contains the tones to be played \\
\hline
{\em output\+\_\+\+Channel} & decides if the Array connected to the DAC Channel one is filled or the array connected with the DAC channel two is filled \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Channel 1 is connected to calculate\+\_\+vector1 and Channel 2 connected to calculate\+\_\+vector2 
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{signal__synthesis_8c_source_l00847}{847}} of file \mbox{\hyperlink{signal__synthesis_8c_source}{signal\+\_\+synthesis.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00847                                                                       \{}
\DoxyCodeLine{00848 }
\DoxyCodeLine{00849     \textcolor{comment}{//Variables}}
\DoxyCodeLine{00850     \textcolor{keywordtype}{float} addValue=0;}
\DoxyCodeLine{00851     uint8\_t count = signals -\/> count;}
\DoxyCodeLine{00852 }
\DoxyCodeLine{00853     \textcolor{comment}{// decide if Channel 1 or Channel 2}}
\DoxyCodeLine{00854     \textcolor{keywordtype}{float}* calculate\_vector\_tmp = 0; \textcolor{comment}{// working array}}
\DoxyCodeLine{00855 }
\DoxyCodeLine{00856     \textcolor{keywordflow}{if}(output\_Channel == 1) \{}
\DoxyCodeLine{00857         calculate\_vector\_tmp = \mbox{\hyperlink{main_8h_a25be00c869033fae5b8206c20aeb3861}{calculate\_vector1}};}
\DoxyCodeLine{00858     \}}
\DoxyCodeLine{00859     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(output\_Channel == 2) \{}
\DoxyCodeLine{00860         calculate\_vector\_tmp = calculate\_vector2;}
\DoxyCodeLine{00861     \}}
\DoxyCodeLine{00862 }
\DoxyCodeLine{00863     \textcolor{comment}{// decide if first half of BLOCKSIZE or second half}}
\DoxyCodeLine{00864     uint16\_t BLOOCKSIZE\_startIndex = 0, BLOOCKSIZE\_endIndex = 0;}
\DoxyCodeLine{00865     \textcolor{keywordflow}{if} (\mbox{\hyperlink{signal__synthesis_8h_a5b4caaf313594423ca462cb11a33eca9}{outputBuffer\_position}} == HALF\_BLOCK)\{}
\DoxyCodeLine{00866         BLOOCKSIZE\_startIndex = 0;}
\DoxyCodeLine{00867         BLOOCKSIZE\_endIndex = \mbox{\hyperlink{main_8h_afcf795f5a96fd55561abe69f56224630}{BLOCKSIZE}}/2;}
\DoxyCodeLine{00868     \}}
\DoxyCodeLine{00869     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\mbox{\hyperlink{signal__synthesis_8h_a5b4caaf313594423ca462cb11a33eca9}{outputBuffer\_position}} == FULL\_BLOCK)\{}
\DoxyCodeLine{00870         BLOOCKSIZE\_startIndex = \mbox{\hyperlink{main_8h_afcf795f5a96fd55561abe69f56224630}{BLOCKSIZE}}/2;}
\DoxyCodeLine{00871         BLOOCKSIZE\_endIndex  = \mbox{\hyperlink{main_8h_afcf795f5a96fd55561abe69f56224630}{BLOCKSIZE}};}
\DoxyCodeLine{00872     \}}
\DoxyCodeLine{00873 }
\DoxyCodeLine{00874     \textcolor{comment}{// Loop for signal synthesis}}
\DoxyCodeLine{00875     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} BLOCKSIZE\_counter = BLOOCKSIZE\_startIndex; BLOCKSIZE\_counter < BLOOCKSIZE\_endIndex; BLOCKSIZE\_counter++) \{}
\DoxyCodeLine{00876 }
\DoxyCodeLine{00877         addValue = 0;}
\DoxyCodeLine{00878 }
\DoxyCodeLine{00879         calculate\_keyboard[0] = 0;}
\DoxyCodeLine{00880         calculate\_keyboard[1] = 0;}
\DoxyCodeLine{00881         calculate\_keyboard[2] = 0;}
\DoxyCodeLine{00882         calculate\_keyboard[3] = 0;}
\DoxyCodeLine{00883         calculate\_keyboard[4] = 0;}
\DoxyCodeLine{00884 }
\DoxyCodeLine{00885         \textcolor{comment}{// Loop to reach all Signals}}
\DoxyCodeLine{00886         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j=0; j<count; j++) \{}
\DoxyCodeLine{00887 }
\DoxyCodeLine{00888             \textcolor{keywordflow}{switch} (signals-\/>kind[j]) \{}
\DoxyCodeLine{00889 }
\DoxyCodeLine{00890             \textcolor{keywordflow}{case} SIN:}
\DoxyCodeLine{00891                 \textcolor{comment}{// adds all SIN values from the signals to addValue}}
\DoxyCodeLine{00892                 addValue = addValue + LUT[signals -\/> current\_LUT\_Index[j]];}
\DoxyCodeLine{00893                 }
\DoxyCodeLine{00894                 \textcolor{comment}{// get index for the next sin value}}
\DoxyCodeLine{00895                 signals-\/>current\_LUT\_Index[j]++;}
\DoxyCodeLine{00896 }
\DoxyCodeLine{00897                 \textcolor{keywordflow}{if} (signals-\/>current\_LUT\_Index[j] > LUT\_ENDINDEX[signals-\/>freqIndex[j]]) \{}
\DoxyCodeLine{00898 }
\DoxyCodeLine{00899                     signals-\/>current\_LUT\_Index[j] = LUT\_STARTINDEX[signals-\/>freqIndex[j]];}
\DoxyCodeLine{00900 }
\DoxyCodeLine{00901                     \textcolor{comment}{// create voice signals (maximum 3) to avoid plop sound if note or octave is varied}}
\DoxyCodeLine{00902                     \textcolor{comment}{// this has to be done here to process the change immediately when the index is}}
\DoxyCodeLine{00903                     \textcolor{keywordflow}{if}(signals-\/>ID[j] == VOICES\_ID) \{}
\DoxyCodeLine{00904 }
\DoxyCodeLine{00905                         \textcolor{keywordflow}{if}(Display.last\_Voices\_Note[VOICES\_ID] != Display.Voices\_Note[VOICES\_ID]) \{}
\DoxyCodeLine{00906                             \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID));}
\DoxyCodeLine{00907                             \mbox{\hyperlink{signal__synthesis_8c_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(\&signals1, SIN, Display.Voices\_Note[VOICES\_ID], Display.Voices\_Octave[VOICES\_ID],VOICES\_ID);}
\DoxyCodeLine{00908                             Display.last\_Voices\_Note[VOICES\_ID] = Display.Voices\_Note[VOICES\_ID];}
\DoxyCodeLine{00909                         \}}
\DoxyCodeLine{00910                         \textcolor{keywordflow}{if}(Display.last\_Voices\_Octave[VOICES\_ID] != Display.Voices\_Octave[VOICES\_ID]) \{}
\DoxyCodeLine{00911                             \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID));}
\DoxyCodeLine{00912                             \mbox{\hyperlink{signal__synthesis_8c_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(\&signals1, SIN, Display.Voices\_Note[VOICES\_ID], Display.Voices\_Octave[VOICES\_ID],VOICES\_ID);}
\DoxyCodeLine{00913                             Display.last\_Voices\_Octave[VOICES\_ID] = Display.Voices\_Octave[VOICES\_ID];}
\DoxyCodeLine{00914                         \}}
\DoxyCodeLine{00915                     \}}
\DoxyCodeLine{00916                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(signals-\/>ID[j] == VOICES\_ID+1) \{}
\DoxyCodeLine{00917 }
\DoxyCodeLine{00918                         \textcolor{keywordflow}{if}(Display.last\_Voices\_Note[VOICES\_ID+1] != Display.Voices\_Note[VOICES\_ID+1]) \{}
\DoxyCodeLine{00919                             \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID+1));}
\DoxyCodeLine{00920                             \mbox{\hyperlink{signal__synthesis_8c_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(\&signals1, SIN, Display.Voices\_Note[VOICES\_ID+1], Display.Voices\_Octave[VOICES\_ID+1],VOICES\_ID+1);}
\DoxyCodeLine{00921                             Display.last\_Voices\_Note[VOICES\_ID+1] = Display.Voices\_Note[VOICES\_ID+1];}
\DoxyCodeLine{00922                         \}}
\DoxyCodeLine{00923                         \textcolor{keywordflow}{if}(Display.last\_Voices\_Octave[VOICES\_ID+1] != Display.Voices\_Octave[VOICES\_ID+1]) \{}
\DoxyCodeLine{00924                             \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID+1));}
\DoxyCodeLine{00925                             \mbox{\hyperlink{signal__synthesis_8c_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(\&signals1, SIN, Display.Voices\_Note[VOICES\_ID+1], Display.Voices\_Octave[VOICES\_ID+1],VOICES\_ID+1);}
\DoxyCodeLine{00926                             Display.last\_Voices\_Octave[VOICES\_ID+1] = Display.Voices\_Octave[VOICES\_ID+1];}
\DoxyCodeLine{00927                         \}}
\DoxyCodeLine{00928                     \}}
\DoxyCodeLine{00929                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(signals-\/>ID[j] == VOICES\_ID+2) \{}
\DoxyCodeLine{00930 }
\DoxyCodeLine{00931                         \textcolor{keywordflow}{if}(Display.last\_Voices\_Note[VOICES\_ID+2] != Display.Voices\_Note[VOICES\_ID+2]) \{}
\DoxyCodeLine{00932                             \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID+2));}
\DoxyCodeLine{00933                             \mbox{\hyperlink{signal__synthesis_8c_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(\&signals1, SIN, Display.Voices\_Note[VOICES\_ID+2], Display.Voices\_Octave[VOICES\_ID+2],VOICES\_ID+2);}
\DoxyCodeLine{00934                             Display.last\_Voices\_Note[VOICES\_ID+2] = Display.Voices\_Note[VOICES\_ID+2];}
\DoxyCodeLine{00935                         \}}
\DoxyCodeLine{00936                         \textcolor{keywordflow}{if}(Display.last\_Voices\_Octave[VOICES\_ID+2] != Display.Voices\_Octave[VOICES\_ID+2]) \{}
\DoxyCodeLine{00937                             \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID+2));}
\DoxyCodeLine{00938                             \mbox{\hyperlink{signal__synthesis_8c_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(\&signals1, SIN, Display.Voices\_Note[VOICES\_ID+2], Display.Voices\_Octave[VOICES\_ID+2],VOICES\_ID+2);}
\DoxyCodeLine{00939                             Display.last\_Voices\_Octave[VOICES\_ID+2] = Display.Voices\_Octave[VOICES\_ID+2];}
\DoxyCodeLine{00940                         \}}
\DoxyCodeLine{00941                     \}}
\DoxyCodeLine{00942                     \textcolor{comment}{// delete signal if voice off}}
\DoxyCodeLine{00943                     \textcolor{keywordflow}{if}(Display.Voices\_ONOFF[VOICES\_ID]==\textcolor{keyword}{false} \&\& Display.Voices\_Created[VOICES\_ID] == \textcolor{keyword}{true}) \{}
\DoxyCodeLine{00944                         \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID));}
\DoxyCodeLine{00945                         Display.Voices\_Created[VOICES\_ID] = \textcolor{keyword}{false};}
\DoxyCodeLine{00946                     \}}
\DoxyCodeLine{00947                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(Display.Voices\_ONOFF[VOICES\_ID+1]==\textcolor{keyword}{false} \&\& Display.Voices\_Created[VOICES\_ID+1] == \textcolor{keyword}{true}) \{}
\DoxyCodeLine{00948                         \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID+1));}
\DoxyCodeLine{00949                         Display.Voices\_Created[VOICES\_ID+1] = \textcolor{keyword}{false};}
\DoxyCodeLine{00950                     \}}
\DoxyCodeLine{00951                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(Display.Voices\_ONOFF[VOICES\_ID+2]==\textcolor{keyword}{false} \&\& Display.Voices\_Created[VOICES\_ID+2] == \textcolor{keyword}{true}) \{}
\DoxyCodeLine{00952                         \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID+2));}
\DoxyCodeLine{00953                         Display.Voices\_Created[VOICES\_ID+2] = \textcolor{keyword}{false};}
\DoxyCodeLine{00954                     \}}
\DoxyCodeLine{00955                 \}}
\DoxyCodeLine{00956                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{00957 }
\DoxyCodeLine{00958             \textcolor{keywordflow}{case} RECT:}
\DoxyCodeLine{00959                 \textcolor{comment}{// keyboard signals}}
\DoxyCodeLine{00960                 \textcolor{keywordflow}{if}(signals-\/>ID[j] == KEYBOARD\_VOICE\_ID)\{}
\DoxyCodeLine{00961                     calculate\_keyboard[0] = \mbox{\hyperlink{signal__synthesis_8c_a2b8c4b7d554c97fbb68f2226c8202acd}{CalcRectSample}}(signals, j);}
\DoxyCodeLine{00962                 \}}
\DoxyCodeLine{00963                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(signals-\/>ID[j] == KEYBOARD\_VOICE\_ID+1)\{}
\DoxyCodeLine{00964                     calculate\_keyboard[1] = \mbox{\hyperlink{signal__synthesis_8c_a2b8c4b7d554c97fbb68f2226c8202acd}{CalcRectSample}}(signals, j);}
\DoxyCodeLine{00965                 \}}
\DoxyCodeLine{00966                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(signals-\/>ID[j] == KEYBOARD\_VOICE\_ID+2)\{}
\DoxyCodeLine{00967                     calculate\_keyboard[2] = \mbox{\hyperlink{signal__synthesis_8c_a2b8c4b7d554c97fbb68f2226c8202acd}{CalcRectSample}}(signals, j);}
\DoxyCodeLine{00968                 \}}
\DoxyCodeLine{00969                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(signals-\/>ID[j] == KEYBOARD\_VOICE\_ID+3)\{}
\DoxyCodeLine{00970                     calculate\_keyboard[3] = \mbox{\hyperlink{signal__synthesis_8c_a2b8c4b7d554c97fbb68f2226c8202acd}{CalcRectSample}}(signals, j);}
\DoxyCodeLine{00971                 \}}
\DoxyCodeLine{00972                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(signals-\/>ID[j] == KEYBOARD\_VOICE\_ID+4)\{}
\DoxyCodeLine{00973                     calculate\_keyboard[4] = \mbox{\hyperlink{signal__synthesis_8c_a2b8c4b7d554c97fbb68f2226c8202acd}{CalcRectSample}}(signals, j);}
\DoxyCodeLine{00974                 \}}
\DoxyCodeLine{00975                 \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{00976                     \textcolor{comment}{// adds all RECT values from the signals to addValue}}
\DoxyCodeLine{00977                     addValue = addValue + \mbox{\hyperlink{signal__synthesis_8c_a2b8c4b7d554c97fbb68f2226c8202acd}{CalcRectSample}}(signals, j);}
\DoxyCodeLine{00978                 \}}
\DoxyCodeLine{00979 }
\DoxyCodeLine{00980                 \textcolor{comment}{// get index for the next rect value}}
\DoxyCodeLine{00981                 signals-\/>current\_LUT\_Index[j]++;}
\DoxyCodeLine{00982 }
\DoxyCodeLine{00983                 \textcolor{keywordflow}{if} (signals-\/>current\_LUT\_Index[j] >= LUT\_SUPPORTPOINTS[signals-\/>freqIndex[j]]) \{}
\DoxyCodeLine{00984 }
\DoxyCodeLine{00985                     signals-\/>current\_LUT\_Index[j] = 0;}
\DoxyCodeLine{00986 }
\DoxyCodeLine{00987                     \textcolor{comment}{// create voice signals (maximum 3) to avoid plop sound if note or octave is varied}}
\DoxyCodeLine{00988                     \textcolor{comment}{// this has to be done here to process the change immediately when the index is}}
\DoxyCodeLine{00989                     \textcolor{keywordflow}{if}(signals-\/>ID[j] == VOICES\_ID) \{}
\DoxyCodeLine{00990 }
\DoxyCodeLine{00991                         \textcolor{keywordflow}{if}(Display.last\_Voices\_Note[VOICES\_ID] != Display.Voices\_Note[VOICES\_ID]) \{}
\DoxyCodeLine{00992                             \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID));}
\DoxyCodeLine{00993                             \mbox{\hyperlink{signal__synthesis_8c_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(\&signals1, RECT, Display.Voices\_Note[VOICES\_ID], Display.Voices\_Octave[VOICES\_ID],VOICES\_ID);}
\DoxyCodeLine{00994                             Display.last\_Voices\_Note[VOICES\_ID] = Display.Voices\_Note[VOICES\_ID];}
\DoxyCodeLine{00995                         \}}
\DoxyCodeLine{00996                         \textcolor{keywordflow}{if}(Display.last\_Voices\_Octave[VOICES\_ID] != Display.Voices\_Octave[VOICES\_ID]) \{}
\DoxyCodeLine{00997                             \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID));}
\DoxyCodeLine{00998                             \mbox{\hyperlink{signal__synthesis_8c_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(\&signals1, RECT, Display.Voices\_Note[VOICES\_ID], Display.Voices\_Octave[VOICES\_ID],VOICES\_ID);}
\DoxyCodeLine{00999                             Display.last\_Voices\_Octave[VOICES\_ID] = Display.Voices\_Octave[VOICES\_ID];}
\DoxyCodeLine{01000                         \}}
\DoxyCodeLine{01001                     \}}
\DoxyCodeLine{01002                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(signals-\/>ID[j] == VOICES\_ID+1) \{}
\DoxyCodeLine{01003 }
\DoxyCodeLine{01004                         \textcolor{keywordflow}{if}(Display.last\_Voices\_Note[VOICES\_ID+1] != Display.Voices\_Note[VOICES\_ID+1]) \{}
\DoxyCodeLine{01005                             \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID+1));}
\DoxyCodeLine{01006                             \mbox{\hyperlink{signal__synthesis_8c_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(\&signals1, RECT, Display.Voices\_Note[VOICES\_ID+1], Display.Voices\_Octave[VOICES\_ID+1],VOICES\_ID+1);}
\DoxyCodeLine{01007                             Display.last\_Voices\_Note[VOICES\_ID+1] = Display.Voices\_Note[VOICES\_ID+1];}
\DoxyCodeLine{01008                         \}}
\DoxyCodeLine{01009                         \textcolor{keywordflow}{if}(Display.last\_Voices\_Octave[VOICES\_ID+1] != Display.Voices\_Octave[VOICES\_ID+1]) \{}
\DoxyCodeLine{01010                             \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID+1));}
\DoxyCodeLine{01011                             \mbox{\hyperlink{signal__synthesis_8c_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(\&signals1, RECT, Display.Voices\_Note[VOICES\_ID+1], Display.Voices\_Octave[VOICES\_ID+1],VOICES\_ID+1);}
\DoxyCodeLine{01012                             Display.last\_Voices\_Octave[VOICES\_ID+1] = Display.Voices\_Octave[VOICES\_ID+1];}
\DoxyCodeLine{01013                         \}}
\DoxyCodeLine{01014                     \}}
\DoxyCodeLine{01015                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(signals-\/>ID[j] == VOICES\_ID+2) \{}
\DoxyCodeLine{01016 }
\DoxyCodeLine{01017                         \textcolor{keywordflow}{if}(Display.last\_Voices\_Note[VOICES\_ID+2] != Display.Voices\_Note[VOICES\_ID+2]) \{}
\DoxyCodeLine{01018                             \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID+2));}
\DoxyCodeLine{01019                             \mbox{\hyperlink{signal__synthesis_8c_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(\&signals1, RECT, Display.Voices\_Note[VOICES\_ID+2], Display.Voices\_Octave[VOICES\_ID+2],VOICES\_ID+2);}
\DoxyCodeLine{01020                             Display.last\_Voices\_Note[VOICES\_ID+2] = Display.Voices\_Note[VOICES\_ID+2];}
\DoxyCodeLine{01021                         \}}
\DoxyCodeLine{01022                         \textcolor{keywordflow}{if}(Display.last\_Voices\_Octave[VOICES\_ID+2] != Display.Voices\_Octave[VOICES\_ID+2]) \{}
\DoxyCodeLine{01023                             \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID+2));}
\DoxyCodeLine{01024                             \mbox{\hyperlink{signal__synthesis_8c_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(\&signals1, RECT, Display.Voices\_Note[VOICES\_ID+2], Display.Voices\_Octave[VOICES\_ID+2],VOICES\_ID+2);}
\DoxyCodeLine{01025                             Display.last\_Voices\_Octave[VOICES\_ID+2] = Display.Voices\_Octave[VOICES\_ID+2];}
\DoxyCodeLine{01026                         \}}
\DoxyCodeLine{01027                     \}}
\DoxyCodeLine{01028                     \textcolor{comment}{// delete signal if voice off}}
\DoxyCodeLine{01029                     \textcolor{keywordflow}{if}(Display.Voices\_ONOFF[VOICES\_ID]==\textcolor{keyword}{false} \&\& Display.Voices\_Created[VOICES\_ID] == \textcolor{keyword}{true}) \{}
\DoxyCodeLine{01030                         \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID));}
\DoxyCodeLine{01031                         Display.Voices\_Created[VOICES\_ID] = \textcolor{keyword}{false};}
\DoxyCodeLine{01032                     \}}
\DoxyCodeLine{01033                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(Display.Voices\_ONOFF[VOICES\_ID+1]==\textcolor{keyword}{false} \&\& Display.Voices\_Created[VOICES\_ID+1] == \textcolor{keyword}{true}) \{}
\DoxyCodeLine{01034                         \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID+1));}
\DoxyCodeLine{01035                         Display.Voices\_Created[VOICES\_ID+1] = \textcolor{keyword}{false};}
\DoxyCodeLine{01036                     \}}
\DoxyCodeLine{01037                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(Display.Voices\_ONOFF[VOICES\_ID+2]==\textcolor{keyword}{false} \&\& Display.Voices\_Created[VOICES\_ID+2] == \textcolor{keyword}{true}) \{}
\DoxyCodeLine{01038                         \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID+2));}
\DoxyCodeLine{01039                         Display.Voices\_Created[VOICES\_ID+2] = \textcolor{keyword}{false};}
\DoxyCodeLine{01040                     \}}
\DoxyCodeLine{01041                 \}}
\DoxyCodeLine{01042                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{01043 }
\DoxyCodeLine{01044             \textcolor{keywordflow}{case} TRIANGLE:}
\DoxyCodeLine{01045                 \textcolor{comment}{// keyboard signals}}
\DoxyCodeLine{01046                 \textcolor{keywordflow}{if}(signals-\/>ID[j] == KEYBOARD\_VOICE\_ID)\{}
\DoxyCodeLine{01047                     calculate\_keyboard[0] = \mbox{\hyperlink{signal__synthesis_8c_abeac1ddb99c3d1374df2dc163a756072}{CalcTriangleSample}}(signals, j);}
\DoxyCodeLine{01048                 \}}
\DoxyCodeLine{01049                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(signals-\/>ID[j] == KEYBOARD\_VOICE\_ID+1)\{}
\DoxyCodeLine{01050                     calculate\_keyboard[1] = \mbox{\hyperlink{signal__synthesis_8c_abeac1ddb99c3d1374df2dc163a756072}{CalcTriangleSample}}(signals, j);}
\DoxyCodeLine{01051                 \}}
\DoxyCodeLine{01052                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(signals-\/>ID[j] == KEYBOARD\_VOICE\_ID+2)\{}
\DoxyCodeLine{01053                     calculate\_keyboard[2] = \mbox{\hyperlink{signal__synthesis_8c_abeac1ddb99c3d1374df2dc163a756072}{CalcTriangleSample}}(signals, j);}
\DoxyCodeLine{01054                 \}}
\DoxyCodeLine{01055                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(signals-\/>ID[j] == KEYBOARD\_VOICE\_ID+3)\{}
\DoxyCodeLine{01056                     calculate\_keyboard[3] = \mbox{\hyperlink{signal__synthesis_8c_abeac1ddb99c3d1374df2dc163a756072}{CalcTriangleSample}}(signals, j);}
\DoxyCodeLine{01057                 \}}
\DoxyCodeLine{01058                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(signals-\/>ID[j] == KEYBOARD\_VOICE\_ID+4)\{}
\DoxyCodeLine{01059                     calculate\_keyboard[4] = \mbox{\hyperlink{signal__synthesis_8c_abeac1ddb99c3d1374df2dc163a756072}{CalcTriangleSample}}(signals, j);}
\DoxyCodeLine{01060                 \}}
\DoxyCodeLine{01061                 \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{01062                     \textcolor{comment}{// adds all TRIANGLE values from the signals to addValue}}
\DoxyCodeLine{01063                     addValue = addValue + \mbox{\hyperlink{signal__synthesis_8c_abeac1ddb99c3d1374df2dc163a756072}{CalcTriangleSample}}(signals, j);}
\DoxyCodeLine{01064                 \}}
\DoxyCodeLine{01065                 \textcolor{comment}{// get index for the next triangle value}}
\DoxyCodeLine{01066                 signals-\/>current\_LUT\_Index[j]++;}
\DoxyCodeLine{01067 }
\DoxyCodeLine{01068                 \textcolor{keywordflow}{if} (signals-\/>current\_LUT\_Index[j] >= LUT\_SUPPORTPOINTS[signals-\/>freqIndex[j]]) \{}
\DoxyCodeLine{01069 }
\DoxyCodeLine{01070                     signals-\/>current\_LUT\_Index[j] = 0;}
\DoxyCodeLine{01071 }
\DoxyCodeLine{01072                     \textcolor{comment}{// create voice signals (maximum 3) to avoid plop sound if note or octave is varied}}
\DoxyCodeLine{01073                     \textcolor{comment}{// this has to be done here to process the change immediately when the index is}}
\DoxyCodeLine{01074                     \textcolor{keywordflow}{if}(signals-\/>ID[j] == VOICES\_ID) \{}
\DoxyCodeLine{01075 }
\DoxyCodeLine{01076                         \textcolor{keywordflow}{if}(Display.last\_Voices\_Note[VOICES\_ID] != Display.Voices\_Note[VOICES\_ID]) \{}
\DoxyCodeLine{01077                             \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID));}
\DoxyCodeLine{01078                             \mbox{\hyperlink{signal__synthesis_8c_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(\&signals1, TRIANGLE, Display.Voices\_Note[VOICES\_ID], Display.Voices\_Octave[VOICES\_ID],VOICES\_ID);}
\DoxyCodeLine{01079                             Display.last\_Voices\_Note[VOICES\_ID] = Display.Voices\_Note[VOICES\_ID];}
\DoxyCodeLine{01080                         \}}
\DoxyCodeLine{01081                         \textcolor{keywordflow}{if}(Display.last\_Voices\_Octave[VOICES\_ID] != Display.Voices\_Octave[VOICES\_ID]) \{}
\DoxyCodeLine{01082                             \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID));}
\DoxyCodeLine{01083                             \mbox{\hyperlink{signal__synthesis_8c_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(\&signals1, TRIANGLE, Display.Voices\_Note[VOICES\_ID], Display.Voices\_Octave[VOICES\_ID],VOICES\_ID);}
\DoxyCodeLine{01084                             Display.last\_Voices\_Octave[VOICES\_ID] = Display.Voices\_Octave[VOICES\_ID];}
\DoxyCodeLine{01085                         \}}
\DoxyCodeLine{01086                     \}}
\DoxyCodeLine{01087                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(signals-\/>ID[j] == VOICES\_ID+1) \{}
\DoxyCodeLine{01088 }
\DoxyCodeLine{01089                         \textcolor{keywordflow}{if}(Display.last\_Voices\_Note[VOICES\_ID+1] != Display.Voices\_Note[VOICES\_ID+1]) \{}
\DoxyCodeLine{01090                             \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID+1));}
\DoxyCodeLine{01091                             \mbox{\hyperlink{signal__synthesis_8c_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(\&signals1, TRIANGLE, Display.Voices\_Note[VOICES\_ID+1], Display.Voices\_Octave[VOICES\_ID+1],VOICES\_ID+1);}
\DoxyCodeLine{01092                             Display.last\_Voices\_Note[VOICES\_ID+1] = Display.Voices\_Note[VOICES\_ID+1];}
\DoxyCodeLine{01093                         \}}
\DoxyCodeLine{01094                         \textcolor{keywordflow}{if}(Display.last\_Voices\_Octave[VOICES\_ID+1] != Display.Voices\_Octave[VOICES\_ID+1]) \{}
\DoxyCodeLine{01095                             \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID+1));}
\DoxyCodeLine{01096                             \mbox{\hyperlink{signal__synthesis_8c_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(\&signals1, TRIANGLE, Display.Voices\_Note[VOICES\_ID+1], Display.Voices\_Octave[VOICES\_ID+1],VOICES\_ID+1);}
\DoxyCodeLine{01097                             Display.last\_Voices\_Octave[VOICES\_ID+1] = Display.Voices\_Octave[VOICES\_ID+1];}
\DoxyCodeLine{01098                         \}}
\DoxyCodeLine{01099                     \}}
\DoxyCodeLine{01100                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(signals-\/>ID[j] == VOICES\_ID+2) \{}
\DoxyCodeLine{01101 }
\DoxyCodeLine{01102                         \textcolor{keywordflow}{if}(Display.last\_Voices\_Note[VOICES\_ID+2] != Display.Voices\_Note[VOICES\_ID+2]) \{}
\DoxyCodeLine{01103                             \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID+2));}
\DoxyCodeLine{01104                             \mbox{\hyperlink{signal__synthesis_8c_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(\&signals1, TRIANGLE, Display.Voices\_Note[VOICES\_ID+2], Display.Voices\_Octave[VOICES\_ID+2],VOICES\_ID+2);}
\DoxyCodeLine{01105                             Display.last\_Voices\_Note[VOICES\_ID+2] = Display.Voices\_Note[VOICES\_ID+2];}
\DoxyCodeLine{01106                         \}}
\DoxyCodeLine{01107                         \textcolor{keywordflow}{if}(Display.last\_Voices\_Octave[VOICES\_ID+2] != Display.Voices\_Octave[VOICES\_ID+2]) \{}
\DoxyCodeLine{01108                             \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID+2));}
\DoxyCodeLine{01109                             \mbox{\hyperlink{signal__synthesis_8c_a15e519685bb7a5374c0ea7e3b9980952}{NewSignal}}(\&signals1, TRIANGLE, Display.Voices\_Note[VOICES\_ID+2], Display.Voices\_Octave[VOICES\_ID+2],VOICES\_ID+2);}
\DoxyCodeLine{01110                             Display.last\_Voices\_Octave[VOICES\_ID+2] = Display.Voices\_Octave[VOICES\_ID+2];}
\DoxyCodeLine{01111                         \}}
\DoxyCodeLine{01112                     \}}
\DoxyCodeLine{01113                     \textcolor{comment}{// delete signal if voice off}}
\DoxyCodeLine{01114                     \textcolor{keywordflow}{if}(Display.Voices\_ONOFF[VOICES\_ID]==\textcolor{keyword}{false} \&\& Display.Voices\_Created[VOICES\_ID] == \textcolor{keyword}{true}) \{}
\DoxyCodeLine{01115                         \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID));}
\DoxyCodeLine{01116                         Display.Voices\_Created[VOICES\_ID] = \textcolor{keyword}{false};}
\DoxyCodeLine{01117                     \}}
\DoxyCodeLine{01118                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(Display.Voices\_ONOFF[VOICES\_ID+1]==\textcolor{keyword}{false} \&\& Display.Voices\_Created[VOICES\_ID+1] == \textcolor{keyword}{true}) \{}
\DoxyCodeLine{01119                         \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID+1));}
\DoxyCodeLine{01120                         Display.Voices\_Created[VOICES\_ID+1] = \textcolor{keyword}{false};}
\DoxyCodeLine{01121                     \}}
\DoxyCodeLine{01122                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(Display.Voices\_ONOFF[VOICES\_ID+2]==\textcolor{keyword}{false} \&\& Display.Voices\_Created[VOICES\_ID+2] == \textcolor{keyword}{true}) \{}
\DoxyCodeLine{01123                         \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID+2));}
\DoxyCodeLine{01124                         Display.Voices\_Created[VOICES\_ID+2] = \textcolor{keyword}{false};}
\DoxyCodeLine{01125                     \}}
\DoxyCodeLine{01126                 \}}
\DoxyCodeLine{01127                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{01128             \}}
\DoxyCodeLine{01129 }
\DoxyCodeLine{01130             \textcolor{keywordflow}{case} NOISE:}
\DoxyCodeLine{01131                 \textcolor{keywordflow}{if}(Display.Voices\_ONOFF[VOICES\_ID+3] == \textcolor{keyword}{true}) \{}
\DoxyCodeLine{01132                     addValue += (10*Display.Voices\_Volume[VOICES\_ID+3]*(float)rand()/ (powf(2, 8*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}))) )-\/(10*Display.Voices\_Volume[VOICES\_ID+3]*0.25);}
\DoxyCodeLine{01133                 \}}
\DoxyCodeLine{01134                 \textcolor{comment}{// delete signal if voice off}}
\DoxyCodeLine{01135                 \textcolor{keywordflow}{if}(Display.Voices\_ONOFF[VOICES\_ID+3]==\textcolor{keyword}{false} \&\& Display.Voices\_Created[VOICES\_ID+3] == \textcolor{keyword}{true}) \{}
\DoxyCodeLine{01136                     \mbox{\hyperlink{signal__synthesis_8c_aff4b96bd9a6fb74a10215a54f141d06d}{DeleteSignal}}(\&signals1, \mbox{\hyperlink{signal__synthesis_8c_a100668ad3cefb7abc0f65f866ea508ba}{IDtoIndex}}(VOICES\_ID+3));}
\DoxyCodeLine{01137                     Display.Voices\_Created[VOICES\_ID+3] = \textcolor{keyword}{false};}
\DoxyCodeLine{01138                 \}}
\DoxyCodeLine{01139                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{01140             \}\textcolor{comment}{// Switch-\/Case}}
\DoxyCodeLine{01141 }
\DoxyCodeLine{01142         \}\textcolor{comment}{// Signal counter for-\/loop}}
\DoxyCodeLine{01143 }
\DoxyCodeLine{01144 }
\DoxyCodeLine{01145 }
\DoxyCodeLine{01146         \textcolor{comment}{// NORM: Volume by signal count}}
\DoxyCodeLine{01147         \textcolor{keywordflow}{if}(signals-\/>count -\/ active\_keyboard\_notes == 0) \{\}  \textcolor{comment}{// division by zero for addValue possible -\/> fuckup!}}
\DoxyCodeLine{01148         \textcolor{keywordflow}{else}}
\DoxyCodeLine{01149             addValue = addValue / (signals-\/>count -\/ active\_keyboard\_notes);}
\DoxyCodeLine{01150 }
\DoxyCodeLine{01151     }
\DoxyCodeLine{01152 }
\DoxyCodeLine{01153         \textcolor{comment}{// write voices (including noise) into calculate vector}}
\DoxyCodeLine{01154         calculate\_vector\_tmp[BLOCKSIZE\_counter] = \mbox{\hyperlink{signal__synthesis_8h_a0c06ec02b1329cdb21df9311f9bc3712}{volume}}[0] * (addValue + \mbox{\hyperlink{signal__synthesis_8c_a2f9745c8cd2b522e949b4c58cfccce56}{Noise\_Generator}}());}
\DoxyCodeLine{01155 }
\DoxyCodeLine{01156 }
\DoxyCodeLine{01157         \textcolor{comment}{// Drummachine}}
\DoxyCodeLine{01158         \textcolor{keywordflow}{if} ((\mbox{\hyperlink{signal__synthesis_8h_a0c06ec02b1329cdb21df9311f9bc3712}{volume}}[1] > 0) || (\mbox{\hyperlink{signal__synthesis_8h_a0c06ec02b1329cdb21df9311f9bc3712}{volume}}[2] > 0))\{}
\DoxyCodeLine{01159             \mbox{\hyperlink{drum__computer_8h_a08535ad247ef4e17b91bbba4b56833af}{Drum\_Computer\_Process}}();}
\DoxyCodeLine{01160             drums\_filtered = drums;}
\DoxyCodeLine{01161             \textcolor{keywordflow}{if}(Display.Drumfilter\_ONOFF)}
\DoxyCodeLine{01162                 \mbox{\hyperlink{filters_8h_ad95e18a35a0ebacf27bc67222a71e275}{ProcessFilter}}(\&LS\_DRUMS, \&drums\_filtered);}
\DoxyCodeLine{01163         \}}
\DoxyCodeLine{01164         \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{01165             drums = 0;}
\DoxyCodeLine{01166             sequencer = 0;}
\DoxyCodeLine{01167         \}}
\DoxyCodeLine{01168 }
\DoxyCodeLine{01169         \textcolor{comment}{// Keyboard processing with effects}}
\DoxyCodeLine{01170         \textcolor{keywordflow}{if}(Display.KeyboardFX\_ONOFF == \textcolor{keyword}{true}) \{}
\DoxyCodeLine{01171             \mbox{\hyperlink{effects_8h_a3f7370371217adca4b93419901dc1c1f}{keyboard\_adsr\_process}}();}
\DoxyCodeLine{01172             \textcolor{comment}{// summing up all played keyboard notes}}
\DoxyCodeLine{01173             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k= 0; k < 5;k++)}
\DoxyCodeLine{01174                 calculate\_vector\_tmp[BLOCKSIZE\_counter] += \mbox{\hyperlink{signal__synthesis_8h_a0c06ec02b1329cdb21df9311f9bc3712}{volume}}[3] * calculate\_keyboard[k];}
\DoxyCodeLine{01175         \}}
\DoxyCodeLine{01176 }
\DoxyCodeLine{01177         \textcolor{comment}{// Play single sample}}
\DoxyCodeLine{01178         \textcolor{keywordflow}{if}(play\_single\_sample\_flag) \{}
\DoxyCodeLine{01179             \mbox{\hyperlink{drum__computer_8h_ab788a1e344e6956cb70a8e5e1ea4d0bd}{PlaySingleSample}}();}
\DoxyCodeLine{01180             calculate\_vector\_tmp[BLOCKSIZE\_counter] += \mbox{\hyperlink{drum__computer_8h_a4f45ba3b9c8c3c6e57de16324bf23604}{single\_sample}};}
\DoxyCodeLine{01181         \}}
\DoxyCodeLine{01182 }
\DoxyCodeLine{01183         \mbox{\hyperlink{effects_8c_a3cf8b82d8ee857615741a7e0e04dbdf1}{effects\_process}}(\&calculate\_vector\_tmp[BLOCKSIZE\_counter]);}
\DoxyCodeLine{01184 }
\DoxyCodeLine{01185         \textcolor{comment}{// Keyboard processing without effects}}
\DoxyCodeLine{01186         \textcolor{keywordflow}{if}(Display.KeyboardFX\_ONOFF == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{01187             \mbox{\hyperlink{effects_8h_a3f7370371217adca4b93419901dc1c1f}{keyboard\_adsr\_process}}();}
\DoxyCodeLine{01188             \textcolor{comment}{// summing up all played keyboard notes}}
\DoxyCodeLine{01189             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k= 0; k < 5;k++)}
\DoxyCodeLine{01190                 calculate\_vector\_tmp[BLOCKSIZE\_counter] += \mbox{\hyperlink{signal__synthesis_8h_a0c06ec02b1329cdb21df9311f9bc3712}{volume}}[3] * calculate\_keyboard[k];}
\DoxyCodeLine{01191         \}}
\DoxyCodeLine{01192 }
\DoxyCodeLine{01193 }
\DoxyCodeLine{01194         \textcolor{comment}{// Add all values}}
\DoxyCodeLine{01195         calculate\_vector\_tmp[BLOCKSIZE\_counter] = calculate\_vector\_tmp[BLOCKSIZE\_counter] + \mbox{\hyperlink{signal__synthesis_8h_a0c06ec02b1329cdb21df9311f9bc3712}{volume}}[1] * drums\_filtered + \mbox{\hyperlink{signal__synthesis_8h_a0c06ec02b1329cdb21df9311f9bc3712}{volume}}[2] * sequencer;}
\DoxyCodeLine{01196 }
\DoxyCodeLine{01197         \textcolor{comment}{// to make sure that the output is 0 when a new drumkit is loaded into the drum computer}}
\DoxyCodeLine{01198         \textcolor{keywordflow}{if}(Display.LoadDrumkit == \textcolor{keyword}{true})}
\DoxyCodeLine{01199             calculate\_vector\_tmp[BLOCKSIZE\_counter] = 0;}
\DoxyCodeLine{01200 }
\DoxyCodeLine{01201         \textcolor{comment}{// Convert float to uint32 in order to make it readable for the DAC}}
\DoxyCodeLine{01202         *((uint32\_t *)(\&calculate\_vector\_tmp[BLOCKSIZE\_counter] )) = (uint32\_t)((0.5 * \mbox{\hyperlink{signal__synthesis_8h_aa15347ac4d705e4e9db618dfa95640e7}{Master\_Volume}} * calculate\_vector\_tmp[BLOCKSIZE\_counter]+1.65) * \mbox{\hyperlink{signal__synthesis_8c_ac19aecb2f04b87bf170233b3236093ae}{maxValueDAC}}); \textcolor{comment}{// +1.65 is the middle of 0-\/3V3}}
\DoxyCodeLine{01203     \}\textcolor{comment}{//End for-\/Loop}}

\end{DoxyCode}
\mbox{\Hypertarget{signal__synthesis_8h_a9eda288feb5c689a0f90742249fe6da0}\label{signal__synthesis_8h_a9eda288feb5c689a0f90742249fe6da0}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!Signal\_Synthesis\_Init@{Signal\_Synthesis\_Init}}
\index{Signal\_Synthesis\_Init@{Signal\_Synthesis\_Init}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{Signal\_Synthesis\_Init()}{Signal\_Synthesis\_Init()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def Signal\+\_\+\+Synthesis\+\_\+\+Init (\begin{DoxyParamCaption}\item[{TIM\+\_\+\+Handle\+Type\+Def}]{htim,  }\item[{DAC\+\_\+\+Handle\+Type\+Def}]{hdac }\end{DoxyParamCaption})}



Init funtion for the signal\+\_\+synthesis, must be used in order to use any other funtion of this .c. 


\begin{DoxyParams}{Parameters}
{\em htim} & timer-\/handler which controls the DAC, timer have to be connected with DAC \\
\hline
{\em hdac} & is the DAC handler \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
gives HAL-\/\+Status of started timer back 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{signal__synthesis_8c_source_l00030}{30}} of file \mbox{\hyperlink{signal__synthesis_8c_source}{signal\+\_\+synthesis.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00030                                                                                        \{}
\DoxyCodeLine{00031 }
\DoxyCodeLine{00032     \textcolor{comment}{// Sets the maximal digital value which the DAC converts into analog voltage}}
\DoxyCodeLine{00033     \mbox{\hyperlink{signal__synthesis_8c_ac19aecb2f04b87bf170233b3236093ae}{maxValueDAC}} = (double)\mbox{\hyperlink{signal__synthesis_8h_a9403bb31e6a5748c0bfc57f7523ef483}{DAC\_MAXVALUE\_TO\_AMPLITUDE\_RATIO}} * (\textcolor{keywordtype}{double})\mbox{\hyperlink{signal__synthesis_8h_ae2d3a48fb01bbc0fe795724379434d05}{AMPLITUDE}};}
\DoxyCodeLine{00034     \mbox{\hyperlink{signal__synthesis_8h_a5b4caaf313594423ca462cb11a33eca9}{outputBuffer\_position}} = HALF\_BLOCK;}
\DoxyCodeLine{00035     signals1.count = 0;}
\DoxyCodeLine{00036     signals1.max = 1;}
\DoxyCodeLine{00037 }
\DoxyCodeLine{00038     \textcolor{comment}{// Set Volumes for Master\_Volume, Voices, Drumcomputer, Sequencer and Keyboard}}
\DoxyCodeLine{00039     \mbox{\hyperlink{signal__synthesis_8h_aa15347ac4d705e4e9db618dfa95640e7}{Master\_Volume}} = 1.0;}
\DoxyCodeLine{00040     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0; i<4; i++) \{}
\DoxyCodeLine{00041         \mbox{\hyperlink{signal__synthesis_8h_a0c06ec02b1329cdb21df9311f9bc3712}{volume}}[i] = 1;}
\DoxyCodeLine{00042     \}}
\DoxyCodeLine{00043 }
\DoxyCodeLine{00044     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i>\mbox{\hyperlink{main_8h_afcf795f5a96fd55561abe69f56224630}{BLOCKSIZE}}/2; i++)}
\DoxyCodeLine{00045         *((uint32\_t *)(\&\mbox{\hyperlink{main_8h_a25be00c869033fae5b8206c20aeb3861}{calculate\_vector1}}[i] )) = (uint32\_t)((i/(\mbox{\hyperlink{main_8h_afcf795f5a96fd55561abe69f56224630}{BLOCKSIZE}}/2)) * \mbox{\hyperlink{signal__synthesis_8c_ac19aecb2f04b87bf170233b3236093ae}{maxValueDAC}}/2); \textcolor{comment}{// TODO muss noch angepasst werden}}
\DoxyCodeLine{00046 }
\DoxyCodeLine{00047     \textcolor{comment}{// Inits and starts timer connected with DAC}}
\DoxyCodeLine{00048     \mbox{\hyperlink{signal__synthesis_8c_adc7b4110b68d58532096fe9f817df89c}{SetTimerSettings}}(\&htim, LUT\_SR);}
\DoxyCodeLine{00049 }
\DoxyCodeLine{00050     \textcolor{keywordflow}{return} HAL\_TIM\_Base\_Start(\&htim);}
\DoxyCodeLine{00051 \}}

\end{DoxyCode}
\mbox{\Hypertarget{signal__synthesis_8h_af4829c3aeeaf3dbcda0b5266e2834898}\label{signal__synthesis_8h_af4829c3aeeaf3dbcda0b5266e2834898}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!Voices\_Reset@{Voices\_Reset}}
\index{Voices\_Reset@{Voices\_Reset}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{Voices\_Reset()}{Voices\_Reset()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def Voices\+\_\+\+Reset (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



resets the voice parameter which can be changed in the GUI 

\begin{DoxyReturn}{Returns}
HAL\+\_\+\+Status\+Type\+Def 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{signal__synthesis_8c_source_l00058}{58}} of file \mbox{\hyperlink{signal__synthesis_8c_source}{signal\+\_\+synthesis.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00058                                      \{}
\DoxyCodeLine{00059 }
\DoxyCodeLine{00060     \textcolor{comment}{// Clear screen content of voices overview}}
\DoxyCodeLine{00061     Paint\_DrawFilledRectangle(\&paint, Display.value\_start\_x\_position, CASE2, Display.value\_end\_x\_position, CASE2+VALUE\_ROW\_LENGTH , UNCOLORED);}
\DoxyCodeLine{00062     Paint\_DrawFilledRectangle(\&paint, Display.value\_start\_x\_position, CASE3, Display.value\_end\_x\_position, CASE3+VALUE\_ROW\_LENGTH , UNCOLORED);}
\DoxyCodeLine{00063     Paint\_DrawFilledRectangle(\&paint, Display.value\_start\_x\_position, CASE4, Display.value\_end\_x\_position, CASE4+VALUE\_ROW\_LENGTH , UNCOLORED);}
\DoxyCodeLine{00064     Paint\_DrawFilledRectangle(\&paint, Display.value\_start\_x\_position, CASE5, Display.value\_end\_x\_position, CASE5+VALUE\_ROW\_LENGTH , UNCOLORED);}
\DoxyCodeLine{00065 }
\DoxyCodeLine{00066     \textcolor{comment}{// Voices Reset}}
\DoxyCodeLine{00067     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0; i<3; i++) \{}
\DoxyCodeLine{00068         Display.Voices\_ONOFF[i] = \textcolor{keyword}{false};}
\DoxyCodeLine{00069         Display.Voices\_Noteindex[i] = 0;}
\DoxyCodeLine{00070         Display.Voices\_Note[i]   = (uint8\_t)(\mbox{\hyperlink{music__notes_8h_aa6edf4563731abf1927b342c5ebe3e8a}{keys}}[(uint8\_t)Display.Voices\_Noteindex[i] + Display.KeyNoteIndex]);}
\DoxyCodeLine{00071         Display.Voices\_Octave[i] = 0;}
\DoxyCodeLine{00072         Display.Voice\_Note\_Sources[i] = POTI;}
\DoxyCodeLine{00073         Display.Voice\_Octave\_Sources[i] = POTI;}
\DoxyCodeLine{00074         strcpy(Display.value\_str\_voices\_overview[i], \textcolor{stringliteral}{"{}OFF"{}});}
\DoxyCodeLine{00075         sprintf(Display.value\_str\_voices\_settings[i][0], \textcolor{stringliteral}{"{}\%c"{}}, Display.Voices\_Note[i]);}
\DoxyCodeLine{00076         sprintf(Display.value\_str\_voices\_settings[i][1], \textcolor{stringliteral}{"{}\%d"{}}, Display.Voices\_Octave[i]);}
\DoxyCodeLine{00077         strcpy(Display.value\_str\_voices\_settings[i][2], Display.source\_names[0]);}
\DoxyCodeLine{00078         strcpy(Display.value\_str\_voices\_settings[i][3], Display.source\_names[0]);}
\DoxyCodeLine{00079     \}}
\DoxyCodeLine{00080     \textcolor{comment}{// Noise Reset}}
\DoxyCodeLine{00081     Display.Noise\_ONOFF = \textcolor{keyword}{false};}
\DoxyCodeLine{00082     strcpy(Display.value\_str\_voices\_overview[3], \textcolor{stringliteral}{"{}OFF"{}});}
\DoxyCodeLine{00083     Display.Noise\_Volume = 1.0;}
\DoxyCodeLine{00084 }
\DoxyCodeLine{00085     \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{00086 \}}

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{signal__synthesis_8h_a5c1306f9014e8c807f270a79a96bc1e4}\label{signal__synthesis_8h_a5c1306f9014e8c807f270a79a96bc1e4}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!calculate\_keyboard@{calculate\_keyboard}}
\index{calculate\_keyboard@{calculate\_keyboard}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{calculate\_keyboard}{calculate\_keyboard}}
{\footnotesize\ttfamily float calculate\+\_\+keyboard\mbox{[}5\mbox{]}}



Definition at line \mbox{\hyperlink{signal__synthesis_8h_source_l00110}{110}} of file \mbox{\hyperlink{signal__synthesis_8h_source}{signal\+\_\+synthesis.\+h}}.

\mbox{\Hypertarget{signal__synthesis_8h_a97dbcee80a3c35c2977ad6b4678d3537}\label{signal__synthesis_8h_a97dbcee80a3c35c2977ad6b4678d3537}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!lfo\_tremolo@{lfo\_tremolo}}
\index{lfo\_tremolo@{lfo\_tremolo}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{lfo\_tremolo}{lfo\_tremolo}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structeffects__lfo__t}{effects\+\_\+lfo\+\_\+t}} lfo\+\_\+tremolo}



Definition at line \mbox{\hyperlink{signal__synthesis_8h_source_l00098}{98}} of file \mbox{\hyperlink{signal__synthesis_8h_source}{signal\+\_\+synthesis.\+h}}.

\mbox{\Hypertarget{signal__synthesis_8h_a2a60cfa8d2bbdf6a0ac6e035afe008cb}\label{signal__synthesis_8h_a2a60cfa8d2bbdf6a0ac6e035afe008cb}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!lfo\_wahwah@{lfo\_wahwah}}
\index{lfo\_wahwah@{lfo\_wahwah}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{lfo\_wahwah}{lfo\_wahwah}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structeffects__lfo__t}{effects\+\_\+lfo\+\_\+t}} lfo\+\_\+wahwah}



Definition at line \mbox{\hyperlink{signal__synthesis_8h_source_l00099}{99}} of file \mbox{\hyperlink{signal__synthesis_8h_source}{signal\+\_\+synthesis.\+h}}.

\mbox{\Hypertarget{signal__synthesis_8h_aa15347ac4d705e4e9db618dfa95640e7}\label{signal__synthesis_8h_aa15347ac4d705e4e9db618dfa95640e7}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!Master\_Volume@{Master\_Volume}}
\index{Master\_Volume@{Master\_Volume}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{Master\_Volume}{Master\_Volume}}
{\footnotesize\ttfamily float Master\+\_\+\+Volume}

Volume applied at the end, to prevent clipping 

Definition at line \mbox{\hyperlink{signal__synthesis_8h_source_l00108}{108}} of file \mbox{\hyperlink{signal__synthesis_8h_source}{signal\+\_\+synthesis.\+h}}.

\mbox{\Hypertarget{signal__synthesis_8h_a5b4caaf313594423ca462cb11a33eca9}\label{signal__synthesis_8h_a5b4caaf313594423ca462cb11a33eca9}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!outputBuffer\_position@{outputBuffer\_position}}
\index{outputBuffer\_position@{outputBuffer\_position}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{outputBuffer\_position}{outputBuffer\_position}}
{\footnotesize\ttfamily uint8\+\_\+t output\+Buffer\+\_\+position}



Position of the DMA Output Buffer, can be HALF\+\_\+\+BLOCK or FULL\+\_\+\+BLOCK. 



Definition at line \mbox{\hyperlink{signal__synthesis_8h_source_l00113}{113}} of file \mbox{\hyperlink{signal__synthesis_8h_source}{signal\+\_\+synthesis.\+h}}.

\mbox{\Hypertarget{signal__synthesis_8h_a5b95c7f01daea158ffcc681572618373}\label{signal__synthesis_8h_a5b95c7f01daea158ffcc681572618373}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!signals1@{signals1}}
\index{signals1@{signals1}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{signals1}{signals1}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structsignal__t}{signal\+\_\+t}} signals1}



Definition at line \mbox{\hyperlink{signal__synthesis_8h_source_l00097}{97}} of file \mbox{\hyperlink{signal__synthesis_8h_source}{signal\+\_\+synthesis.\+h}}.

\mbox{\Hypertarget{signal__synthesis_8h_a0c06ec02b1329cdb21df9311f9bc3712}\label{signal__synthesis_8h_a0c06ec02b1329cdb21df9311f9bc3712}} 
\index{signal\_synthesis.h@{signal\_synthesis.h}!volume@{volume}}
\index{volume@{volume}!signal\_synthesis.h@{signal\_synthesis.h}}
\doxysubsubsection{\texorpdfstring{volume}{volume}}
{\footnotesize\ttfamily float volume\mbox{[}4\mbox{]}}

defines volume of the Voices, Drummachine and Sequencer 0 -\/\texorpdfstring{$>$}{>} Voices 1 -\/\texorpdfstring{$>$}{>} Drums 2 -\/\texorpdfstring{$>$}{>} Sequencer 

Definition at line \mbox{\hyperlink{signal__synthesis_8h_source_l00106}{106}} of file \mbox{\hyperlink{signal__synthesis_8h_source}{signal\+\_\+synthesis.\+h}}.

