\hypertarget{drum__computer_8c}{}\doxysection{/media/paul/\+LINUX\+\_\+\+MEM/\+Uni/\+Git Repos/\+Body-\/\+Synthesizer\+\_\+\+STM32\+\_\+\+F746\+ZG/body-\/synthesizer-\/stm32-\/f746zg/\+Core/\+Src/drum\+\_\+computer.c File Reference}
\label{drum__computer_8c}\index{/media/paul/LINUX\_MEM/Uni/Git Repos/Body-\/Synthesizer\_STM32\_F746ZG/body-\/synthesizer-\/stm32-\/f746zg/Core/Src/drum\_computer.c@{/media/paul/LINUX\_MEM/Uni/Git Repos/Body-\/Synthesizer\_STM32\_F746ZG/body-\/synthesizer-\/stm32-\/f746zg/Core/Src/drum\_computer.c}}


Drumcomputer functions.  


{\ttfamily \#include \char`\"{}drum\+\_\+computer.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{drum__computer_8c_afe5a4ffde057a9bf69f40122bd7fee59}{Sequencer\+\_\+\+ADSR\+\_\+\+Init}} (struct \mbox{\hyperlink{structadsr}{adsr}} $\ast$env)
\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{drum__computer_8c_ab1eca379f4f1b927be94270e748a87bf}{Drum\+\_\+\+Computer\+\_\+\+Calc\+Sample}} (void)
\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{drum__computer_8c_a0945a49b026be615b8a70c8ec885ac08}{Drum\+\_\+\+Computer\+\_\+\+Reset}} (void)
\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{drum__computer_8c_af1fa77afa44aa624f611ecb1bcb9117e}{Sequencer\+\_\+\+Reset}} (void)
\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{drum__computer_8c_a98c7a5f46d897df7157cfd75e379afb3}{Drum\+\_\+\+Computer\+\_\+\+Init}} (void)
\begin{DoxyCompactList}\small\item\em Init function for the drumcomputer ~\newline
 \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{drum__computer_8c_a08535ad247ef4e17b91bbba4b56833af}{Drum\+\_\+\+Computer\+\_\+\+Process}} (void)
\item 
void \mbox{\hyperlink{drum__computer_8c_ab788a1e344e6956cb70a8e5e1ea4d0bd}{Play\+Single\+Sample}} (void)
\begin{DoxyCompactList}\small\item\em function to play the same sample each time it is triggerd, must be called inside \mbox{\hyperlink{signal__synthesis_8h_a14e563872b7cc3bae6f534d36f016911}{Signal\+\_\+\+Synthesis()}} \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{drum__computer_8c_aa345ec69e335b62cfa0a6ef12c4d3acd}{Drum\+\_\+\+Computer\+\_\+\+Calc\+Sample\+\_\+\+Reverse}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Drumcomputer functions. 

\begin{DoxyAuthor}{Author}
Max Lehmer \& Marc Bielen 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
2022-\/01-\/21
\end{DoxyDate}
\begin{DoxyCopyright}{Copyright}
Copyright (c) 2022 
\end{DoxyCopyright}


Definition in file \mbox{\hyperlink{drum__computer_8c_source}{drum\+\_\+computer.\+c}}.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{drum__computer_8c_ab1eca379f4f1b927be94270e748a87bf}\label{drum__computer_8c_ab1eca379f4f1b927be94270e748a87bf}} 
\index{drum\_computer.c@{drum\_computer.c}!Drum\_Computer\_CalcSample@{Drum\_Computer\_CalcSample}}
\index{Drum\_Computer\_CalcSample@{Drum\_Computer\_CalcSample}!drum\_computer.c@{drum\_computer.c}}
\doxysubsubsection{\texorpdfstring{Drum\_Computer\_CalcSample()}{Drum\_Computer\_CalcSample()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def Drum\+\_\+\+Computer\+\_\+\+Calc\+Sample (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

TODO \begin{DoxyReturn}{Returns}
HAL\+\_\+\+Status\+Type\+Def 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{drum__computer_8c_source_l00041}{41}} of file \mbox{\hyperlink{drum__computer_8c_source}{drum\+\_\+computer.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00041                                                  \{}
\DoxyCodeLine{00042 }
\DoxyCodeLine{00043     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{drum__computer_8h_a267b06d60a7514d898b5cac91b4380ec}{FourFour}}; i++) \{}
\DoxyCodeLine{00044 }
\DoxyCodeLine{00045         \textcolor{keywordflow}{if}(Display.Drumcomputer\_ONOFF == \textcolor{keyword}{true}) \{}
\DoxyCodeLine{00046 }
\DoxyCodeLine{00047             \textcolor{comment}{// Drumsample 1}}
\DoxyCodeLine{00048             \textcolor{keywordflow}{if}(\mbox{\hyperlink{drum__computer_8h_a88744615d25a485f31d6718453e6d324}{flag\_DS1}}[i] == 1) \{}
\DoxyCodeLine{00049 }
\DoxyCodeLine{00050                 \mbox{\hyperlink{drum__computer_8h_a1d0ce949a258b04a5822d3442fd73d83}{DS1s}} = \mbox{\hyperlink{drum__computer_8h_a1d0ce949a258b04a5822d3442fd73d83}{DS1s}} + DS1[counter\_DS1[i]];}
\DoxyCodeLine{00051                 counter\_DS1[i]++;}
\DoxyCodeLine{00052 }
\DoxyCodeLine{00053                 \textcolor{keywordflow}{if}(counter\_DS1[i] == DS\_L -\/ 1)\{}
\DoxyCodeLine{00054 }
\DoxyCodeLine{00055                     counter\_DS1[i] = 0;}
\DoxyCodeLine{00056                     \mbox{\hyperlink{drum__computer_8h_a88744615d25a485f31d6718453e6d324}{flag\_DS1}}[i]    = 0;}
\DoxyCodeLine{00057                 \}}
\DoxyCodeLine{00058             \}}
\DoxyCodeLine{00059             \textcolor{comment}{// Drumsample 2}}
\DoxyCodeLine{00060             \textcolor{keywordflow}{if}(flag\_DS2[i] == 1) \{}
\DoxyCodeLine{00061 }
\DoxyCodeLine{00062                 DS2s = DS2s + DS2[counter\_DS2[i]];}
\DoxyCodeLine{00063                 counter\_DS2[i]++;}
\DoxyCodeLine{00064 }
\DoxyCodeLine{00065                 \textcolor{keywordflow}{if}(counter\_DS2[i] == DS\_L -\/ 1)\{}
\DoxyCodeLine{00066 }
\DoxyCodeLine{00067                     counter\_DS2[i] = 0;}
\DoxyCodeLine{00068                     flag\_DS2[i]    = 0;}
\DoxyCodeLine{00069                 \}}
\DoxyCodeLine{00070             \}}
\DoxyCodeLine{00071             \textcolor{comment}{// Drumsample 3}}
\DoxyCodeLine{00072             \textcolor{keywordflow}{if}(flag\_DS3[i] == 1) \{}
\DoxyCodeLine{00073 }
\DoxyCodeLine{00074                 DS3s = DS3s + DS3[counter\_DS3[i]];}
\DoxyCodeLine{00075                 counter\_DS3[i]++;}
\DoxyCodeLine{00076 }
\DoxyCodeLine{00077                 \textcolor{keywordflow}{if}(counter\_DS3[i] == DS\_L -\/ 1)\{}
\DoxyCodeLine{00078 }
\DoxyCodeLine{00079                     counter\_DS3[i] = 0;}
\DoxyCodeLine{00080                     flag\_DS3[i]    = 0;}
\DoxyCodeLine{00081                 \}}
\DoxyCodeLine{00082             \}}
\DoxyCodeLine{00083             \textcolor{comment}{// Drumsample 4}}
\DoxyCodeLine{00084             \textcolor{keywordflow}{if}(flag\_DS4[i] == 1) \{}
\DoxyCodeLine{00085 }
\DoxyCodeLine{00086                 DS4s = DS4s + DS4[counter\_DS4[i]];}
\DoxyCodeLine{00087                 counter\_DS4[i]++;}
\DoxyCodeLine{00088 }
\DoxyCodeLine{00089                 \textcolor{keywordflow}{if}(counter\_DS4[i] == DS\_L -\/ 1)\{}
\DoxyCodeLine{00090 }
\DoxyCodeLine{00091                     counter\_DS4[i] = 0;}
\DoxyCodeLine{00092                     flag\_DS4[i]    = 0;}
\DoxyCodeLine{00093                 \}}
\DoxyCodeLine{00094             \}}
\DoxyCodeLine{00095         \}}
\DoxyCodeLine{00096 }
\DoxyCodeLine{00097         \textcolor{keywordflow}{if}(Display.Sequencer\_ONOFF == \textcolor{keyword}{true}) \{}
\DoxyCodeLine{00098             \textcolor{comment}{// Sequencer Note 1}}
\DoxyCodeLine{00099             \textcolor{keywordflow}{if}(timing\_SN1[i] == 1)\{}
\DoxyCodeLine{00100 }
\DoxyCodeLine{00101                 \textcolor{keywordflow}{if}(adsr\_SN1[i].adsr\_done == \textcolor{keyword}{false})\{}
\DoxyCodeLine{00102 }
\DoxyCodeLine{00103 }
\DoxyCodeLine{00104                     SN1\_temp = LUT[\mbox{\hyperlink{drum__computer_8h_abafd5c3bbb1d0bbc3e708889e904e3a7}{current\_LUT\_index\_SN1}}[i]];}
\DoxyCodeLine{00105 }
\DoxyCodeLine{00106                     \mbox{\hyperlink{adsr_8h_ac86ad75fa8ab7681c5ba8fdb66c4cbf0}{OnePress\_ADSR\_Sequencer\_Process}}(\&adsr\_SN1[i], \&SN1\_temp, timing\_SN1[i]);}
\DoxyCodeLine{00107 }
\DoxyCodeLine{00108                     \mbox{\hyperlink{drum__computer_8h_a1578899be8b6d34fe965f44a84c16ecd}{SN1}} += SN1\_temp;}
\DoxyCodeLine{00109                     \mbox{\hyperlink{drum__computer_8h_abafd5c3bbb1d0bbc3e708889e904e3a7}{current\_LUT\_index\_SN1}}[i]++;}
\DoxyCodeLine{00110                 \}}
\DoxyCodeLine{00111                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(adsr\_SN1[i].adsr\_done == \textcolor{keyword}{true})\{}
\DoxyCodeLine{00112 }
\DoxyCodeLine{00113                     \mbox{\hyperlink{drum__computer_8h_a1578899be8b6d34fe965f44a84c16ecd}{SN1}} += 0;}
\DoxyCodeLine{00114                 \}}
\DoxyCodeLine{00115                 \textcolor{keywordflow}{if} (\mbox{\hyperlink{drum__computer_8h_abafd5c3bbb1d0bbc3e708889e904e3a7}{current\_LUT\_index\_SN1}}[i] > LUT\_ENDINDEX[\mbox{\hyperlink{drum__computer_8h_a4211ba08e77d82a294762a623041e342}{freq\_index\_SN1}}])}
\DoxyCodeLine{00116                 \{}
\DoxyCodeLine{00117                     \mbox{\hyperlink{drum__computer_8h_abafd5c3bbb1d0bbc3e708889e904e3a7}{current\_LUT\_index\_SN1}}[i] = LUT\_STARTINDEX[\mbox{\hyperlink{drum__computer_8h_a4211ba08e77d82a294762a623041e342}{freq\_index\_SN1}}];}
\DoxyCodeLine{00118                 \}}
\DoxyCodeLine{00119             \}}
\DoxyCodeLine{00120             \textcolor{comment}{// Sequencer Note 2}}
\DoxyCodeLine{00121             \textcolor{keywordflow}{if}(timing\_SN2[i] == 1)\{}
\DoxyCodeLine{00122 }
\DoxyCodeLine{00123                 \textcolor{keywordflow}{if}(adsr\_SN2[i].adsr\_done == \textcolor{keyword}{false})\{}
\DoxyCodeLine{00124 }
\DoxyCodeLine{00125                     SN2\_temp = LUT[current\_LUT\_index\_SN2[i]];}
\DoxyCodeLine{00126 }
\DoxyCodeLine{00127                     \mbox{\hyperlink{adsr_8h_ac86ad75fa8ab7681c5ba8fdb66c4cbf0}{OnePress\_ADSR\_Sequencer\_Process}}(\&adsr\_SN2[i], \&SN2\_temp, timing\_SN2[i]);}
\DoxyCodeLine{00128 }
\DoxyCodeLine{00129                     SN2 += SN2\_temp;}
\DoxyCodeLine{00130                     current\_LUT\_index\_SN2[i]++;}
\DoxyCodeLine{00131                 \}}
\DoxyCodeLine{00132                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(adsr\_SN2[i].adsr\_done == \textcolor{keyword}{true})\{}
\DoxyCodeLine{00133 }
\DoxyCodeLine{00134                     SN2 += 0;}
\DoxyCodeLine{00135                 \}}
\DoxyCodeLine{00136                 \textcolor{keywordflow}{if} (current\_LUT\_index\_SN2[i] > LUT\_ENDINDEX[freq\_index\_SN2])}
\DoxyCodeLine{00137                 \{}
\DoxyCodeLine{00138                     current\_LUT\_index\_SN2[i] = LUT\_STARTINDEX[freq\_index\_SN2];}
\DoxyCodeLine{00139                 \}}
\DoxyCodeLine{00140             \}}
\DoxyCodeLine{00141             \textcolor{comment}{// Sequencer Note 3}}
\DoxyCodeLine{00142             \textcolor{keywordflow}{if}(timing\_SN3[i] == 1)\{}
\DoxyCodeLine{00143 }
\DoxyCodeLine{00144                 \textcolor{keywordflow}{if}(adsr\_SN3[i].adsr\_done == \textcolor{keyword}{false})\{}
\DoxyCodeLine{00145 }
\DoxyCodeLine{00146                     SN3\_temp = LUT[current\_LUT\_index\_SN3[i]];}
\DoxyCodeLine{00147 }
\DoxyCodeLine{00148                     \mbox{\hyperlink{adsr_8h_ac86ad75fa8ab7681c5ba8fdb66c4cbf0}{OnePress\_ADSR\_Sequencer\_Process}}(\&adsr\_SN3[i], \&SN3\_temp, timing\_SN3[i]);}
\DoxyCodeLine{00149 }
\DoxyCodeLine{00150                     SN3 += SN3\_temp;}
\DoxyCodeLine{00151                     current\_LUT\_index\_SN3[i]++;}
\DoxyCodeLine{00152                 \}}
\DoxyCodeLine{00153                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(adsr\_SN3[i].adsr\_done == \textcolor{keyword}{true})\{}
\DoxyCodeLine{00154 }
\DoxyCodeLine{00155                     SN3 += 0;}
\DoxyCodeLine{00156                 \}}
\DoxyCodeLine{00157                 \textcolor{keywordflow}{if} (current\_LUT\_index\_SN3[i] > LUT\_ENDINDEX[freq\_index\_SN3])}
\DoxyCodeLine{00158                 \{}
\DoxyCodeLine{00159                     current\_LUT\_index\_SN3[i] = LUT\_STARTINDEX[freq\_index\_SN3];}
\DoxyCodeLine{00160                 \}}
\DoxyCodeLine{00161             \}}
\DoxyCodeLine{00162             \textcolor{comment}{// Sequencer Note 4}}
\DoxyCodeLine{00163             \textcolor{keywordflow}{if}(timing\_SN4[i] == 1)\{}
\DoxyCodeLine{00164 }
\DoxyCodeLine{00165                 \textcolor{keywordflow}{if}(adsr\_SN4[i].adsr\_done == \textcolor{keyword}{false})\{}
\DoxyCodeLine{00166 }
\DoxyCodeLine{00167                     SN4\_temp = LUT[current\_LUT\_index\_SN4[i]];}
\DoxyCodeLine{00168 }
\DoxyCodeLine{00169                     \mbox{\hyperlink{adsr_8h_ac86ad75fa8ab7681c5ba8fdb66c4cbf0}{OnePress\_ADSR\_Sequencer\_Process}}(\&adsr\_SN4[i], \&SN4\_temp, timing\_SN4[i]);}
\DoxyCodeLine{00170 }
\DoxyCodeLine{00171                     SN4 += SN4\_temp;}
\DoxyCodeLine{00172                     current\_LUT\_index\_SN4[i]++;}
\DoxyCodeLine{00173                 \}}
\DoxyCodeLine{00174                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(adsr\_SN4[i].adsr\_done == \textcolor{keyword}{true})\{}
\DoxyCodeLine{00175 }
\DoxyCodeLine{00176                     SN4 += 0;}
\DoxyCodeLine{00177                 \}}
\DoxyCodeLine{00178 }
\DoxyCodeLine{00179                 \textcolor{keywordflow}{if} (current\_LUT\_index\_SN4[i] > LUT\_ENDINDEX[freq\_index\_SN4])}
\DoxyCodeLine{00180                 \{}
\DoxyCodeLine{00181                     current\_LUT\_index\_SN4[i] = LUT\_STARTINDEX[freq\_index\_SN4];}
\DoxyCodeLine{00182                 \}}
\DoxyCodeLine{00183             \}}
\DoxyCodeLine{00184         \}}
\DoxyCodeLine{00185     \}}
\DoxyCodeLine{00186 }
\DoxyCodeLine{00187     drums =  \mbox{\hyperlink{drum__computer_8h_a1d0ce949a258b04a5822d3442fd73d83}{DS1s}} + DS2s + DS3s + DS4s;}
\DoxyCodeLine{00188     sequencer = \mbox{\hyperlink{drum__computer_8h_a1578899be8b6d34fe965f44a84c16ecd}{SN1}} + SN2 + SN3 + SN4;}
\DoxyCodeLine{00189 }
\DoxyCodeLine{00190     \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{00191 \}}

\end{DoxyCode}
\mbox{\Hypertarget{drum__computer_8c_aa345ec69e335b62cfa0a6ef12c4d3acd}\label{drum__computer_8c_aa345ec69e335b62cfa0a6ef12c4d3acd}} 
\index{drum\_computer.c@{drum\_computer.c}!Drum\_Computer\_CalcSample\_Reverse@{Drum\_Computer\_CalcSample\_Reverse}}
\index{Drum\_Computer\_CalcSample\_Reverse@{Drum\_Computer\_CalcSample\_Reverse}!drum\_computer.c@{drum\_computer.c}}
\doxysubsubsection{\texorpdfstring{Drum\_Computer\_CalcSample\_Reverse()}{Drum\_Computer\_CalcSample\_Reverse()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def Drum\+\_\+\+Computer\+\_\+\+Calc\+Sample\+\_\+\+Reverse (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

TODO \begin{DoxyReturn}{Returns}
HAL\+\_\+\+Status\+Type\+Def 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{drum__computer_8c_source_l00516}{516}} of file \mbox{\hyperlink{drum__computer_8c_source}{drum\+\_\+computer.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00516                                                      \{}
\DoxyCodeLine{00517 }
\DoxyCodeLine{00518     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{drum__computer_8h_a267b06d60a7514d898b5cac91b4380ec}{FourFour}}; i++) \{}
\DoxyCodeLine{00519 }
\DoxyCodeLine{00520         \textcolor{comment}{// Drumsample 1}}
\DoxyCodeLine{00521         \textcolor{keywordflow}{if}(\mbox{\hyperlink{drum__computer_8h_a88744615d25a485f31d6718453e6d324}{flag\_DS1}}[i] == 1) \{}
\DoxyCodeLine{00522 }
\DoxyCodeLine{00523             \mbox{\hyperlink{drum__computer_8h_a1d0ce949a258b04a5822d3442fd73d83}{DS1s}} = \mbox{\hyperlink{drum__computer_8h_a1d0ce949a258b04a5822d3442fd73d83}{DS1s}} + DS1[10000-\/counter\_DS1[i]];}
\DoxyCodeLine{00524             counter\_DS1[i]++;}
\DoxyCodeLine{00525 }
\DoxyCodeLine{00526             \textcolor{keywordflow}{if}(counter\_DS1[i] == DS\_L -\/ 1)\{}
\DoxyCodeLine{00527 }
\DoxyCodeLine{00528                 counter\_DS1[i] = 0;}
\DoxyCodeLine{00529                 \mbox{\hyperlink{drum__computer_8h_a88744615d25a485f31d6718453e6d324}{flag\_DS1}}[i]    = 0;}
\DoxyCodeLine{00530             \}}
\DoxyCodeLine{00531         \}}
\DoxyCodeLine{00532         \textcolor{comment}{// Drumsample 2}}
\DoxyCodeLine{00533         \textcolor{keywordflow}{if}(flag\_DS2[i] == 1) \{}
\DoxyCodeLine{00534 }
\DoxyCodeLine{00535             DS2s = DS2s + DS2[10000-\/counter\_DS2[i]];}
\DoxyCodeLine{00536             counter\_DS2[i]++;}
\DoxyCodeLine{00537 }
\DoxyCodeLine{00538             \textcolor{keywordflow}{if}(counter\_DS2[i] == DS\_L -\/ 1)\{}
\DoxyCodeLine{00539 }
\DoxyCodeLine{00540                 counter\_DS2[i] = 0;}
\DoxyCodeLine{00541                 flag\_DS2[i]    = 0;}
\DoxyCodeLine{00542             \}}
\DoxyCodeLine{00543         \}}
\DoxyCodeLine{00544         \textcolor{comment}{// Drumsample 3}}
\DoxyCodeLine{00545         \textcolor{keywordflow}{if}(flag\_DS3[i] == 1) \{}
\DoxyCodeLine{00546 }
\DoxyCodeLine{00547             DS3s = DS3s + DS3[10000-\/counter\_DS3[i]];}
\DoxyCodeLine{00548             counter\_DS3[i]++;}
\DoxyCodeLine{00549 }
\DoxyCodeLine{00550             \textcolor{keywordflow}{if}(counter\_DS3[i] == DS\_L -\/ 1)\{}
\DoxyCodeLine{00551 }
\DoxyCodeLine{00552                 counter\_DS3[i] = 0;}
\DoxyCodeLine{00553                 flag\_DS3[i]    = 0;}
\DoxyCodeLine{00554             \}}
\DoxyCodeLine{00555         \}}
\DoxyCodeLine{00556         \textcolor{comment}{// Drumsample 4}}
\DoxyCodeLine{00557         \textcolor{keywordflow}{if}(flag\_DS4[i] == 1) \{}
\DoxyCodeLine{00558 }
\DoxyCodeLine{00559             DS4s = DS4s + DS4[10000-\/counter\_DS4[i]];}
\DoxyCodeLine{00560             counter\_DS4[i]++;}
\DoxyCodeLine{00561 }
\DoxyCodeLine{00562             \textcolor{keywordflow}{if}(counter\_DS4[i] == DS\_L -\/ 1)\{}
\DoxyCodeLine{00563 }
\DoxyCodeLine{00564                 counter\_DS4[i] = 0;}
\DoxyCodeLine{00565                 flag\_DS4[i]    = 0;}
\DoxyCodeLine{00566             \}}
\DoxyCodeLine{00567         \}}
\DoxyCodeLine{00568     \}}
\DoxyCodeLine{00569     drums = \mbox{\hyperlink{drum__computer_8h_a1d0ce949a258b04a5822d3442fd73d83}{DS1s}} + DS2s + DS3s + DS4s;}
\DoxyCodeLine{00570 }
\DoxyCodeLine{00571     \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{00572 \}}

\end{DoxyCode}
\mbox{\Hypertarget{drum__computer_8c_a98c7a5f46d897df7157cfd75e379afb3}\label{drum__computer_8c_a98c7a5f46d897df7157cfd75e379afb3}} 
\index{drum\_computer.c@{drum\_computer.c}!Drum\_Computer\_Init@{Drum\_Computer\_Init}}
\index{Drum\_Computer\_Init@{Drum\_Computer\_Init}!drum\_computer.c@{drum\_computer.c}}
\doxysubsubsection{\texorpdfstring{Drum\_Computer\_Init()}{Drum\_Computer\_Init()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def Drum\+\_\+\+Computer\+\_\+\+Init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Init function for the drumcomputer ~\newline
 

\begin{DoxyReturn}{Returns}
HAL\+\_\+\+Status\+Type\+Def 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{drum__computer_8c_source_l00312}{312}} of file \mbox{\hyperlink{drum__computer_8c_source}{drum\+\_\+computer.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00312                                            \{}
\DoxyCodeLine{00313 }
\DoxyCodeLine{00314 }
\DoxyCodeLine{00315     \textcolor{comment}{// INIT: Tempo, SR, Counter}}
\DoxyCodeLine{00316     \mbox{\hyperlink{drum__computer_8h_a0065e192c774e20fd5e0ab3c342b7088}{BPM}} = 120;}
\DoxyCodeLine{00317     last\_BPM = \mbox{\hyperlink{drum__computer_8h_a0065e192c774e20fd5e0ab3c342b7088}{BPM}};}
\DoxyCodeLine{00318     BPM\_MAX = 160;}
\DoxyCodeLine{00319     MasterClock = LUT\_SR;}
\DoxyCodeLine{00320     \mbox{\hyperlink{drum__computer_8h_a148d70203e23260f999890046d5509b0}{counter\_master}} = 0;}
\DoxyCodeLine{00321 }
\DoxyCodeLine{00322     \textcolor{comment}{// INIT: Sound bins}}
\DoxyCodeLine{00323     \mbox{\hyperlink{drum__computer_8h_a1d0ce949a258b04a5822d3442fd73d83}{DS1s}} = 0;}
\DoxyCodeLine{00324     DS2s = 0;}
\DoxyCodeLine{00325     DS3s = 0;}
\DoxyCodeLine{00326     DS4s = 0;}
\DoxyCodeLine{00327     drums = 0;}
\DoxyCodeLine{00328 }
\DoxyCodeLine{00329     \textcolor{comment}{// INIT: Play Single Sample Sound bin and flags}}
\DoxyCodeLine{00330     PSSs = 0;}
\DoxyCodeLine{00331     counter\_single\_sample = 0;}
\DoxyCodeLine{00332     play\_single\_sample\_flag = \textcolor{keyword}{false};}
\DoxyCodeLine{00333 }
\DoxyCodeLine{00334     \textcolor{comment}{// Drums: Index}}
\DoxyCodeLine{00335     \mbox{\hyperlink{drum__computer_8h_ad32e19a8282780d0a134ec07797ac10b}{drum\_index}} = 0;}
\DoxyCodeLine{00336 }
\DoxyCodeLine{00337     \textcolor{comment}{// FOR: all steps in drums / sequencer}}
\DoxyCodeLine{00338     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0; i<\mbox{\hyperlink{drum__computer_8h_a267b06d60a7514d898b5cac91b4380ec}{FourFour}}; i++) \{}
\DoxyCodeLine{00339 }
\DoxyCodeLine{00340         \textcolor{comment}{// INIT: Flag}}
\DoxyCodeLine{00341         \mbox{\hyperlink{drum__computer_8h_a88744615d25a485f31d6718453e6d324}{flag\_DS1}}[i] = 0;}
\DoxyCodeLine{00342         flag\_DS2[i] = 0;}
\DoxyCodeLine{00343         flag\_DS3[i] = 0;}
\DoxyCodeLine{00344         flag\_DS4[i] = 0;}
\DoxyCodeLine{00345 }
\DoxyCodeLine{00346         \textcolor{comment}{// INIT: Counter}}
\DoxyCodeLine{00347         counter\_DS1[i] = 0;}
\DoxyCodeLine{00348         counter\_DS2[i] = 0;}
\DoxyCodeLine{00349         counter\_DS3[i] = 0;}
\DoxyCodeLine{00350         counter\_DS4[i] = 0;}
\DoxyCodeLine{00351 }
\DoxyCodeLine{00352         \textcolor{comment}{// INIT: Timing positions}}
\DoxyCodeLine{00353         \mbox{\hyperlink{drum__computer_8h_a4c0fb828065d1505aa1abfdd52afc7c3}{timing\_DS1}}[i] = 0;}
\DoxyCodeLine{00354         timing\_DS2[i] = 0;}
\DoxyCodeLine{00355         timing\_DS3[i] = 0;}
\DoxyCodeLine{00356         timing\_DS4[i] = 0;}
\DoxyCodeLine{00357 }
\DoxyCodeLine{00358         \textcolor{comment}{// INIT: Sequencer timing positions}}
\DoxyCodeLine{00359         timing\_SN1[i] = 0;}
\DoxyCodeLine{00360         timing\_SN2[i] = 0;}
\DoxyCodeLine{00361         timing\_SN3[i] = 0;}
\DoxyCodeLine{00362         timing\_SN4[i] = 0;}
\DoxyCodeLine{00363 }
\DoxyCodeLine{00364         \textcolor{comment}{// INIT: Sequencer start index}}
\DoxyCodeLine{00365         \mbox{\hyperlink{drum__computer_8h_abafd5c3bbb1d0bbc3e708889e904e3a7}{current\_LUT\_index\_SN1}}[i] = LUT\_STARTINDEX[\mbox{\hyperlink{drum__computer_8h_a4211ba08e77d82a294762a623041e342}{freq\_index\_SN1}}];}
\DoxyCodeLine{00366         current\_LUT\_index\_SN2[i] = LUT\_STARTINDEX[freq\_index\_SN2];}
\DoxyCodeLine{00367         current\_LUT\_index\_SN3[i] = LUT\_STARTINDEX[freq\_index\_SN3];}
\DoxyCodeLine{00368         current\_LUT\_index\_SN4[i] = LUT\_STARTINDEX[freq\_index\_SN4];}
\DoxyCodeLine{00369 }
\DoxyCodeLine{00370         \textcolor{comment}{// INIT: ADSR structs}}
\DoxyCodeLine{00371         \mbox{\hyperlink{drum__computer_8c_afe5a4ffde057a9bf69f40122bd7fee59}{Sequencer\_ADSR\_Init}}(\&adsr\_SN1[i]);}
\DoxyCodeLine{00372         \mbox{\hyperlink{drum__computer_8c_afe5a4ffde057a9bf69f40122bd7fee59}{Sequencer\_ADSR\_Init}}(\&adsr\_SN2[i]);}
\DoxyCodeLine{00373         \mbox{\hyperlink{drum__computer_8c_afe5a4ffde057a9bf69f40122bd7fee59}{Sequencer\_ADSR\_Init}}(\&adsr\_SN3[i]);}
\DoxyCodeLine{00374         \mbox{\hyperlink{drum__computer_8c_afe5a4ffde057a9bf69f40122bd7fee59}{Sequencer\_ADSR\_Init}}(\&adsr\_SN4[i]);}
\DoxyCodeLine{00375 }
\DoxyCodeLine{00376         \textcolor{comment}{// INIT: Array of timing positions}}
\DoxyCodeLine{00377         timing\_position\_in\_samples[i] = (\mbox{\hyperlink{drum__computer_8h_a267b06d60a7514d898b5cac91b4380ec}{FourFour}} / 4 ) * (i + 1) * (MasterClock / \mbox{\hyperlink{drum__computer_8h_a267b06d60a7514d898b5cac91b4380ec}{FourFour}}) * (60 / \mbox{\hyperlink{drum__computer_8h_a0065e192c774e20fd5e0ab3c342b7088}{BPM}});}
\DoxyCodeLine{00378     \}}
\DoxyCodeLine{00379     \textcolor{comment}{// INIT: 909 LUTs}}
\DoxyCodeLine{00380     \textcolor{comment}{// POSSIBLE: Kick, ClosedHihat, OpenHihat, Clap, Rimshot, LowTom, MidTom, HiTom}}
\DoxyCodeLine{00381     \_\_disable\_irq();}
\DoxyCodeLine{00382     sd\_card\_mount();}
\DoxyCodeLine{00383     sd\_card\_read(\textcolor{stringliteral}{"{}909\_Kick.txt"{}}, \&DS1);}
\DoxyCodeLine{00384     sd\_card\_read(\textcolor{stringliteral}{"{}909\_OpenHihat.txt"{}}, \&DS2);}
\DoxyCodeLine{00385     sd\_card\_read(\textcolor{stringliteral}{"{}909\_Clap.txt"{}}, \&DS3);}
\DoxyCodeLine{00386     sd\_card\_read(\textcolor{stringliteral}{"{}909\_LowTom.txt"{}}, \&DS4);}
\DoxyCodeLine{00387     sd\_card\_unmount();}
\DoxyCodeLine{00388     \_\_enable\_irq();}
\DoxyCodeLine{00389 }
\DoxyCodeLine{00390     strcpy(Display.sample1, \textcolor{stringliteral}{"{}Kick"{}});    \textcolor{comment}{// Init drumcomputer display content, has to be similar to the drumkit above!}}
\DoxyCodeLine{00391     strcpy(Display.sample2, \textcolor{stringliteral}{"{}Op.HH"{}});}
\DoxyCodeLine{00392     strcpy(Display.sample3, \textcolor{stringliteral}{"{}Clap"{}});}
\DoxyCodeLine{00393     strcpy(Display.sample4, \textcolor{stringliteral}{"{}L.Tom"{}});}
\DoxyCodeLine{00394 }
\DoxyCodeLine{00395     \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{00396 \}}

\end{DoxyCode}
\mbox{\Hypertarget{drum__computer_8c_a08535ad247ef4e17b91bbba4b56833af}\label{drum__computer_8c_a08535ad247ef4e17b91bbba4b56833af}} 
\index{drum\_computer.c@{drum\_computer.c}!Drum\_Computer\_Process@{Drum\_Computer\_Process}}
\index{Drum\_Computer\_Process@{Drum\_Computer\_Process}!drum\_computer.c@{drum\_computer.c}}
\doxysubsubsection{\texorpdfstring{Drum\_Computer\_Process()}{Drum\_Computer\_Process()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def Drum\+\_\+\+Computer\+\_\+\+Process (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

TODO \begin{DoxyReturn}{Returns}
HAL\+\_\+\+Status\+Type\+Def 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{drum__computer_8c_source_l00403}{403}} of file \mbox{\hyperlink{drum__computer_8c_source}{drum\+\_\+computer.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00403                                               \{}
\DoxyCodeLine{00404 }
\DoxyCodeLine{00405     \textcolor{comment}{// RESET: Drum sound bins}}
\DoxyCodeLine{00406     \mbox{\hyperlink{drum__computer_8h_a1d0ce949a258b04a5822d3442fd73d83}{DS1s}} = 0;}
\DoxyCodeLine{00407     DS2s = 0;}
\DoxyCodeLine{00408     DS3s = 0;}
\DoxyCodeLine{00409     DS4s = 0;}
\DoxyCodeLine{00410 }
\DoxyCodeLine{00411     drums = 0;}
\DoxyCodeLine{00412 }
\DoxyCodeLine{00413     \textcolor{comment}{// RESET: Sequencer sound bins}}
\DoxyCodeLine{00414     \mbox{\hyperlink{drum__computer_8h_a1578899be8b6d34fe965f44a84c16ecd}{SN1}} = 0;}
\DoxyCodeLine{00415     SN2 = 0;}
\DoxyCodeLine{00416     SN3 = 0;}
\DoxyCodeLine{00417     SN4 = 0;}
\DoxyCodeLine{00418 }
\DoxyCodeLine{00419     SN1\_temp = 0;}
\DoxyCodeLine{00420     SN2\_temp = 0;}
\DoxyCodeLine{00421     SN3\_temp = 0;}
\DoxyCodeLine{00422     SN4\_temp = 0;}
\DoxyCodeLine{00423 }
\DoxyCodeLine{00424     sequencer = 0;}
\DoxyCodeLine{00425 }
\DoxyCodeLine{00426     \textcolor{comment}{// SET: Drum flags if there is a timing available}}
\DoxyCodeLine{00427     \textcolor{keywordflow}{if}(\mbox{\hyperlink{drum__computer_8h_a4c0fb828065d1505aa1abfdd52afc7c3}{timing\_DS1}}[\mbox{\hyperlink{drum__computer_8h_ad32e19a8282780d0a134ec07797ac10b}{drum\_index}}] == 1)\{}
\DoxyCodeLine{00428 }
\DoxyCodeLine{00429         \mbox{\hyperlink{drum__computer_8h_a88744615d25a485f31d6718453e6d324}{flag\_DS1}}[\mbox{\hyperlink{drum__computer_8h_ad32e19a8282780d0a134ec07797ac10b}{drum\_index}}] = 1;}
\DoxyCodeLine{00430     \}}
\DoxyCodeLine{00431     \textcolor{keywordflow}{if}(timing\_DS2[\mbox{\hyperlink{drum__computer_8h_ad32e19a8282780d0a134ec07797ac10b}{drum\_index}}] == 1)\{}
\DoxyCodeLine{00432 }
\DoxyCodeLine{00433         flag\_DS2[\mbox{\hyperlink{drum__computer_8h_ad32e19a8282780d0a134ec07797ac10b}{drum\_index}}] = 1;}
\DoxyCodeLine{00434     \}}
\DoxyCodeLine{00435     \textcolor{keywordflow}{if}(timing\_DS3[\mbox{\hyperlink{drum__computer_8h_ad32e19a8282780d0a134ec07797ac10b}{drum\_index}}] == 1)\{}
\DoxyCodeLine{00436 }
\DoxyCodeLine{00437         flag\_DS3[\mbox{\hyperlink{drum__computer_8h_ad32e19a8282780d0a134ec07797ac10b}{drum\_index}}] = 1;}
\DoxyCodeLine{00438     \}}
\DoxyCodeLine{00439     \textcolor{keywordflow}{if}(timing\_DS4[\mbox{\hyperlink{drum__computer_8h_ad32e19a8282780d0a134ec07797ac10b}{drum\_index}}] == 1)\{}
\DoxyCodeLine{00440 }
\DoxyCodeLine{00441         flag\_DS4[\mbox{\hyperlink{drum__computer_8h_ad32e19a8282780d0a134ec07797ac10b}{drum\_index}}] = 1;}
\DoxyCodeLine{00442     \}}
\DoxyCodeLine{00443 }
\DoxyCodeLine{00444     \textcolor{comment}{// CALC: each drumsample}}
\DoxyCodeLine{00445     \mbox{\hyperlink{drum__computer_8c_ab1eca379f4f1b927be94270e748a87bf}{Drum\_Computer\_CalcSample}}();}
\DoxyCodeLine{00446 }
\DoxyCodeLine{00447     \textcolor{comment}{// INCREMENT: master counter}}
\DoxyCodeLine{00448     \mbox{\hyperlink{drum__computer_8h_a148d70203e23260f999890046d5509b0}{counter\_master}}++;}
\DoxyCodeLine{00449 }
\DoxyCodeLine{00450     \textcolor{comment}{// SET: drum index}}
\DoxyCodeLine{00451     \textcolor{keywordflow}{if}(\mbox{\hyperlink{drum__computer_8h_a148d70203e23260f999890046d5509b0}{counter\_master}} == timing\_position\_in\_samples[\mbox{\hyperlink{drum__computer_8h_ad32e19a8282780d0a134ec07797ac10b}{drum\_index}}])\{}
\DoxyCodeLine{00452 }
\DoxyCodeLine{00453         \mbox{\hyperlink{drum__computer_8h_ad32e19a8282780d0a134ec07797ac10b}{drum\_index}}++;}
\DoxyCodeLine{00454 }
\DoxyCodeLine{00455         \textcolor{keywordflow}{if}(\mbox{\hyperlink{drum__computer_8h_ad32e19a8282780d0a134ec07797ac10b}{drum\_index}} == \mbox{\hyperlink{drum__computer_8h_a267b06d60a7514d898b5cac91b4380ec}{FourFour}})\{}
\DoxyCodeLine{00456 }
\DoxyCodeLine{00457             \mbox{\hyperlink{drum__computer_8h_ad32e19a8282780d0a134ec07797ac10b}{drum\_index}} = 0;}
\DoxyCodeLine{00458             \mbox{\hyperlink{drum__computer_8h_a148d70203e23260f999890046d5509b0}{counter\_master}} = 0;}
\DoxyCodeLine{00459 }
\DoxyCodeLine{00460             \textcolor{keywordflow}{if}(abs(last\_BPM -\/ \mbox{\hyperlink{drum__computer_8h_a0065e192c774e20fd5e0ab3c342b7088}{BPM}}) > 3) \{}
\DoxyCodeLine{00461 }
\DoxyCodeLine{00462                 \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0; i<\mbox{\hyperlink{drum__computer_8h_a267b06d60a7514d898b5cac91b4380ec}{FourFour}}; i++) \{}
\DoxyCodeLine{00463 }
\DoxyCodeLine{00464                     \textcolor{comment}{// INIT: Counter}}
\DoxyCodeLine{00465                     counter\_DS1[i] = 0;}
\DoxyCodeLine{00466                     counter\_DS2[i] = 0;}
\DoxyCodeLine{00467                     counter\_DS3[i] = 0;}
\DoxyCodeLine{00468                     counter\_DS4[i] = 0;}
\DoxyCodeLine{00469 }
\DoxyCodeLine{00470                     \mbox{\hyperlink{drum__computer_8h_ad32e19a8282780d0a134ec07797ac10b}{drum\_index}} = 0;}
\DoxyCodeLine{00471                     \mbox{\hyperlink{drum__computer_8h_a148d70203e23260f999890046d5509b0}{counter\_master}} = 0;}
\DoxyCodeLine{00472 }
\DoxyCodeLine{00473                     \textcolor{comment}{// RESET: Drum sound bins}}
\DoxyCodeLine{00474                     \mbox{\hyperlink{drum__computer_8h_a1d0ce949a258b04a5822d3442fd73d83}{DS1s}} = 0;}
\DoxyCodeLine{00475                     DS2s = 0;}
\DoxyCodeLine{00476                     DS3s = 0;}
\DoxyCodeLine{00477                     DS4s = 0;}
\DoxyCodeLine{00478 }
\DoxyCodeLine{00479                     drums = 0;}
\DoxyCodeLine{00480 }
\DoxyCodeLine{00481                     timing\_position\_in\_samples[i] = (\mbox{\hyperlink{drum__computer_8h_a267b06d60a7514d898b5cac91b4380ec}{FourFour}} / 4 ) * (i + 1) * (MasterClock / \mbox{\hyperlink{drum__computer_8h_a267b06d60a7514d898b5cac91b4380ec}{FourFour}}) * (60 / \mbox{\hyperlink{drum__computer_8h_a0065e192c774e20fd5e0ab3c342b7088}{BPM}});}
\DoxyCodeLine{00482                 \}}
\DoxyCodeLine{00483             \}}
\DoxyCodeLine{00484         \}}
\DoxyCodeLine{00485 }
\DoxyCodeLine{00486         \textcolor{comment}{// RESET: ADSR for being ready in next cycle}}
\DoxyCodeLine{00487         adsr\_SN1[\mbox{\hyperlink{drum__computer_8h_ad32e19a8282780d0a134ec07797ac10b}{drum\_index}}].adsr\_done = \textcolor{keyword}{false};}
\DoxyCodeLine{00488         adsr\_SN2[\mbox{\hyperlink{drum__computer_8h_ad32e19a8282780d0a134ec07797ac10b}{drum\_index}}].adsr\_done = \textcolor{keyword}{false};}
\DoxyCodeLine{00489         adsr\_SN3[\mbox{\hyperlink{drum__computer_8h_ad32e19a8282780d0a134ec07797ac10b}{drum\_index}}].adsr\_done = \textcolor{keyword}{false};}
\DoxyCodeLine{00490         adsr\_SN4[\mbox{\hyperlink{drum__computer_8h_ad32e19a8282780d0a134ec07797ac10b}{drum\_index}}].adsr\_done = \textcolor{keyword}{false};}
\DoxyCodeLine{00491     \}}
\DoxyCodeLine{00492 }
\DoxyCodeLine{00493     \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{00494 \}}

\end{DoxyCode}
\mbox{\Hypertarget{drum__computer_8c_a0945a49b026be615b8a70c8ec885ac08}\label{drum__computer_8c_a0945a49b026be615b8a70c8ec885ac08}} 
\index{drum\_computer.c@{drum\_computer.c}!Drum\_Computer\_Reset@{Drum\_Computer\_Reset}}
\index{Drum\_Computer\_Reset@{Drum\_Computer\_Reset}!drum\_computer.c@{drum\_computer.c}}
\doxysubsubsection{\texorpdfstring{Drum\_Computer\_Reset()}{Drum\_Computer\_Reset()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def Drum\+\_\+\+Computer\+\_\+\+Reset (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

TODO \begin{DoxyReturn}{Returns}
HAL\+\_\+\+Status\+Type\+Def 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{drum__computer_8c_source_l00198}{198}} of file \mbox{\hyperlink{drum__computer_8c_source}{drum\+\_\+computer.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00198                                             \{}
\DoxyCodeLine{00199 }
\DoxyCodeLine{00200     Display.Drumcomputer\_ONOFF = \textcolor{keyword}{false};}
\DoxyCodeLine{00201 }
\DoxyCodeLine{00202     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0; i<MAX\_NUMBER\_OF\_SAMPLES; i++) \{}
\DoxyCodeLine{00203         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j=0; j<NUMBER\_OF\_DRUMSTEPS; j++) \{}
\DoxyCodeLine{00204             Display.DrumMatrix[i][j] = \textcolor{keyword}{false};}
\DoxyCodeLine{00205         \}}
\DoxyCodeLine{00206     \}}
\DoxyCodeLine{00207 }
\DoxyCodeLine{00208     \textcolor{comment}{// INIT: Tempo, SR, Counter}}
\DoxyCodeLine{00209     \mbox{\hyperlink{drum__computer_8h_a0065e192c774e20fd5e0ab3c342b7088}{BPM}} = 120;}
\DoxyCodeLine{00210     last\_BPM = \mbox{\hyperlink{drum__computer_8h_a0065e192c774e20fd5e0ab3c342b7088}{BPM}};}
\DoxyCodeLine{00211     BPM\_MAX = 160;}
\DoxyCodeLine{00212     MasterClock = LUT\_SR;}
\DoxyCodeLine{00213     \mbox{\hyperlink{drum__computer_8h_a148d70203e23260f999890046d5509b0}{counter\_master}} = 0;}
\DoxyCodeLine{00214 }
\DoxyCodeLine{00215     \textcolor{comment}{// INIT: Sound bins}}
\DoxyCodeLine{00216     \mbox{\hyperlink{drum__computer_8h_a1d0ce949a258b04a5822d3442fd73d83}{DS1s}} = 0;}
\DoxyCodeLine{00217     DS2s = 0;}
\DoxyCodeLine{00218     DS3s = 0;}
\DoxyCodeLine{00219     DS4s = 0;}
\DoxyCodeLine{00220     drums = 0;}
\DoxyCodeLine{00221 }
\DoxyCodeLine{00222     \textcolor{comment}{// Drums: Index}}
\DoxyCodeLine{00223     \mbox{\hyperlink{drum__computer_8h_ad32e19a8282780d0a134ec07797ac10b}{drum\_index}} = 0;}
\DoxyCodeLine{00224 }
\DoxyCodeLine{00225     \textcolor{comment}{// FOR: all steps in drums}}
\DoxyCodeLine{00226     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0; i<\mbox{\hyperlink{drum__computer_8h_a267b06d60a7514d898b5cac91b4380ec}{FourFour}}; i++) \{}
\DoxyCodeLine{00227 }
\DoxyCodeLine{00228         \textcolor{comment}{// INIT: Flag}}
\DoxyCodeLine{00229         \mbox{\hyperlink{drum__computer_8h_a88744615d25a485f31d6718453e6d324}{flag\_DS1}}[i] = 0;}
\DoxyCodeLine{00230         flag\_DS2[i] = 0;}
\DoxyCodeLine{00231         flag\_DS3[i] = 0;}
\DoxyCodeLine{00232         flag\_DS4[i] = 0;}
\DoxyCodeLine{00233 }
\DoxyCodeLine{00234         \textcolor{comment}{// INIT: Counter}}
\DoxyCodeLine{00235         counter\_DS1[i] = 0;}
\DoxyCodeLine{00236         counter\_DS2[i] = 0;}
\DoxyCodeLine{00237         counter\_DS3[i] = 0;}
\DoxyCodeLine{00238         counter\_DS4[i] = 0;}
\DoxyCodeLine{00239 }
\DoxyCodeLine{00240         \textcolor{comment}{// INIT: Timing positions}}
\DoxyCodeLine{00241         \mbox{\hyperlink{drum__computer_8h_a4c0fb828065d1505aa1abfdd52afc7c3}{timing\_DS1}}[i] = 0;}
\DoxyCodeLine{00242         timing\_DS2[i] = 0;}
\DoxyCodeLine{00243         timing\_DS3[i] = 0;}
\DoxyCodeLine{00244         timing\_DS4[i] = 0;}
\DoxyCodeLine{00245 }
\DoxyCodeLine{00246         \textcolor{comment}{// INIT: Array of timing positions}}
\DoxyCodeLine{00247         timing\_position\_in\_samples[i] = (\mbox{\hyperlink{drum__computer_8h_a267b06d60a7514d898b5cac91b4380ec}{FourFour}} / 4 ) * (i + 1) * (MasterClock / \mbox{\hyperlink{drum__computer_8h_a267b06d60a7514d898b5cac91b4380ec}{FourFour}}) * (60 / \mbox{\hyperlink{drum__computer_8h_a0065e192c774e20fd5e0ab3c342b7088}{BPM}});}
\DoxyCodeLine{00248     \}}
\DoxyCodeLine{00249 }
\DoxyCodeLine{00250     Display.Drumcomputer\_BPMbyECG\_ONOFF = \textcolor{keyword}{false};}
\DoxyCodeLine{00251     strcpy(Display.value\_str\_drumcomputer[6], \textcolor{stringliteral}{"{}OFF"{}});}
\DoxyCodeLine{00252 }
\DoxyCodeLine{00253     \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{00254 \}}

\end{DoxyCode}
\mbox{\Hypertarget{drum__computer_8c_ab788a1e344e6956cb70a8e5e1ea4d0bd}\label{drum__computer_8c_ab788a1e344e6956cb70a8e5e1ea4d0bd}} 
\index{drum\_computer.c@{drum\_computer.c}!PlaySingleSample@{PlaySingleSample}}
\index{PlaySingleSample@{PlaySingleSample}!drum\_computer.c@{drum\_computer.c}}
\doxysubsubsection{\texorpdfstring{PlaySingleSample()}{PlaySingleSample()}}
{\footnotesize\ttfamily void Play\+Single\+Sample (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



function to play the same sample each time it is triggerd, must be called inside \mbox{\hyperlink{signal__synthesis_8h_a14e563872b7cc3bae6f534d36f016911}{Signal\+\_\+\+Synthesis()}} 



Definition at line \mbox{\hyperlink{drum__computer_8c_source_l00500}{500}} of file \mbox{\hyperlink{drum__computer_8c_source}{drum\+\_\+computer.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00500                             \{}
\DoxyCodeLine{00501 }
\DoxyCodeLine{00502     \mbox{\hyperlink{drum__computer_8h_a4f45ba3b9c8c3c6e57de16324bf23604}{single\_sample}} = PSS[counter\_single\_sample];}
\DoxyCodeLine{00503     counter\_single\_sample++;}
\DoxyCodeLine{00504 }
\DoxyCodeLine{00505     \textcolor{keywordflow}{if}(counter\_single\_sample == DS\_L -\/ 1) \{}
\DoxyCodeLine{00506         counter\_single\_sample = 0;}
\DoxyCodeLine{00507         play\_single\_sample\_flag = \textcolor{keyword}{false};}
\DoxyCodeLine{00508     \}}
\DoxyCodeLine{00509 \}}

\end{DoxyCode}
\mbox{\Hypertarget{drum__computer_8c_afe5a4ffde057a9bf69f40122bd7fee59}\label{drum__computer_8c_afe5a4ffde057a9bf69f40122bd7fee59}} 
\index{drum\_computer.c@{drum\_computer.c}!Sequencer\_ADSR\_Init@{Sequencer\_ADSR\_Init}}
\index{Sequencer\_ADSR\_Init@{Sequencer\_ADSR\_Init}!drum\_computer.c@{drum\_computer.c}}
\doxysubsubsection{\texorpdfstring{Sequencer\_ADSR\_Init()}{Sequencer\_ADSR\_Init()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def Sequencer\+\_\+\+ADSR\+\_\+\+Init (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structadsr}{adsr}} $\ast$}]{env }\end{DoxyParamCaption})}

TODO 
\begin{DoxyParams}{Parameters}
{\em env} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
HAL\+\_\+\+Status\+Type\+Def 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{drum__computer_8c_source_l00019}{19}} of file \mbox{\hyperlink{drum__computer_8c_source}{drum\+\_\+computer.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00019                                                        \{}
\DoxyCodeLine{00020 }
\DoxyCodeLine{00021     \textcolor{comment}{// INIT: ADSR structs}}
\DoxyCodeLine{00022     env-\/>adsr\_counter = 0;}
\DoxyCodeLine{00023     env-\/>adsr\_max\_amp = 1.00;                   \textcolor{comment}{// maximum value should be 1}}
\DoxyCodeLine{00024 }
\DoxyCodeLine{00025     env-\/>adsr\_attack\_time = 0.01 * LUT\_SR;}
\DoxyCodeLine{00026     env-\/>adsr\_decay\_time = 0.05 * LUT\_SR;}
\DoxyCodeLine{00027     env-\/>adsr\_sustain\_time = 0.05 * LUT\_SR;}
\DoxyCodeLine{00028     env-\/>adsr\_sustain\_amplitude = 0.3;}
\DoxyCodeLine{00029     env-\/>adsr\_release\_time = 0.01 * LUT\_SR;}
\DoxyCodeLine{00030 }
\DoxyCodeLine{00031     env-\/>adsr\_done = \textcolor{keyword}{false};}
\DoxyCodeLine{00032 }
\DoxyCodeLine{00033     \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{00034 \}}

\end{DoxyCode}
\mbox{\Hypertarget{drum__computer_8c_af1fa77afa44aa624f611ecb1bcb9117e}\label{drum__computer_8c_af1fa77afa44aa624f611ecb1bcb9117e}} 
\index{drum\_computer.c@{drum\_computer.c}!Sequencer\_Reset@{Sequencer\_Reset}}
\index{Sequencer\_Reset@{Sequencer\_Reset}!drum\_computer.c@{drum\_computer.c}}
\doxysubsubsection{\texorpdfstring{Sequencer\_Reset()}{Sequencer\_Reset()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def Sequencer\+\_\+\+Reset (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

TODO \begin{DoxyReturn}{Returns}
HAL\+\_\+\+Status\+Type\+Def 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{drum__computer_8c_source_l00261}{261}} of file \mbox{\hyperlink{drum__computer_8c_source}{drum\+\_\+computer.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00261                                         \{}
\DoxyCodeLine{00262 }
\DoxyCodeLine{00263     Display.Sequencer\_ONOFF = \textcolor{keyword}{false};}
\DoxyCodeLine{00264 }
\DoxyCodeLine{00265     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0; i<MAX\_NUMBER\_OF\_NOTES; i++) \{}
\DoxyCodeLine{00266         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j=0; j<NUMBER\_OF\_SEQUENCERSTEPS; j++) \{}
\DoxyCodeLine{00267             Display.SequencerMatrix[i][j] = \textcolor{keyword}{false};}
\DoxyCodeLine{00268         \}}
\DoxyCodeLine{00269         Display.Sequencer\_Note[i] = \textcolor{charliteral}{'C'};}
\DoxyCodeLine{00270         Display.Sequencer\_Noteindex[i] = 0;}
\DoxyCodeLine{00271         Display.Sequencer\_Octave[i] = 0;}
\DoxyCodeLine{00272     \}}
\DoxyCodeLine{00273 }
\DoxyCodeLine{00274     \textcolor{comment}{// FOR: all steps in sequencer}}
\DoxyCodeLine{00275     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0; i<\mbox{\hyperlink{drum__computer_8h_a267b06d60a7514d898b5cac91b4380ec}{FourFour}}; i++) \{}
\DoxyCodeLine{00276 }
\DoxyCodeLine{00277         \textcolor{comment}{// INIT: Sequencer timing positions}}
\DoxyCodeLine{00278         timing\_SN1[i] = 0;}
\DoxyCodeLine{00279         timing\_SN2[i] = 0;}
\DoxyCodeLine{00280         timing\_SN3[i] = 0;}
\DoxyCodeLine{00281         timing\_SN4[i] = 0;}
\DoxyCodeLine{00282 }
\DoxyCodeLine{00283         \textcolor{comment}{// INIT: Sequencer start index}}
\DoxyCodeLine{00284         \mbox{\hyperlink{drum__computer_8h_abafd5c3bbb1d0bbc3e708889e904e3a7}{current\_LUT\_index\_SN1}}[i] = LUT\_STARTINDEX[\mbox{\hyperlink{drum__computer_8h_a4211ba08e77d82a294762a623041e342}{freq\_index\_SN1}}];}
\DoxyCodeLine{00285         current\_LUT\_index\_SN2[i] = LUT\_STARTINDEX[freq\_index\_SN2];}
\DoxyCodeLine{00286         current\_LUT\_index\_SN3[i] = LUT\_STARTINDEX[freq\_index\_SN3];}
\DoxyCodeLine{00287         current\_LUT\_index\_SN4[i] = LUT\_STARTINDEX[freq\_index\_SN4];}
\DoxyCodeLine{00288 }
\DoxyCodeLine{00289         \textcolor{comment}{// INIT: ADSR structs}}
\DoxyCodeLine{00290         \mbox{\hyperlink{drum__computer_8c_afe5a4ffde057a9bf69f40122bd7fee59}{Sequencer\_ADSR\_Init}}(\&adsr\_SN1[i]);}
\DoxyCodeLine{00291         \mbox{\hyperlink{drum__computer_8c_afe5a4ffde057a9bf69f40122bd7fee59}{Sequencer\_ADSR\_Init}}(\&adsr\_SN2[i]);}
\DoxyCodeLine{00292         \mbox{\hyperlink{drum__computer_8c_afe5a4ffde057a9bf69f40122bd7fee59}{Sequencer\_ADSR\_Init}}(\&adsr\_SN3[i]);}
\DoxyCodeLine{00293         \mbox{\hyperlink{drum__computer_8c_afe5a4ffde057a9bf69f40122bd7fee59}{Sequencer\_ADSR\_Init}}(\&adsr\_SN4[i]);}
\DoxyCodeLine{00294     \}}
\DoxyCodeLine{00295 }
\DoxyCodeLine{00296     strcpy(Display.value\_str\_sequencer[0], \textcolor{stringliteral}{"{}OFF"{}});}
\DoxyCodeLine{00297     sprintf(Display.value\_str\_sequencer[1], \textcolor{stringliteral}{"{}\%c"{}}, Display.Sequencer\_Note[0]);}
\DoxyCodeLine{00298     sprintf(Display.value\_str\_sequencer[2], \textcolor{stringliteral}{"{}\%d"{}}, Display.Sequencer\_Octave[0]);}
\DoxyCodeLine{00299     sprintf(Display.value\_str\_sequencer[3], \textcolor{stringliteral}{"{}\%c"{}}, Display.Sequencer\_Note[1]);}
\DoxyCodeLine{00300     sprintf(Display.value\_str\_sequencer[4], \textcolor{stringliteral}{"{}\%d"{}}, Display.Sequencer\_Octave[1]);}
\DoxyCodeLine{00301     sprintf(Display.value\_str\_sequencer[5], \textcolor{stringliteral}{"{}\%c"{}}, Display.Sequencer\_Note[2]);}
\DoxyCodeLine{00302     sprintf(Display.value\_str\_sequencer[6], \textcolor{stringliteral}{"{}\%d"{}}, Display.Sequencer\_Octave[2]);}
\DoxyCodeLine{00303 }
\DoxyCodeLine{00304     \textcolor{keywordflow}{return} HAL\_OK;}
\DoxyCodeLine{00305 \}}

\end{DoxyCode}
