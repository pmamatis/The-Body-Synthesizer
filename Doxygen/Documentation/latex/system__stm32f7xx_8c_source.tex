\hypertarget{system__stm32f7xx_8c_source}{}\doxysection{system\+\_\+stm32f7xx.\+c}
\label{system__stm32f7xx_8c_source}\index{/media/paul/LINUX\_MEM/Uni/Git Repos/Body-\/Synthesizer\_STM32\_F746ZG/body-\/synthesizer-\/stm32-\/f746zg/Core/Src/system\_stm32f7xx.c@{/media/paul/LINUX\_MEM/Uni/Git Repos/Body-\/Synthesizer\_STM32\_F746ZG/body-\/synthesizer-\/stm32-\/f746zg/Core/Src/system\_stm32f7xx.c}}
\mbox{\hyperlink{system__stm32f7xx_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00001}00001 }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00064}00064 \textcolor{preprocessor}{\#include "{}stm32f7xx.h"{}}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00065}00065 }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00066}00066 \textcolor{preprocessor}{\#if !defined  (HSE\_VALUE) }}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00067}\mbox{\hyperlink{group__STM32F7xx__System__Private__Includes_gaeafcff4f57440c60e64812dddd13e7cb}{00067}} \textcolor{preprocessor}{  \#define HSE\_VALUE    ((uint32\_t)25000000) }}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00068}00068 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* HSE\_VALUE */}\textcolor{preprocessor}{}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00069}00069 }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00070}00070 \textcolor{preprocessor}{\#if !defined  (HSI\_VALUE)}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00071}\mbox{\hyperlink{group__STM32F7xx__System__Private__Includes_gaaa8c76e274d0f6dd2cefb5d0b17fbc37}{00071}} \textcolor{preprocessor}{  \#define HSI\_VALUE    ((uint32\_t)16000000) }}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00072}00072 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* HSI\_VALUE */}\textcolor{preprocessor}{}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00073}00073 }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00090}00090 \textcolor{comment}{/************************* Miscellaneous Configuration ************************/}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00091}00091 }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00094}00094 \textcolor{comment}{/* \#define VECT\_TAB\_SRAM */}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00095}00095 \textcolor{preprocessor}{\#define VECT\_TAB\_OFFSET  0x00 }}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00097}00097 \textcolor{comment}{/******************************************************************************/}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00098}00098 }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00115}00115   \textcolor{comment}{/* This variable is updated in three ways:}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00116}00116 \textcolor{comment}{      1) by calling CMSIS function SystemCoreClockUpdate()}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00117}00117 \textcolor{comment}{      2) by calling HAL API function HAL\_RCC\_GetHCLKFreq()}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00118}00118 \textcolor{comment}{      3) each time HAL\_RCC\_ClockConfig() is called to configure the system clock frequency }}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00119}00119 \textcolor{comment}{         Note: If you use this function to configure the system clock; then there}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00120}00120 \textcolor{comment}{               is no need to call the 2 first functions listed above, since SystemCoreClock}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00121}00121 \textcolor{comment}{               variable is updated automatically.}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00122}00122 \textcolor{comment}{  */}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00123}00123   uint32\_t SystemCoreClock = 16000000;}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00124}00124   \textcolor{keyword}{const} uint8\_t AHBPrescTable[16] = \{0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 6, 7, 8, 9\};}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00125}00125   \textcolor{keyword}{const} uint8\_t APBPrescTable[8] = \{0, 0, 0, 0, 1, 2, 3, 4\};}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00126}00126 }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00150}\mbox{\hyperlink{group__STM32F7xx__System__Private__Functions_ga93f514700ccf00d08dbdcff7f1224eb2}{00150}} \textcolor{keywordtype}{void} \mbox{\hyperlink{group__STM32F7xx__System__Private__Functions_ga93f514700ccf00d08dbdcff7f1224eb2}{SystemInit}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00151}00151 \{}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00152}00152   \textcolor{comment}{/* FPU settings -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00153}00153 \textcolor{preprocessor}{  \#if (\_\_FPU\_PRESENT == 1) \&\& (\_\_FPU\_USED == 1)}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00154}00154     SCB-\/>CPACR |= ((3UL << 10*2)|(3UL << 11*2));  \textcolor{comment}{/* set CP10 and CP11 Full Access */}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00155}00155 \textcolor{preprocessor}{  \#endif}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00156}00156   \textcolor{comment}{/* Reset the RCC clock configuration to the default reset state -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00157}00157   \textcolor{comment}{/* Set HSION bit */}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00158}00158   RCC-\/>CR |= (uint32\_t)0x00000001;}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00159}00159 }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00160}00160   \textcolor{comment}{/* Reset CFGR register */}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00161}00161   RCC-\/>CFGR = 0x00000000;}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00162}00162 }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00163}00163   \textcolor{comment}{/* Reset HSEON, CSSON and PLLON bits */}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00164}00164   RCC-\/>CR \&= (uint32\_t)0xFEF6FFFF;}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00165}00165 }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00166}00166   \textcolor{comment}{/* Reset PLLCFGR register */}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00167}00167   RCC-\/>PLLCFGR = 0x24003010;}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00168}00168 }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00169}00169   \textcolor{comment}{/* Reset HSEBYP bit */}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00170}00170   RCC-\/>CR \&= (uint32\_t)0xFFFBFFFF;}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00171}00171 }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00172}00172   \textcolor{comment}{/* Disable all interrupts */}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00173}00173   RCC-\/>CIR = 0x00000000;}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00174}00174 }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00175}00175   \textcolor{comment}{/* Configure the Vector Table location add offset address -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00176}00176 \textcolor{preprocessor}{\#ifdef VECT\_TAB\_SRAM}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00177}00177   SCB-\/>VTOR = RAMDTCM\_BASE | \mbox{\hyperlink{group__STM32F7xx__System__Private__Defines_ga40e1495541cbb4acbe3f1819bd87a9fe}{VECT\_TAB\_OFFSET}}; \textcolor{comment}{/* Vector Table Relocation in Internal SRAM */}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00178}00178 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00179}00179   SCB-\/>VTOR = FLASH\_BASE | \mbox{\hyperlink{group__STM32F7xx__System__Private__Defines_ga40e1495541cbb4acbe3f1819bd87a9fe}{VECT\_TAB\_OFFSET}}; \textcolor{comment}{/* Vector Table Relocation in Internal FLASH */}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00180}00180 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00181}00181 \}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00182}00182 }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00219}\mbox{\hyperlink{group__STM32F7xx__System__Private__Functions_gae0c36a9591fe6e9c45ecb21a794f0f0f}{00219}} \textcolor{keywordtype}{void} \mbox{\hyperlink{group__STM32F7xx__System__Private__Functions_gae0c36a9591fe6e9c45ecb21a794f0f0f}{SystemCoreClockUpdate}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00220}00220 \{}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00221}00221   uint32\_t tmp = 0, pllvco = 0, pllp = 2, pllsource = 0, pllm = 2;}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00222}00222   }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00223}00223   \textcolor{comment}{/* Get SYSCLK source -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00224}00224   tmp = RCC-\/>CFGR \& RCC\_CFGR\_SWS;}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00225}00225 }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00226}00226   \textcolor{keywordflow}{switch} (tmp)}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00227}00227   \{}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00228}00228     \textcolor{keywordflow}{case} 0x00:  \textcolor{comment}{/* HSI used as system clock source */}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00229}00229       SystemCoreClock = \mbox{\hyperlink{group__STM32F7xx__System__Private__Includes_gaaa8c76e274d0f6dd2cefb5d0b17fbc37}{HSI\_VALUE}};}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00230}00230       \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00231}00231     \textcolor{keywordflow}{case} 0x04:  \textcolor{comment}{/* HSE used as system clock source */}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00232}00232       SystemCoreClock = \mbox{\hyperlink{group__STM32F7xx__System__Private__Includes_gaeafcff4f57440c60e64812dddd13e7cb}{HSE\_VALUE}};}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00233}00233       \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00234}00234     \textcolor{keywordflow}{case} 0x08:  \textcolor{comment}{/* PLL used as system clock source */}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00235}00235 }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00236}00236       \textcolor{comment}{/* PLL\_VCO = (HSE\_VALUE or HSI\_VALUE / PLL\_M) * PLL\_N}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00237}00237 \textcolor{comment}{         SYSCLK = PLL\_VCO / PLL\_P}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00238}00238 \textcolor{comment}{         */}    }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00239}00239       pllsource = (RCC-\/>PLLCFGR \& RCC\_PLLCFGR\_PLLSRC) >> 22;}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00240}00240       pllm = RCC-\/>PLLCFGR \& RCC\_PLLCFGR\_PLLM;}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00241}00241       }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00242}00242       \textcolor{keywordflow}{if} (pllsource != 0)}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00243}00243       \{}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00244}00244         \textcolor{comment}{/* HSE used as PLL clock source */}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00245}00245         pllvco = (\mbox{\hyperlink{group__STM32F7xx__System__Private__Includes_gaeafcff4f57440c60e64812dddd13e7cb}{HSE\_VALUE}} / pllm) * ((RCC-\/>PLLCFGR \& RCC\_PLLCFGR\_PLLN) >> 6);}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00246}00246       \}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00247}00247       \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00248}00248       \{}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00249}00249         \textcolor{comment}{/* HSI used as PLL clock source */}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00250}00250         pllvco = (\mbox{\hyperlink{group__STM32F7xx__System__Private__Includes_gaaa8c76e274d0f6dd2cefb5d0b17fbc37}{HSI\_VALUE}} / pllm) * ((RCC-\/>PLLCFGR \& RCC\_PLLCFGR\_PLLN) >> 6);      }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00251}00251       \}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00252}00252 }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00253}00253       pllp = (((RCC-\/>PLLCFGR \& RCC\_PLLCFGR\_PLLP) >>16) + 1 ) *2;}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00254}00254       SystemCoreClock = pllvco/pllp;}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00255}00255       \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00256}00256     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00257}00257       SystemCoreClock = \mbox{\hyperlink{group__STM32F7xx__System__Private__Includes_gaaa8c76e274d0f6dd2cefb5d0b17fbc37}{HSI\_VALUE}};}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00258}00258       \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00259}00259   \}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00260}00260   \textcolor{comment}{/* Compute HCLK frequency -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00261}00261   \textcolor{comment}{/* Get HCLK prescaler */}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00262}00262   tmp = AHBPrescTable[((RCC-\/>CFGR \& RCC\_CFGR\_HPRE) >> 4)];}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00263}00263   \textcolor{comment}{/* HCLK frequency */}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00264}00264   SystemCoreClock >>= tmp;}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00265}00265 \}}
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00266}00266 }
\DoxyCodeLine{\Hypertarget{system__stm32f7xx_8c_source_l00278}00278 \textcolor{comment}{/************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/}}

\end{DoxyCode}
